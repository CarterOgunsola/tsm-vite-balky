(function(oe){typeof define=="function"&&define.amd?define(oe):oe()})(function(){"use strict";var oe=document.createElement("style");oe.textContent=`body{margin:0;padding:0}.container{width:300px;height:300px;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}#canvas{position:absolute;top:0;right:0;bottom:0;left:0}
`,document.head.appendChild(oe);let We=0;function S(){if(!(We>100)){if(We===100)console.warn("Curtains: too many warnings thrown, stop logging.");else{const u=Array.prototype.slice.call(arguments);console.warn.apply(console,u)}We++}}function Z(){const u=Array.prototype.slice.call(arguments);console.error.apply(console,u)}function Oi(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,u=>{let t=Math.random()*16|0;return(u==="x"?t:t&3|8).toString(16).toUpperCase()})}function pt(u){return(u&u-1)===0}function tr(u,t,e){return(1-e)*u+e*t}class er{constructor(t){if(this.type="Scene",!t||t.type!=="Renderer")Z(this.type+": Renderer not passed as first argument",t);else if(!t.gl){Z(this.type+": Renderer WebGL context is undefined",t);return}this.renderer=t,this.gl=t.gl,this.initStacks()}initStacks(){this.stacks={pingPong:[],renderTargets:[],opaque:[],transparent:[],renderPasses:[],scenePasses:[]}}resetPlaneStacks(){this.stacks.pingPong=[],this.stacks.renderTargets=[],this.stacks.opaque=[],this.stacks.transparent=[];for(let t=0;t<this.renderer.planes.length;t++)this.addPlane(this.renderer.planes[t])}resetShaderPassStacks(){this.stacks.scenePasses=[],this.stacks.renderPasses=[];for(let t=0;t<this.renderer.shaderPasses.length;t++)this.renderer.shaderPasses[t].index=t,this.renderer.shaderPasses[t]._isScenePass?this.stacks.scenePasses.push(this.renderer.shaderPasses[t]):this.stacks.renderPasses.push(this.renderer.shaderPasses[t]);this.stacks.scenePasses.length===0&&(this.renderer.state.scenePassIndex=null)}addToRenderTargetsStack(t){const e=this.renderer.planes.filter(s=>s.type!=="PingPongPlane"&&s.target&&s.uuid!==t.uuid);let i=-1;if(t.target._depth){for(let s=e.length-1;s>=0;s--)if(e[s].target.uuid===t.target.uuid){i=s+1;break}}else i=e.findIndex(s=>s.target.uuid===t.target.uuid);i=Math.max(0,i),e.splice(i,0,t),t.target._depth?(e.sort((s,r)=>s.index-r.index),e.sort((s,r)=>r.renderOrder-s.renderOrder)):(e.sort((s,r)=>r.index-s.index),e.sort((s,r)=>s.renderOrder-r.renderOrder)),e.sort((s,r)=>s.target.index-r.target.index),this.stacks.renderTargets=e}addToRegularPlaneStack(t){const e=this.renderer.planes.filter(s=>s.type!=="PingPongPlane"&&!s.target&&s._transparent===t._transparent&&s.uuid!==t.uuid);let i=-1;for(let s=e.length-1;s>=0;s--)if(e[s]._geometry.definition.id===t._geometry.definition.id){i=s+1;break}return i=Math.max(0,i),e.splice(i,0,t),e.sort((s,r)=>s.index-r.index),e}addPlane(t){if(t.type==="PingPongPlane")this.stacks.pingPong.push(t);else if(t.target)this.addToRenderTargetsStack(t);else if(t._transparent){const e=this.addToRegularPlaneStack(t);e.sort((i,s)=>s.relativeTranslation.z-i.relativeTranslation.z),e.sort((i,s)=>s.renderOrder-i.renderOrder),this.stacks.transparent=e}else{const e=this.addToRegularPlaneStack(t);e.sort((i,s)=>s.renderOrder-i.renderOrder),this.stacks.opaque=e}}removePlane(t){t.type==="PingPongPlane"?this.stacks.pingPong=this.stacks.pingPong.filter(e=>e.uuid!==t.uuid):t.target?this.stacks.renderTargets=this.stacks.renderTargets.filter(e=>e.uuid!==t.uuid):t._transparent?this.stacks.transparent=this.stacks.transparent.filter(e=>e.uuid!==t.uuid):this.stacks.opaque=this.stacks.opaque.filter(e=>e.uuid!==t.uuid)}setPlaneRenderOrder(t){if(t.type==="ShaderPass")this.sortShaderPassStack(t._isScenePass?this.stacks.scenePasses:this.stacks.renderPasses);else if(t.type==="PingPongPlane")return;if(t.target)t.target._depth?(this.stacks.renderTargets.sort((e,i)=>e.index-i.index),this.stacks.renderTargets.sort((e,i)=>i.renderOrder-e.renderOrder)):(this.stacks.renderTargets.sort((e,i)=>i.index-e.index),this.stacks.renderTargets.sort((e,i)=>e.renderOrder-i.renderOrder)),this.stacks.renderTargets.sort((e,i)=>e.target.index-i.target.index);else{const e=t._transparent?this.stacks.transparent:this.stacks.opaque,i=this.stacks.scenePasses.find((s,r)=>s._isScenePass&&!s._depth&&r===0);!this.renderer.depth||i?(e.sort((s,r)=>r.index-s.index),t._transparent&&e.sort((s,r)=>s.relativeTranslation.z-r.relativeTranslation.z),e.sort((s,r)=>s.renderOrder-r.renderOrder)):(e.sort((s,r)=>s.index-r.index),t._transparent&&e.sort((s,r)=>r.relativeTranslation.z-s.relativeTranslation.z),e.sort((s,r)=>r.renderOrder-s.renderOrder))}}addShaderPass(t){t._isScenePass?(this.stacks.scenePasses.push(t),this.sortShaderPassStack(this.stacks.scenePasses)):(this.stacks.renderPasses.push(t),this.sortShaderPassStack(this.stacks.renderPasses))}removeShaderPass(t){this.resetShaderPassStacks()}sortShaderPassStack(t){t.sort((e,i)=>e.index-i.index),t.sort((e,i)=>e.renderOrder-i.renderOrder)}enableShaderPass(){this.stacks.scenePasses.length&&this.stacks.renderPasses.length===0&&this.renderer.planes.length&&(this.renderer.state.scenePassIndex=0,this.renderer.bindFrameBuffer(this.stacks.scenePasses[0].target))}drawRenderPasses(){this.stacks.scenePasses.length&&this.stacks.renderPasses.length&&this.renderer.planes.length&&(this.renderer.state.scenePassIndex=0,this.renderer.bindFrameBuffer(this.stacks.scenePasses[0].target));for(let t=0;t<this.stacks.renderPasses.length;t++)this.stacks.renderPasses[t]._startDrawing(),this.renderer.clearDepth()}drawScenePasses(){for(let t=0;t<this.stacks.scenePasses.length;t++)this.stacks.scenePasses[t]._startDrawing()}drawPingPongStack(){for(let t=0;t<this.stacks.pingPong.length;t++){const e=this.stacks.pingPong[t];e&&e._startDrawing()}}drawStack(t){for(let e=0;e<this.stacks[t].length;e++){const i=this.stacks[t][e];i&&i._startDrawing()}}draw(){this.drawPingPongStack(),this.enableShaderPass(),this.drawStack("renderTargets"),this.drawRenderPasses(),this.renderer.setBlending(!1),this.drawStack("opaque"),this.stacks.transparent.length&&(this.renderer.setBlending(!0),this.drawStack("transparent")),this.drawScenePasses()}}class ir{constructor(){this.geometries=[],this.clear()}clear(){this.textures=[],this.programs=[]}getGeometryFromID(t){return this.geometries.find(e=>e.id===t)}addGeometry(t,e,i){this.geometries.push({id:t,vertices:e,uvs:i})}isSameShader(t,e){return t.localeCompare(e)===0}getProgramFromShaders(t,e){return this.programs.find(i=>this.isSameShader(i.vsCode,t)&&this.isSameShader(i.fsCode,e))}addProgram(t){this.programs.push(t)}getTextureFromSource(t){const e=typeof t=="string"?t:t.src;return this.textures.find(i=>i.source&&i.source.src===e)}addTexture(t){this.getTextureFromSource(t.source)||this.textures.push(t)}removeTexture(t){this.textures=this.textures.filter(e=>e.uuid!==t.uuid)}}class sr{constructor(){this.clear()}clear(){this.queue=[]}add(t,e=!1){const i={callback:t,keep:e,timeout:null};return i.timeout=setTimeout(()=>{this.queue.push(i)},0),i}execute(){this.queue.map(t=>{t.callback&&t.callback(),clearTimeout(this.queue.timeout)}),this.queue=this.queue.filter(t=>t.keep)}}class rr{constructor({alpha:t,antialias:e,premultipliedAlpha:i,depth:s,failIfMajorPerformanceCaveat:r,preserveDrawingBuffer:n,stencil:a,container:h,pixelRatio:o,renderingScale:l,production:d,onError:_,onSuccess:f,onContextLost:p,onContextRestored:c,onDisposed:g,onSceneChange:x}){this.type="Renderer",this.alpha=t,this.antialias=e,this.premultipliedAlpha=i,this.depth=s,this.failIfMajorPerformanceCaveat=r,this.preserveDrawingBuffer=n,this.stencil=a,this.container=h,this.pixelRatio=o,this._renderingScale=l,this.production=d,this.onError=_,this.onSuccess=f,this.onContextLost=p,this.onContextRestored=c,this.onDisposed=g,this.onSceneChange=x,this.initState(),this.canvas=document.createElement("canvas");const m={alpha:this.alpha,premultipliedAlpha:this.premultipliedAlpha,antialias:this.antialias,depth:this.depth,failIfMajorPerformanceCaveat:this.failIfMajorPerformanceCaveat,preserveDrawingBuffer:this.preserveDrawingBuffer,stencil:this.stencil};if(this.gl=this.canvas.getContext("webgl2",m),this._isWebGL2=!!this.gl,this.gl||(this.gl=this.canvas.getContext("webgl",m)||this.canvas.getContext("experimental-webgl",m)),this.gl)this.onSuccess&&this.onSuccess();else{this.production||S(this.type+": WebGL context could not be created"),this.state.isActive=!1,this.onError&&this.onError();return}this.initRenderer()}initState(){this.state={isActive:!0,isContextLost:!0,drawingEnabled:!0,forceRender:!1,currentProgramID:null,currentGeometryID:null,forceBufferUpdate:!1,depthTest:null,blending:null,cullFace:null,frameBufferID:null,scenePassIndex:null,activeTexture:null,unpackAlignment:null,flipY:null,premultiplyAlpha:null}}initCallbackQueueManager(){this.nextRender=new sr}initRenderer(){this.planes=[],this.renderTargets=[],this.shaderPasses=[],this.state.isContextLost=!1,this.state.maxTextureSize=this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE),this.initCallbackQueueManager(),this.setBlendFunc(),this.setDepthFunc(),this.setDepthTest(!0),this.cache=new ir,this.scene=new er(this),this.getExtensions(),this._contextLostHandler=this.contextLost.bind(this),this.canvas.addEventListener("webglcontextlost",this._contextLostHandler,!1),this._contextRestoredHandler=this.contextRestored.bind(this),this.canvas.addEventListener("webglcontextrestored",this._contextRestoredHandler,!1)}getExtensions(){this.extensions=[],this._isWebGL2?(this.extensions.EXT_color_buffer_float=this.gl.getExtension("EXT_color_buffer_float"),this.extensions.OES_texture_float_linear=this.gl.getExtension("OES_texture_float_linear"),this.extensions.EXT_texture_filter_anisotropic=this.gl.getExtension("EXT_texture_filter_anisotropic"),this.extensions.WEBGL_lose_context=this.gl.getExtension("WEBGL_lose_context")):(this.extensions.OES_vertex_array_object=this.gl.getExtension("OES_vertex_array_object"),this.extensions.OES_texture_float=this.gl.getExtension("OES_texture_float"),this.extensions.OES_texture_float_linear=this.gl.getExtension("OES_texture_float_linear"),this.extensions.OES_texture_half_float=this.gl.getExtension("OES_texture_half_float"),this.extensions.OES_texture_half_float_linear=this.gl.getExtension("OES_texture_half_float_linear"),this.extensions.EXT_texture_filter_anisotropic=this.gl.getExtension("EXT_texture_filter_anisotropic"),this.extensions.OES_element_index_uint=this.gl.getExtension("OES_element_index_uint"),this.extensions.OES_standard_derivatives=this.gl.getExtension("OES_standard_derivatives"),this.extensions.EXT_sRGB=this.gl.getExtension("EXT_sRGB"),this.extensions.WEBGL_depth_texture=this.gl.getExtension("WEBGL_depth_texture"),this.extensions.WEBGL_draw_buffers=this.gl.getExtension("WEBGL_draw_buffers"),this.extensions.WEBGL_lose_context=this.gl.getExtension("WEBGL_lose_context"))}contextLost(t){this.state.isContextLost=!0,this.state.isActive&&(t.preventDefault(),this.nextRender.add(()=>this.onContextLost&&this.onContextLost()))}restoreContext(){this.state.isActive&&(this.initState(),this.gl&&this.extensions.WEBGL_lose_context?this.extensions.WEBGL_lose_context.restoreContext():(!this.gl&&!this.production?S(this.type+": Could not restore the context because the context is not defined"):!this.extensions.WEBGL_lose_context&&!this.production&&S(this.type+": Could not restore the context because the restore context extension is not defined"),this.onError&&this.onError()))}isContextexFullyRestored(){let t=!0;for(let e=0;e<this.renderTargets.length;e++){this.renderTargets[e].textures[0]._canDraw||(t=!1);break}if(t)for(let e=0;e<this.planes.length;e++)if(this.planes[e]._canDraw){for(let i=0;i<this.planes[e].textures.length;i++)if(!this.planes[e].textures[i]._canDraw){t=!1;break}}else{t=!1;break}if(t)for(let e=0;e<this.shaderPasses.length;e++)if(this.shaderPasses[e]._canDraw){for(let i=0;i<this.shaderPasses[e].textures.length;i++)if(!this.shaderPasses[e].textures[i]._canDraw){t=!1;break}}else{t=!1;break}return t}contextRestored(){this.getExtensions(),this.setBlendFunc(),this.setDepthFunc(),this.setDepthTest(!0),this.cache.clear(),this.scene.initStacks();for(let e=0;e<this.renderTargets.length;e++)this.renderTargets[e]._restoreContext();for(let e=0;e<this.planes.length;e++)this.planes[e]._restoreContext();for(let e=0;e<this.shaderPasses.length;e++)this.shaderPasses[e]._restoreContext();const t=this.nextRender.add(()=>{this.isContextexFullyRestored()&&(t.keep=!1,this.state.isContextLost=!1,this.onContextRestored&&this.onContextRestored(),this.onSceneChange(),this.needRender())},!0)}setPixelRatio(t){this.pixelRatio=t}setSize(){if(!this.gl)return;const t=this.container.getBoundingClientRect();this._boundingRect={width:t.width*this.pixelRatio,height:t.height*this.pixelRatio,top:t.top*this.pixelRatio,left:t.left*this.pixelRatio};const e=!!navigator.userAgent.match(/Version\/[\d\.]+.*Safari/),i=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;if(e&&i){let s=function(r){let n=0;for(;r&&!isNaN(r.offsetTop);)n+=r.offsetTop-r.scrollTop,r=r.offsetParent;return n};this._boundingRect.top=s(this.container)*this.pixelRatio}this.canvas.style.width=Math.floor(this._boundingRect.width/this.pixelRatio)+"px",this.canvas.style.height=Math.floor(this._boundingRect.height/this.pixelRatio)+"px",this.canvas.width=Math.floor(this._boundingRect.width*this._renderingScale),this.canvas.height=Math.floor(this._boundingRect.height*this._renderingScale),this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}resize(){for(let t=0;t<this.planes.length;t++)this.planes[t]._canDraw&&this.planes[t].resize();for(let t=0;t<this.shaderPasses.length;t++)this.shaderPasses[t]._canDraw&&this.shaderPasses[t].resize();for(let t=0;t<this.renderTargets.length;t++)this.renderTargets[t].resize();this.needRender()}clear(){this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}clearDepth(){this.gl.clear(this.gl.DEPTH_BUFFER_BIT)}clearColor(){this.gl.clear(this.gl.COLOR_BUFFER_BIT)}bindFrameBuffer(t,e){let i=null;t?(i=t.index,i!==this.state.frameBufferID&&(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,t._frameBuffer),this.gl.viewport(0,0,t._size.width,t._size.height),t._shouldClear&&!e&&this.clear())):this.state.frameBufferID!==null&&(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)),this.state.frameBufferID=i}setDepthTest(t){t&&!this.state.depthTest?(this.state.depthTest=t,this.gl.enable(this.gl.DEPTH_TEST)):!t&&this.state.depthTest&&(this.state.depthTest=t,this.gl.disable(this.gl.DEPTH_TEST))}setDepthFunc(){this.gl.depthFunc(this.gl.LEQUAL)}setBlending(t=!1){t&&!this.state.blending?(this.state.blending=t,this.gl.enable(this.gl.BLEND)):!t&&this.state.blending&&(this.state.blending=t,this.gl.disable(this.gl.BLEND))}setBlendFunc(){this.gl.enable(this.gl.BLEND),this.premultipliedAlpha?this.gl.blendFuncSeparate(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA):this.gl.blendFuncSeparate(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA)}setFaceCulling(t){if(this.state.cullFace!==t)if(this.state.cullFace=t,t==="none")this.gl.disable(this.gl.CULL_FACE);else{const e=t==="front"?this.gl.FRONT:this.gl.BACK;this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(e)}}useProgram(t){(this.state.currentProgramID===null||this.state.currentProgramID!==t.id)&&(this.gl.useProgram(t.program),this.state.currentProgramID=t.id)}removePlane(t){this.gl&&(this.planes=this.planes.filter(e=>e.uuid!==t.uuid),this.scene.removePlane(t),t=null,this.gl&&this.clear(),this.onSceneChange())}removeRenderTarget(t){if(!this.gl)return;let e=this.planes.find(i=>i.type!=="PingPongPlane"&&i.target&&i.target.uuid===t.uuid);for(let i=0;i<this.planes.length;i++)this.planes[i].target&&this.planes[i].target.uuid===t.uuid&&(this.planes[i].target=null);this.renderTargets=this.renderTargets.filter(i=>i.uuid!==t.uuid);for(let i=0;i<this.renderTargets.length;i++)this.renderTargets[i].index=i;t=null,this.gl&&this.clear(),e&&this.scene.resetPlaneStacks(),this.onSceneChange()}removeShaderPass(t){this.gl&&(this.shaderPasses=this.shaderPasses.filter(e=>e.uuid!==t.uuid),this.scene.removeShaderPass(t),t=null,this.gl&&this.clear(),this.onSceneChange())}enableDrawing(){this.state.drawingEnabled=!0}disableDrawing(){this.state.drawingEnabled=!1}needRender(){this.state.forceRender=!0}render(){this.gl&&(this.clear(),this.state.currentGeometryID=null,this.scene.draw())}deletePrograms(){for(let t=0;t<this.cache.programs.length;t++){const e=this.cache.programs[t];this.gl.deleteProgram(e.program)}}dispose(){if(!this.gl)return;for(this.state.isActive=!1;this.planes.length>0;)this.removePlane(this.planes[0]);for(;this.shaderPasses.length>0;)this.removeShaderPass(this.shaderPasses[0]);for(;this.renderTargets.length>0;)this.removeRenderTarget(this.renderTargets[0]);let t=this.nextRender.add(()=>{this.planes.length===0&&this.shaderPasses.length===0&&this.renderTargets.length===0&&(t.keep=!1,this.deletePrograms(),this.clear(),this.canvas.removeEventListener("webgllost",this._contextLostHandler,!1),this.canvas.removeEventListener("webglrestored",this._contextRestoredHandler,!1),this.gl&&this.extensions.WEBGL_lose_context&&this.extensions.WEBGL_lose_context.loseContext(),this.canvas.width=this.canvas.width,this.gl=null,this.container.removeChild(this.canvas),this.container=null,this.canvas=null,this.onDisposed&&this.onDisposed())},!0)}}class nr{constructor({xOffset:t=0,yOffset:e=0,lastXDelta:i=0,lastYDelta:s=0,shouldWatch:r=!0,onScroll:n=()=>{}}={}){this.xOffset=t,this.yOffset=e,this.lastXDelta=i,this.lastYDelta=s,this.shouldWatch=r,this.onScroll=n,this.handler=this.scroll.bind(this,!0),this.shouldWatch&&window.addEventListener("scroll",this.handler,{passive:!0})}scroll(){this.updateScrollValues(window.pageXOffset,window.pageYOffset)}updateScrollValues(t,e){const i=this.xOffset;this.xOffset=t,this.lastXDelta=i-this.xOffset;const s=this.yOffset;this.yOffset=e,this.lastYDelta=s-this.yOffset,this.onScroll&&this.onScroll(this.lastXDelta,this.lastYDelta)}dispose(){this.shouldWatch&&window.removeEventListener("scroll",this.handler,{passive:!0})}}const ar="8.1.5";class hr{constructor({container:t,alpha:e=!0,premultipliedAlpha:i=!1,antialias:s=!0,depth:r=!0,failIfMajorPerformanceCaveat:n=!0,preserveDrawingBuffer:a=!1,stencil:h=!1,autoResize:o=!0,autoRender:l=!0,watchScroll:d=!0,pixelRatio:_=window.devicePixelRatio||1,renderingScale:f=1,production:p=!1}={}){this.type="Curtains",this._autoResize=o,this._autoRender=l,this._watchScroll=d,this.pixelRatio=_,f=isNaN(f)?1:parseFloat(f),this._renderingScale=Math.max(.25,Math.min(1,f)),this.premultipliedAlpha=i,this.alpha=e,this.antialias=s,this.depth=r,this.failIfMajorPerformanceCaveat=n,this.preserveDrawingBuffer=a,this.stencil=h,this.production=p,this.errors=!1,t?this.setContainer(t):this.production||S(this.type+": no container provided in the initial parameters. Use setContainer() method to set one later and initialize the WebGL context")}setContainer(t){if(t)if(typeof t=="string")if(t=document.getElementById(t),t)this.container=t;else{let e=document.createElement("div");e.setAttribute("id","curtains-canvas"),document.body.appendChild(e),this.container=e,this.production||S('Curtains: no valid container HTML element or ID provided, created a div with "curtains-canvas" ID instead')}else t instanceof Element&&(this.container=t);else{let e=document.createElement("div");e.setAttribute("id","curtains-canvas"),document.body.appendChild(e),this.container=e,this.production||S('Curtains: no valid container HTML element or ID provided, created a div with "curtains-canvas" ID instead')}this._initCurtains()}_initCurtains(){this.planes=[],this.renderTargets=[],this.shaderPasses=[],this._initRenderer(),this.gl&&(this._initScroll(),this._setSize(),this._addListeners(),this.container.appendChild(this.canvas),console.log("curtains.js - v"+ar),this._animationFrameID=null,this._autoRender&&this._animate())}_initRenderer(){this.renderer=new rr({alpha:this.alpha,antialias:this.antialias,premultipliedAlpha:this.premultipliedAlpha,depth:this.depth,failIfMajorPerformanceCaveat:this.failIfMajorPerformanceCaveat,preserveDrawingBuffer:this.preserveDrawingBuffer,stencil:this.stencil,container:this.container,pixelRatio:this.pixelRatio,renderingScale:this._renderingScale,production:this.production,onError:()=>this._onRendererError(),onSuccess:()=>this._onRendererSuccess(),onContextLost:()=>this._onRendererContextLost(),onContextRestored:()=>this._onRendererContextRestored(),onDisposed:()=>this._onRendererDisposed(),onSceneChange:()=>this._keepSync()}),this.gl=this.renderer.gl,this.canvas=this.renderer.canvas}restoreContext(){this.renderer.restoreContext()}_animate(){this.render(),this._animationFrameID=window.requestAnimationFrame(this._animate.bind(this))}enableDrawing(){this.renderer.enableDrawing()}disableDrawing(){this.renderer.disableDrawing()}needRender(){this.renderer.needRender()}nextRender(t,e=!1){return this.renderer.nextRender.add(t,e)}clear(){this.renderer&&this.renderer.clear()}clearDepth(){this.renderer&&this.renderer.clearDepth()}clearColor(){this.renderer&&this.renderer.clearColor()}isWebGL2(){return this.gl?this.renderer._isWebGL2:!1}render(){this.renderer.nextRender.execute(),!(!this.renderer.state.drawingEnabled&&!this.renderer.state.forceRender)&&(this.renderer.state.forceRender&&(this.renderer.state.forceRender=!1),this._onRenderCallback&&this._onRenderCallback(),this.renderer.render())}_addListeners(){this._resizeHandler=null,this._autoResize&&(this._resizeHandler=this.resize.bind(this,!0),window.addEventListener("resize",this._resizeHandler,!1))}setPixelRatio(t,e){this.pixelRatio=parseFloat(Math.max(t,1))||1,this.renderer.setPixelRatio(t),this.resize(e)}_setSize(){this.renderer.setSize(),this._scrollManager.shouldWatch&&(this._scrollManager.xOffset=window.pageXOffset,this._scrollManager.yOffset=window.pageYOffset)}getBoundingRect(){return this.renderer._boundingRect}resize(t){this.gl&&(this._setSize(),this.renderer.resize(),this.nextRender(()=>{this._onAfterResizeCallback&&t&&this._onAfterResizeCallback()}))}_initScroll(){this._scrollManager=new nr({xOffset:window.pageXOffset,yOffset:window.pageYOffset,lastXDelta:0,lastYDelta:0,shouldWatch:this._watchScroll,onScroll:(t,e)=>this._updateScroll(t,e)})}_updateScroll(t,e){for(let i=0;i<this.planes.length;i++)this.planes[i].watchScroll&&this.planes[i].updateScrollPosition(t,e);this.renderer.needRender(),this._onScrollCallback&&this._onScrollCallback()}updateScrollValues(t,e){this._scrollManager.updateScrollValues(t,e)}getScrollDeltas(){return{x:this._scrollManager.lastXDelta,y:this._scrollManager.lastYDelta}}getScrollValues(){return{x:this._scrollManager.xOffset,y:this._scrollManager.yOffset}}_keepSync(){this.planes=this.renderer.planes,this.shaderPasses=this.renderer.shaderPasses,this.renderTargets=this.renderer.renderTargets}lerp(t,e,i){return tr(t,e,i)}onAfterResize(t){return t&&(this._onAfterResizeCallback=t),this}onError(t){return t&&(this._onErrorCallback=t),this}_onRendererError(){setTimeout(()=>{this._onErrorCallback&&!this.errors&&this._onErrorCallback(),this.errors=!0},0)}onSuccess(t){return t&&(this._onSuccessCallback=t),this}_onRendererSuccess(){setTimeout(()=>{this._onSuccessCallback&&this._onSuccessCallback()},0)}onContextLost(t){return t&&(this._onContextLostCallback=t),this}_onRendererContextLost(){this._onContextLostCallback&&this._onContextLostCallback()}onContextRestored(t){return t&&(this._onContextRestoredCallback=t),this}_onRendererContextRestored(){this._onContextRestoredCallback&&this._onContextRestoredCallback()}onRender(t){return t&&(this._onRenderCallback=t),this}onScroll(t){return t&&(this._onScrollCallback=t),this}dispose(){this.renderer.dispose()}_onRendererDisposed(){this._animationFrameID&&window.cancelAnimationFrame(this._animationFrameID),this._resizeHandler&&window.removeEventListener("resize",this._resizeHandler,!1),this._scrollManager&&this._scrollManager.dispose()}}class or{constructor(t,e,i){if(this.type="Uniforms",!t||t.type!=="Renderer")Z(this.type+": Renderer not passed as first argument",t);else if(!t.gl){Z(this.type+": Renderer WebGL context is undefined",t);return}if(this.renderer=t,this.gl=t.gl,this.program=e,this.uniforms={},i)for(const s in i){const r=i[s];this.uniforms[s]={name:r.name,type:r.type,value:r.value.clone&&typeof r.value.clone=="function"?r.value.clone():r.value,update:null}}}handleUniformSetting(t){switch(t.type){case"1i":t.update=this.setUniform1i.bind(this);break;case"1iv":t.update=this.setUniform1iv.bind(this);break;case"1f":t.update=this.setUniform1f.bind(this);break;case"1fv":t.update=this.setUniform1fv.bind(this);break;case"2i":t.update=this.setUniform2i.bind(this);break;case"2iv":t.update=this.setUniform2iv.bind(this);break;case"2f":t.update=this.setUniform2f.bind(this);break;case"2fv":t.update=this.setUniform2fv.bind(this);break;case"3i":t.update=this.setUniform3i.bind(this);break;case"3iv":t.update=this.setUniform3iv.bind(this);break;case"3f":t.update=this.setUniform3f.bind(this);break;case"3fv":t.update=this.setUniform3fv.bind(this);break;case"4i":t.update=this.setUniform4i.bind(this);break;case"4iv":t.update=this.setUniform4iv.bind(this);break;case"4f":t.update=this.setUniform4f.bind(this);break;case"4fv":t.update=this.setUniform4fv.bind(this);break;case"mat2":t.update=this.setUniformMatrix2fv.bind(this);break;case"mat3":t.update=this.setUniformMatrix3fv.bind(this);break;case"mat4":t.update=this.setUniformMatrix4fv.bind(this);break;default:this.renderer.production||S(this.type+": This uniform type is not handled : ",t.type)}}setInternalFormat(t){t.value.type==="Vec2"?(t._internalFormat="Vec2",t.lastValue=t.value.clone()):t.value.type==="Vec3"?(t._internalFormat="Vec3",t.lastValue=t.value.clone()):t.value.type==="Mat4"?(t._internalFormat="Mat4",t.lastValue=t.value.clone()):t.value.type==="Quat"?(t._internalFormat="Quat",t.lastValue=t.value.clone()):Array.isArray(t.value)?(t._internalFormat="array",t.lastValue=Array.from(t.value)):t.value.constructor===Float32Array?(t._internalFormat="mat",t.lastValue=t.value):(t._internalFormat="float",t.lastValue=t.value)}setUniforms(){if(this.uniforms)for(const t in this.uniforms){let e=this.uniforms[t];e.location=this.gl.getUniformLocation(this.program,e.name),e._internalFormat||this.setInternalFormat(e),e.type||(e._internalFormat==="Vec2"?e.type="2f":e._internalFormat==="Vec3"?e.type="3f":e._internalFormat==="Mat4"?e.type="mat4":e._internalFormat==="array"?e.value.length===4?(e.type="4f",this.renderer.production||S(this.type+": No uniform type declared for "+e.name+", applied a 4f (array of 4 floats) uniform type")):e.value.length===3?(e.type="3f",this.renderer.production||S(this.type+": No uniform type declared for "+e.name+", applied a 3f (array of 3 floats) uniform type")):e.value.length===2&&(e.type="2f",this.renderer.production||S(this.type+": No uniform type declared for "+e.name+", applied a 2f (array of 2 floats) uniform type")):e._internalFormat==="mat"?e.value.length===16?(e.type="mat4",this.renderer.production||S(this.type+": No uniform type declared for "+e.name+", applied a mat4 (4x4 matrix array) uniform type")):e.value.length===9?(e.type="mat3",this.renderer.production||S(this.type+": No uniform type declared for "+e.name+", applied a mat3 (3x3 matrix array) uniform type")):e.value.length===4&&(e.type="mat2",this.renderer.production||S(this.type+": No uniform type declared for "+e.name+", applied a mat2 (2x2 matrix array) uniform type")):(e.type="1f",this.renderer.production||S(this.type+": No uniform type declared for "+e.name+", applied a 1f (float) uniform type"))),this.handleUniformSetting(e),e.update&&e.update(e)}}updateUniforms(){if(this.uniforms)for(const t in this.uniforms){const e=this.uniforms[t];let i=!1;e._internalFormat==="Vec2"||e._internalFormat==="Vec3"||e._internalFormat==="Quat"?e.value.equals(e.lastValue)||(i=!0,e.lastValue.copy(e.value)):e.value.length?JSON.stringify(e.value)!==JSON.stringify(e.lastValue)&&(i=!0,e.lastValue=Array.from(e.value)):e.value!==e.lastValue&&(i=!0,e.lastValue=e.value),i&&e.update&&e.update(e)}}setUniform1i(t){this.gl.uniform1i(t.location,t.value)}setUniform1iv(t){this.gl.uniform1iv(t.location,t.value)}setUniform1f(t){this.gl.uniform1f(t.location,t.value)}setUniform1fv(t){this.gl.uniform1fv(t.location,t.value)}setUniform2i(t){t._internalFormat==="Vec2"?this.gl.uniform2i(t.location,t.value.x,t.value.y):this.gl.uniform2i(t.location,t.value[0],t.value[1])}setUniform2iv(t){t._internalFormat==="Vec2"?this.gl.uniform2iv(t.location,[t.value.x,t.value.y]):this.gl.uniform2iv(t.location,t.value)}setUniform2f(t){t._internalFormat==="Vec2"?this.gl.uniform2f(t.location,t.value.x,t.value.y):this.gl.uniform2f(t.location,t.value[0],t.value[1])}setUniform2fv(t){t._internalFormat==="Vec2"?this.gl.uniform2fv(t.location,[t.value.x,t.value.y]):this.gl.uniform2fv(t.location,t.value)}setUniform3i(t){t._internalFormat==="Vec3"?this.gl.uniform3i(t.location,t.value.x,t.value.y,t.value.z):this.gl.uniform3i(t.location,t.value[0],t.value[1],t.value[2])}setUniform3iv(t){t._internalFormat==="Vec3"?this.gl.uniform3iv(t.location,[t.value.x,t.value.y,t.value.z]):this.gl.uniform3iv(t.location,t.value)}setUniform3f(t){t._internalFormat==="Vec3"?this.gl.uniform3f(t.location,t.value.x,t.value.y,t.value.z):this.gl.uniform3f(t.location,t.value[0],t.value[1],t.value[2])}setUniform3fv(t){t._internalFormat==="Vec3"?this.gl.uniform3fv(t.location,[t.value.x,t.value.y,t.value.z]):this.gl.uniform3fv(t.location,t.value)}setUniform4i(t){t._internalFormat==="Quat"?this.gl.uniform4i(t.location,t.value.elements[0],t.value.elements[1],t.value.elements[2],t.value[3]):this.gl.uniform4i(t.location,t.value[0],t.value[1],t.value[2],t.value[3])}setUniform4iv(t){t._internalFormat==="Quat"?this.gl.uniform4iv(t.location,[t.value.elements[0],t.value.elements[1],t.value.elements[2],t.value[3]]):this.gl.uniform4iv(t.location,t.value)}setUniform4f(t){t._internalFormat==="Quat"?this.gl.uniform4f(t.location,t.value.elements[0],t.value.elements[1],t.value.elements[2],t.value[3]):this.gl.uniform4f(t.location,t.value[0],t.value[1],t.value[2],t.value[3])}setUniform4fv(t){t._internalFormat==="Quat"?this.gl.uniform4fv(t.location,[t.value.elements[0],t.value.elements[1],t.value.elements[2],t.value[3]]):this.gl.uniform4fv(t.location,t.value)}setUniformMatrix2fv(t){this.gl.uniformMatrix2fv(t.location,!1,t.value)}setUniformMatrix3fv(t){this.gl.uniformMatrix3fv(t.location,!1,t.value)}setUniformMatrix4fv(t){t._internalFormat==="Mat4"?this.gl.uniformMatrix4fv(t.location,!1,t.value.elements):this.gl.uniformMatrix4fv(t.location,!1,t.value)}}const Re=`
precision mediump float;
`.replace(/\n/g,""),ki=`
attribute vec3 aVertexPosition;
attribute vec2 aTextureCoord;
`.replace(/\n/g,""),Se=`
varying vec3 vVertexPosition;
varying vec2 vTextureCoord;
`.replace(/\n/g,""),lr=(Re+ki+Se+`
uniform mat4 uMVMatrix;
uniform mat4 uPMatrix;

void main() {
    vTextureCoord = aTextureCoord;
    vVertexPosition = aVertexPosition;
    
    gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);
}
`).replace(/\n/g,""),ur=(Re+Se+`
void main() {
    gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
}
`).replace(/\n/g,""),dr=(Re+ki+Se+`
void main() {
    vTextureCoord = aTextureCoord;
    vVertexPosition = aVertexPosition;
    
    gl_Position = vec4(aVertexPosition, 1.0);
}
`).replace(/\n/g,""),cr=(Re+Se+`
uniform sampler2D uRenderTexture;

void main() {
    gl_FragColor = texture2D(uRenderTexture, vTextureCoord);
}
`).replace(/\n/g,"");let Di=0;class Fi{constructor(t,{parent:e,vertexShader:i,fragmentShader:s}={}){if(this.type="Program",!t||t.type!=="Renderer")Z(this.type+": Renderer not passed as first argument",t);else if(!t.gl){Z(this.type+": Renderer WebGL context is undefined",t);return}this.renderer=t,this.gl=this.renderer.gl,this.parent=e,this.defaultVsCode=this.parent.type==="Plane"?lr:dr,this.defaultFsCode=this.parent.type==="Plane"?ur:cr,i?this.vsCode=i:(!this.renderer.production&&this.parent.type==="Plane"&&S(this.parent.type+": No vertex shader provided, will use a default one"),this.vsCode=this.defaultVsCode),s?this.fsCode=s:(this.renderer.production||S(this.parent.type+": No fragment shader provided, will use a default one"),this.fsCode=this.defaultFsCode),this.compiled=!0,this.setupProgram()}createShader(t,e){const i=this.gl.createShader(e);if(this.gl.shaderSource(i,t),this.gl.compileShader(i),!this.renderer.production&&!this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS)){const s=e===this.gl.VERTEX_SHADER?"vertex shader":"fragment shader";let n=this.gl.getShaderSource(i).split(`
`);for(let a=0;a<n.length;a++)n[a]=a+1+": "+n[a];return n=n.join(`
`),S(this.type+": Errors occurred while compiling the",s,`:
`,this.gl.getShaderInfoLog(i)),Z(n),S(this.type+": Will use a default",s),this.createShader(e===this.gl.VERTEX_SHADER?this.defaultVsCode:this.defaultFsCode,e)}return i}useNewShaders(){this.vertexShader=this.createShader(this.vsCode,this.gl.VERTEX_SHADER),this.fragmentShader=this.createShader(this.fsCode,this.gl.FRAGMENT_SHADER),(!this.vertexShader||!this.fragmentShader)&&(this.renderer.production||S(this.type+": Unable to find or compile the vertex or fragment shader"))}setupProgram(){let t=this.renderer.cache.getProgramFromShaders(this.vsCode,this.fsCode);t?(this.vertexShader=t.vertexShader,this.fragmentShader=t.fragmentShader,this.activeUniforms=t.activeUniforms,this.activeAttributes=t.activeAttributes,this.createProgram()):(this.useNewShaders(),this.compiled&&(this.createProgram(),this.renderer.cache.addProgram(this)))}createProgram(){if(Di++,this.id=Di,this.program=this.gl.createProgram(),this.gl.attachShader(this.program,this.vertexShader),this.gl.attachShader(this.program,this.fragmentShader),this.gl.linkProgram(this.program),!this.renderer.production&&!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS)){S(this.type+": Unable to initialize the shader program: "+this.gl.getProgramInfoLog(this.program)),S(this.type+": Will use default vertex and fragment shaders"),this.vertexShader=this.createShader(this.defaultVsCode,this.gl.VERTEX_SHADER),this.fragmentShader=this.createShader(this.defaultFsCode,this.gl.FRAGMENT_SHADER),this.createProgram();return}if(this.gl.deleteShader(this.vertexShader),this.gl.deleteShader(this.fragmentShader),!this.activeUniforms||!this.activeAttributes){this.activeUniforms={textures:[],textureMatrices:[]};const t=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_UNIFORMS);for(let i=0;i<t;i++){const s=this.gl.getActiveUniform(this.program,i);s.type===this.gl.SAMPLER_2D&&this.activeUniforms.textures.push(s.name),s.type===this.gl.FLOAT_MAT4&&s.name!=="uMVMatrix"&&s.name!=="uPMatrix"&&this.activeUniforms.textureMatrices.push(s.name)}this.activeAttributes=[];const e=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES);for(let i=0;i<e;i++){const s=this.gl.getActiveAttrib(this.program,i);this.activeAttributes.push(s.name)}}}createUniforms(t){this.uniformsManager=new or(this.renderer,this.program,t),this.setUniforms()}setUniforms(){this.renderer.useProgram(this),this.uniformsManager.setUniforms()}updateUniforms(){this.renderer.useProgram(this),this.uniformsManager.updateUniforms()}}class _r{constructor(t,{program:e=null,width:i=1,height:s=1}={}){if(this.type="Geometry",!t||t.type!=="Renderer")Z(this.type+": Renderer not passed as first argument",t);else if(!t.gl){Z(this.type+": Renderer WebGL context is undefined",t);return}this.renderer=t,this.gl=this.renderer.gl,this.definition={id:i*s+i,width:i,height:s},this.setDefaultAttributes(),this.setVerticesUVs()}restoreContext(t){this.program=null,this.setDefaultAttributes(),this.setVerticesUVs(),this.setProgram(t)}setDefaultAttributes(){this.attributes={vertexPosition:{name:"aVertexPosition",size:3,isActive:!1},textureCoord:{name:"aTextureCoord",size:3,isActive:!1}}}setVerticesUVs(){const t=this.renderer.cache.getGeometryFromID(this.definition.id);t?(this.attributes.vertexPosition.array=t.vertices,this.attributes.textureCoord.array=t.uvs):(this.computeVerticesUVs(),this.renderer.cache.addGeometry(this.definition.id,this.attributes.vertexPosition.array,this.attributes.textureCoord.array))}setProgram(t){this.program=t,this.initAttributes(),this.renderer._isWebGL2?(this._vao=this.gl.createVertexArray(),this.gl.bindVertexArray(this._vao)):this.renderer.extensions.OES_vertex_array_object&&(this._vao=this.renderer.extensions.OES_vertex_array_object.createVertexArrayOES(),this.renderer.extensions.OES_vertex_array_object.bindVertexArrayOES(this._vao)),this.initializeBuffers()}initAttributes(){for(const t in this.attributes){if(this.attributes[t].isActive=this.program.activeAttributes.includes(this.attributes[t].name),!this.attributes[t].isActive)return;this.attributes[t].location=this.gl.getAttribLocation(this.program.program,this.attributes[t].name),this.attributes[t].buffer=this.gl.createBuffer(),this.attributes[t].numberOfItems=this.definition.width*this.definition.height*this.attributes[t].size*2}}computeVerticesUVs(){this.attributes.vertexPosition.array=[],this.attributes.textureCoord.array=[];const t=this.attributes.vertexPosition.array,e=this.attributes.textureCoord.array;for(let i=0;i<this.definition.height;i++){const s=i/this.definition.height;for(let r=0;r<this.definition.width;r++){const n=r/this.definition.width;e.push(n),e.push(s),e.push(0),t.push((n-.5)*2),t.push((s-.5)*2),t.push(0),e.push(n+1/this.definition.width),e.push(s),e.push(0),t.push((n+1/this.definition.width-.5)*2),t.push((s-.5)*2),t.push(0),e.push(n),e.push(s+1/this.definition.height),e.push(0),t.push((n-.5)*2),t.push((s+1/this.definition.height-.5)*2),t.push(0),e.push(n),e.push(s+1/this.definition.height),e.push(0),t.push((n-.5)*2),t.push((s+1/this.definition.height-.5)*2),t.push(0),e.push(n+1/this.definition.width),e.push(s),e.push(0),t.push((n+1/this.definition.width-.5)*2),t.push((s-.5)*2),t.push(0),e.push(n+1/this.definition.width),e.push(s+1/this.definition.height),e.push(0),t.push((n+1/this.definition.width-.5)*2),t.push((s+1/this.definition.height-.5)*2),t.push(0)}}}initializeBuffers(){if(this.attributes){for(const t in this.attributes){if(!this.attributes[t].isActive)return;this.gl.enableVertexAttribArray(this.attributes[t].location),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.attributes[t].buffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(this.attributes[t].array),this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.attributes[t].location,this.attributes[t].size,this.gl.FLOAT,!1,0,0)}this.renderer.state.currentGeometryID=this.definition.id}}bindBuffers(){if(this._vao)this.renderer._isWebGL2?this.gl.bindVertexArray(this._vao):this.renderer.extensions.OES_vertex_array_object.bindVertexArrayOES(this._vao);else for(const t in this.attributes){if(!this.attributes[t].isActive)return;this.gl.enableVertexAttribArray(this.attributes[t].location),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.attributes[t].buffer),this.gl.vertexAttribPointer(this.attributes[t].location,this.attributes[t].size,this.gl.FLOAT,!1,0,0)}this.renderer.state.currentGeometryID=this.definition.id}draw(){this.gl.drawArrays(this.gl.TRIANGLES,0,this.attributes.vertexPosition.numberOfItems)}dispose(){this._vao&&(this.renderer._isWebGL2?this.gl.deleteVertexArray(this._vao):this.renderer.extensions.OES_vertex_array_object.deleteVertexArrayOES(this._vao));for(const t in this.attributes){if(!this.attributes[t].isActive)return;this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.attributes[t].buffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,1,this.gl.STATIC_DRAW),this.gl.deleteBuffer(this.attributes[t].buffer)}this.attributes=null,this.renderer.state.currentGeometryID=null}}class gt{constructor(t=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])){this.type="Mat4",this.elements=t}setFromArray(t){for(let e=0;e<this.elements.length;e++)this.elements[e]=t[e];return this}copy(t){const e=t.elements;return this.elements[0]=e[0],this.elements[1]=e[1],this.elements[2]=e[2],this.elements[3]=e[3],this.elements[4]=e[4],this.elements[5]=e[5],this.elements[6]=e[6],this.elements[7]=e[7],this.elements[8]=e[8],this.elements[9]=e[9],this.elements[10]=e[10],this.elements[11]=e[11],this.elements[12]=e[12],this.elements[13]=e[13],this.elements[14]=e[14],this.elements[15]=e[15],this}clone(){return new gt().copy(this)}multiply(t){const e=this.elements,i=t.elements;let s=new gt;return s.elements[0]=i[0]*e[0]+i[1]*e[4]+i[2]*e[8]+i[3]*e[12],s.elements[1]=i[0]*e[1]+i[1]*e[5]+i[2]*e[9]+i[3]*e[13],s.elements[2]=i[0]*e[2]+i[1]*e[6]+i[2]*e[10]+i[3]*e[14],s.elements[3]=i[0]*e[3]+i[1]*e[7]+i[2]*e[11]+i[3]*e[15],s.elements[4]=i[4]*e[0]+i[5]*e[4]+i[6]*e[8]+i[7]*e[12],s.elements[5]=i[4]*e[1]+i[5]*e[5]+i[6]*e[9]+i[7]*e[13],s.elements[6]=i[4]*e[2]+i[5]*e[6]+i[6]*e[10]+i[7]*e[14],s.elements[7]=i[4]*e[3]+i[5]*e[7]+i[6]*e[11]+i[7]*e[15],s.elements[8]=i[8]*e[0]+i[9]*e[4]+i[10]*e[8]+i[11]*e[12],s.elements[9]=i[8]*e[1]+i[9]*e[5]+i[10]*e[9]+i[11]*e[13],s.elements[10]=i[8]*e[2]+i[9]*e[6]+i[10]*e[10]+i[11]*e[14],s.elements[11]=i[8]*e[3]+i[9]*e[7]+i[10]*e[11]+i[11]*e[15],s.elements[12]=i[12]*e[0]+i[13]*e[4]+i[14]*e[8]+i[15]*e[12],s.elements[13]=i[12]*e[1]+i[13]*e[5]+i[14]*e[9]+i[15]*e[13],s.elements[14]=i[12]*e[2]+i[13]*e[6]+i[14]*e[10]+i[15]*e[14],s.elements[15]=i[12]*e[3]+i[13]*e[7]+i[14]*e[11]+i[15]*e[15],s}getInverse(){const t=this.elements,e=new gt,i=e.elements;let s=t[0],r=t[1],n=t[2],a=t[3],h=t[4],o=t[5],l=t[6],d=t[7],_=t[8],f=t[9],p=t[10],c=t[11],g=t[12],x=t[13],m=t[14],b=t[15],v=s*o-r*h,y=s*l-n*h,w=s*d-a*h,P=r*l-n*o,R=r*d-a*o,T=n*d-a*l,E=_*x-f*g,A=_*m-p*g,O=_*b-c*g,k=f*m-p*x,L=f*b-c*x,F=p*b-c*m,M=v*F-y*L+w*k+P*O-R*A+T*E;return M?(M=1/M,i[0]=(o*F-l*L+d*k)*M,i[1]=(n*L-r*F-a*k)*M,i[2]=(x*T-m*R+b*P)*M,i[3]=(p*R-f*T-c*P)*M,i[4]=(l*O-h*F-d*A)*M,i[5]=(s*F-n*O+a*A)*M,i[6]=(m*w-g*T-b*y)*M,i[7]=(_*T-p*w+c*y)*M,i[8]=(h*L-o*O+d*E)*M,i[9]=(r*O-s*L-a*E)*M,i[10]=(g*R-x*w+b*v)*M,i[11]=(f*w-_*R-c*v)*M,i[12]=(o*A-h*k-l*E)*M,i[13]=(s*k-r*A+n*E)*M,i[14]=(x*y-g*P-m*v)*M,i[15]=(_*P-f*y+p*v)*M,e):null}scale(t){let e=this.elements;return e[0]*=t.x,e[1]*=t.x,e[2]*=t.x,e[3]*=t.x,e[4]*=t.y,e[5]*=t.y,e[6]*=t.y,e[7]*=t.y,e[8]*=t.z,e[9]*=t.z,e[10]*=t.z,e[11]*=t.z,this}compose(t,e,i){let s=this.elements;const r=e.elements[0],n=e.elements[1],a=e.elements[2],h=e.elements[3],o=r+r,l=n+n,d=a+a,_=r*o,f=r*l,p=r*d,c=n*l,g=n*d,x=a*d,m=h*o,b=h*l,v=h*d,y=i.x,w=i.y,P=i.z;return s[0]=(1-(c+x))*y,s[1]=(f+v)*y,s[2]=(p-b)*y,s[3]=0,s[4]=(f-v)*w,s[5]=(1-(_+x))*w,s[6]=(g+m)*w,s[7]=0,s[8]=(p+b)*P,s[9]=(g-m)*P,s[10]=(1-(_+c))*P,s[11]=0,s[12]=t.x,s[13]=t.y,s[14]=t.z,s[15]=1,this}composeFromOrigin(t,e,i,s){let r=this.elements;const n=e.elements[0],a=e.elements[1],h=e.elements[2],o=e.elements[3],l=n+n,d=a+a,_=h+h,f=n*l,p=n*d,c=n*_,g=a*d,x=a*_,m=h*_,b=o*l,v=o*d,y=o*_,w=i.x,P=i.y,R=i.z,T=s.x,E=s.y,A=s.z,O=(1-(g+m))*w,k=(p+y)*w,L=(c-v)*w,F=(p-y)*P,M=(1-(f+m))*P,G=(x+b)*P,st=(c+v)*R,qt=(x-b)*R,Lt=(1-(f+g))*R;return r[0]=O,r[1]=k,r[2]=L,r[3]=0,r[4]=F,r[5]=M,r[6]=G,r[7]=0,r[8]=st,r[9]=qt,r[10]=Lt,r[11]=0,r[12]=t.x+T-(O*T+F*E+st*A),r[13]=t.y+E-(k*T+M*E+qt*A),r[14]=t.z+A-(L*T+G*E+Lt*A),r[15]=1,this}}class Tt{constructor(t=0,e=t){this.type="Vec2",this._x=t,this._y=e}get x(){return this._x}get y(){return this._y}set x(t){const e=t!==this._x;this._x=t,e&&this._onChangeCallback&&this._onChangeCallback()}set y(t){const e=t!==this._y;this._y=t,e&&this._onChangeCallback&&this._onChangeCallback()}onChange(t){return t&&(this._onChangeCallback=t),this}set(t,e){return this._x=t,this._y=e,this}add(t){return this._x+=t.x,this._y+=t.y,this}addScalar(t){return this._x+=t,this._y+=t,this}sub(t){return this._x-=t.x,this._y-=t.y,this}subScalar(t){return this._x-=t,this._y-=t,this}multiply(t){return this._x*=t.x,this._y*=t.y,this}multiplyScalar(t){return this._x*=t,this._y*=t,this}copy(t){return this._x=t.x,this._y=t.y,this}clone(){return new Tt(this._x,this._y)}sanitizeNaNValuesWith(t){return this._x=isNaN(this._x)?t.x:parseFloat(this._x),this._y=isNaN(this._y)?t.y:parseFloat(this._y),this}max(t){return this._x=Math.max(this._x,t.x),this._y=Math.max(this._y,t.y),this}min(t){return this._x=Math.min(this._x,t.x),this._y=Math.min(this._y,t.y),this}equals(t){return this._x===t.x&&this._y===t.y}normalize(){let t=this._x*this._x+this._y*this._y;return t>0&&(t=1/Math.sqrt(t)),this._x*=t,this._y*=t,this}dot(t){return this._x*t.x+this._y*t.y}}class I{constructor(t=0,e=t,i=t){this.type="Vec3",this._x=t,this._y=e,this._z=i}get x(){return this._x}get y(){return this._y}get z(){return this._z}set x(t){const e=t!==this._x;this._x=t,e&&this._onChangeCallback&&this._onChangeCallback()}set y(t){const e=t!==this._y;this._y=t,e&&this._onChangeCallback&&this._onChangeCallback()}set z(t){const e=t!==this._z;this._z=t,e&&this._onChangeCallback&&this._onChangeCallback()}onChange(t){return t&&(this._onChangeCallback=t),this}set(t,e,i){return this._x=t,this._y=e,this._z=i,this}add(t){return this._x+=t.x,this._y+=t.y,this._z+=t.z,this}addScalar(t){return this._x+=t,this._y+=t,this._z+=t,this}sub(t){return this._x-=t.x,this._y-=t.y,this._z-=t.z,this}subScalar(t){return this._x-=t,this._y-=t,this._z-=t,this}multiply(t){return this._x*=t.x,this._y*=t.y,this._z*=t.z,this}multiplyScalar(t){return this._x*=t,this._y*=t,this._z*=t,this}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this}clone(){return new I(this._x,this._y,this._z)}sanitizeNaNValuesWith(t){return this._x=isNaN(this._x)?t.x:parseFloat(this._x),this._y=isNaN(this._y)?t.y:parseFloat(this._y),this._z=isNaN(this._z)?t.z:parseFloat(this._z),this}max(t){return this._x=Math.max(this._x,t.x),this._y=Math.max(this._y,t.y),this._z=Math.max(this._z,t.z),this}min(t){return this._x=Math.min(this._x,t.x),this._y=Math.min(this._y,t.y),this._z=Math.min(this._z,t.z),this}equals(t){return this._x===t.x&&this._y===t.y&&this._z===t.z}normalize(){let t=this._x*this._x+this._y*this._y+this._z*this._z;return t>0&&(t=1/Math.sqrt(t)),this._x*=t,this._y*=t,this._z*=t,this}dot(t){return this._x*t.x+this._y*t.y+this._z*t.z}applyMat4(t){const e=this._x,i=this._y,s=this._z,r=t.elements;let n=r[3]*e+r[7]*i+r[11]*s+r[15];return n=n||1,this._x=(r[0]*e+r[4]*i+r[8]*s+r[12])/n,this._y=(r[1]*e+r[5]*i+r[9]*s+r[13])/n,this._z=(r[2]*e+r[6]*i+r[10]*s+r[14])/n,this}applyQuat(t){const e=this._x,i=this._y,s=this._z,r=t.elements[0],n=t.elements[1],a=t.elements[2],h=t.elements[3],o=h*e+n*s-a*i,l=h*i+a*e-r*s,d=h*s+r*i-n*e,_=-r*e-n*i-a*s;return this._x=o*h+_*-r+l*-a-d*-n,this._y=l*h+_*-n+d*-r-o*-a,this._z=d*h+_*-a+o*-n-l*-r,this}project(t){return this.applyMat4(t.viewMatrix).applyMat4(t.projectionMatrix),this}unproject(t){return this.applyMat4(t.projectionMatrix.getInverse()).applyMat4(t.worldMatrix),this}}const Ge=new Tt,fr=new I,pr=new gt;class le{constructor(t,{isFBOTexture:e=!1,fromTexture:i=!1,loader:s,sampler:r,floatingPoint:n="none",premultiplyAlpha:a=!1,anisotropy:h=1,generateMipmap:o=null,wrapS:l,wrapT:d,minFilter:_,magFilter:f}={}){if(this.type="Texture",t=t&&t.renderer||t,!t||t.type!=="Renderer")Z(this.type+": Renderer not passed as first argument",t);else if(!t.gl){t.production||Z(this.type+": Unable to create a "+this.type+" because the Renderer WebGL context is not defined");return}if(this.renderer=t,this.gl=this.renderer.gl,this.uuid=Oi(),this._globalParameters={unpackAlignment:4,flipY:!e,premultiplyAlpha:!1,shouldPremultiplyAlpha:a,floatingPoint:n,type:this.gl.UNSIGNED_BYTE,internalFormat:this.gl.RGBA,format:this.gl.RGBA},this.parameters={anisotropy:h,generateMipmap:o,wrapS:l||this.gl.CLAMP_TO_EDGE,wrapT:d||this.gl.CLAMP_TO_EDGE,minFilter:_||this.gl.LINEAR,magFilter:f||this.gl.LINEAR,_shouldUpdate:!0},this._initState(),this.sourceType=e?"fbo":"empty",this._useCache=!0,this._samplerName=r,this._sampler={isActive:!1,isTextureBound:!1,texture:this.gl.createTexture()},this._textureMatrix={matrix:new gt,isActive:!1},this._size={width:1,height:1},this.scale=new Tt(1),this.scale.onChange(()=>this.resize()),this.offset=new Tt,this.offset.onChange(()=>this.resize()),this._loader=s,this._sourceLoaded=!1,this._uploaded=!1,this._willUpdate=!1,this.shouldUpdate=!1,this._forceUpdate=!1,this.userData={},this._canDraw=!1,i){this._copyOnInit=!0,this._copiedFrom=i;return}this._copyOnInit=!1,this._initTexture()}_initState(){this._state={anisotropy:1,generateMipmap:!1,wrapS:null,wrapT:null,minFilter:null,magFilter:this.gl.LINEAR}}_initTexture(){this.gl.bindTexture(this.gl.TEXTURE_2D,this._sampler.texture),this.sourceType==="empty"&&(this._globalParameters.flipY=!1,this._updateGlobalTexParameters(),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,new Uint8Array([0,0,0,255])),this._canDraw=!0)}_restoreFromTexture(){this._copyOnInit||this._initTexture(),this._parent&&(this._setTextureUniforms(),this._setSize()),this.copy(this._copiedFrom),this._canDraw=!0}_restoreContext(){if(this._canDraw=!1,this._sampler.texture=this.gl.createTexture(),this._sampler.isActive=!1,this._sampler.isTextureBound=!1,this._textureMatrix.isActive=!1,this._initState(),this._state.generateMipmap=!1,this.parameters._shouldUpdate=!0,!this._copiedFrom)this._initTexture(),this._parent&&this._setParent(),this.source&&(this.setSource(this.source),this.sourceType==="image"?this.renderer.cache.addTexture(this):this.needUpdate()),this._canDraw=!0;else{const t=this.renderer.nextRender.add(()=>{this._copiedFrom._canDraw&&(this._restoreFromTexture(),t.keep=!1)},!0)}}addParent(t){if(!t||t.type!=="Plane"&&t.type!=="PingPongPlane"&&t.type!=="ShaderPass"&&t.type!=="RenderTarget"){this.renderer.production||S(this.type+": cannot add texture as a child of ",t," because it is not a valid parent");return}this._parent=t,this.index=this._parent.textures.length,this._parent.textures.push(this),this._setParent()}_setParent(){if(this._sampler.name=this._samplerName||"uSampler"+this.index,this._textureMatrix.name=this._samplerName?this._samplerName+"Matrix":"uTextureMatrix"+this.index,this._parent._program){if(!this._parent._program.compiled){this.renderer.production||S(this.type+": Unable to create the texture because the program is not valid");return}if(this._setTextureUniforms(),this._copyOnInit){const t=this.renderer.nextRender.add(()=>{this._copiedFrom._canDraw&&this._copiedFrom._uploaded&&(this.copy(this._copiedFrom),t.keep=!1)},!0);return}this.source?this._parent.loader&&this._parent.loader._addSourceToParent(this.source,this.sourceType):this._size={width:this._parent._boundingRect.document.width,height:this._parent._boundingRect.document.height},this._setSize()}else this._parent.type==="RenderTarget"&&(this._size={width:this._parent._size&&this._parent._size.width||this.renderer._boundingRect.width,height:this._parent._size&&this._parent._size.height||this.renderer._boundingRect.height},this._upload(),this._updateTexParameters(),this._canDraw=!0)}hasParent(){return!!this._parent}_setTextureUniforms(){const t=this._parent._program.activeUniforms;for(let e=0;e<t.textures.length;e++)t.textures[e]===this._sampler.name&&(this._sampler.isActive=!0,this.renderer.useProgram(this._parent._program),this._sampler.location=this.gl.getUniformLocation(this._parent._program.program,this._sampler.name),t.textureMatrices.find(s=>s===this._textureMatrix.name)&&(this._textureMatrix.isActive=!0,this._textureMatrix.location=this.gl.getUniformLocation(this._parent._program.program,this._textureMatrix.name)),this.gl.uniform1i(this._sampler.location,this.index))}copy(t){if(!t||t.type!=="Texture"){this.renderer.production||S(this.type+": Unable to set the texture from texture:",t);return}this._globalParameters=Object.assign({},t._globalParameters),this._state=Object.assign({},t._state),this.parameters.generateMipmap=t.parameters.generateMipmap,this._state.generateMipmap=null,this._size=t._size,!this._sourceLoaded&&t._sourceLoaded&&this._onSourceLoadedCallback&&this._onSourceLoadedCallback(),this._sourceLoaded=t._sourceLoaded,!this._uploaded&&t._uploaded&&this._onSourceUploadedCallback&&this._onSourceUploadedCallback(),this._uploaded=t._uploaded,this.sourceType=t.sourceType,this.source=t.source,this._videoFrameCallbackID=t._videoFrameCallbackID,this._sampler.texture=t._sampler.texture,this._copiedFrom=t,this._parent&&this._parent._program&&(!this._canDraw||!this._textureMatrix.matrix)&&(this._setSize(),this._canDraw=!0),this._updateTexParameters(),this.renderer.needRender()}setSource(t){this._sourceLoaded||this.renderer.nextRender.add(()=>this._onSourceLoadedCallback&&this._onSourceLoadedCallback());const e=t.tagName.toUpperCase()==="IMG"?"image":t.tagName.toLowerCase();if((e==="video"||e==="canvas")&&(this._useCache=!1),this._useCache){const i=this.renderer.cache.getTextureFromSource(t);if(i&&i.uuid!==this.uuid){this._uploaded||(this.renderer.nextRender.add(()=>this._onSourceUploadedCallback&&this._onSourceUploadedCallback()),this._uploaded=!0),this.copy(i),this.resize();return}}if(this.sourceType==="empty"||this.sourceType!==e)if(e==="video")this._willUpdate=!1,this.shouldUpdate=!0;else if(e==="canvas")this._willUpdate=!0,this.shouldUpdate=!0;else if(e==="image")this._willUpdate=!1,this.shouldUpdate=!1;else{this.renderer.production||S(this.type+": this HTML tag could not be converted into a texture:",t.tagName);return}this.source=t,this.sourceType=e,this._size={width:this.source.naturalWidth||this.source.width||this.source.videoWidth,height:this.source.naturalHeight||this.source.height||this.source.videoHeight},this._sourceLoaded=!0,this.gl.bindTexture(this.gl.TEXTURE_2D,this._sampler.texture),this.resize(),this._globalParameters.flipY=!0,this._globalParameters.premultiplyAlpha=this._globalParameters.shouldPremultiplyAlpha,this.sourceType==="image"&&(this.parameters.generateMipmap=this.parameters.generateMipmap||this.parameters.generateMipmap===null,this.parameters._shouldUpdate=this.parameters.generateMipmap,this._state.generateMipmap=!1,this._upload()),this.renderer.needRender()}_updateGlobalTexParameters(){this.renderer.state.unpackAlignment!==this._globalParameters.unpackAlignment&&(this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,this._globalParameters.unpackAlignment),this.renderer.state.unpackAlignment=this._globalParameters.unpackAlignment),this.renderer.state.flipY!==this._globalParameters.flipY&&(this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,this._globalParameters.flipY),this.renderer.state.flipY=this._globalParameters.flipY),this.renderer.state.premultiplyAlpha!==this._globalParameters.premultiplyAlpha&&(this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this._globalParameters.premultiplyAlpha),this.renderer.state.premultiplyAlpha=this._globalParameters.premultiplyAlpha),this._globalParameters.floatingPoint==="half-float"?this.renderer._isWebGL2&&this.renderer.extensions.EXT_color_buffer_float?(this._globalParameters.internalFormat=this.gl.RGBA16F,this._globalParameters.type=this.gl.HALF_FLOAT):this.renderer.extensions.OES_texture_half_float?this._globalParameters.type=this.renderer.extensions.OES_texture_half_float.HALF_FLOAT_OES:this.renderer.production||S(this.type+": could not use half-float textures because the extension is not available"):this._globalParameters.floatingPoint==="float"&&(this.renderer._isWebGL2&&this.renderer.extensions.EXT_color_buffer_float?(this._globalParameters.internalFormat=this.gl.RGBA16F,this._globalParameters.type=this.gl.FLOAT):this.renderer.extensions.OES_texture_float?this._globalParameters.type=this.renderer.extensions.OES_texture_half_float.FLOAT:this.renderer.production||S(this.type+": could not use float textures because the extension is not available"))}_updateTexParameters(){this.index&&this.renderer.state.activeTexture!==this.index&&this._bindTexture(),this.parameters.wrapS!==this._state.wrapS&&(!this.renderer._isWebGL2&&(!pt(this._size.width)||!pt(this._size.height))&&(this.parameters.wrapS=this.gl.CLAMP_TO_EDGE),this.parameters.wrapS!==this.gl.REPEAT&&this.parameters.wrapS!==this.gl.CLAMP_TO_EDGE&&this.parameters.wrapS!==this.gl.MIRRORED_REPEAT&&(this.renderer.production||S(this.type+": Wrong wrapS value",this.parameters.wrapS,"for this texture:",this,`
gl.CLAMP_TO_EDGE wrapping will be used instead`),this.parameters.wrapS=this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.parameters.wrapS),this._state.wrapS=this.parameters.wrapS),this.parameters.wrapT!==this._state.wrapT&&(!this.renderer._isWebGL2&&(!pt(this._size.width)||!pt(this._size.height))&&(this.parameters.wrapT=this.gl.CLAMP_TO_EDGE),this.parameters.wrapT!==this.gl.REPEAT&&this.parameters.wrapT!==this.gl.CLAMP_TO_EDGE&&this.parameters.wrapT!==this.gl.MIRRORED_REPEAT&&(this.renderer.production||S(this.type+": Wrong wrapT value",this.parameters.wrapT,"for this texture:",this,`
gl.CLAMP_TO_EDGE wrapping will be used instead`),this.parameters.wrapT=this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.parameters.wrapT),this._state.wrapT=this.parameters.wrapT),this.parameters.generateMipmap&&!this._state.generateMipmap&&this.source&&(!this.renderer._isWebGL2&&(!pt(this._size.width)||!pt(this._size.height))?this.parameters.generateMipmap=!1:this.gl.generateMipmap(this.gl.TEXTURE_2D),this._state.generateMipmap=this.parameters.generateMipmap),this.parameters.minFilter!==this._state.minFilter&&(!this.renderer._isWebGL2&&(!pt(this._size.width)||!pt(this._size.height))&&(this.parameters.minFilter=this.gl.LINEAR),!this.parameters.generateMipmap&&this.parameters.generateMipmap!==null&&(this.parameters.minFilter=this.gl.LINEAR),this.parameters.minFilter!==this.gl.LINEAR&&this.parameters.minFilter!==this.gl.NEAREST&&this.parameters.minFilter!==this.gl.NEAREST_MIPMAP_NEAREST&&this.parameters.minFilter!==this.gl.LINEAR_MIPMAP_NEAREST&&this.parameters.minFilter!==this.gl.NEAREST_MIPMAP_LINEAR&&this.parameters.minFilter!==this.gl.LINEAR_MIPMAP_LINEAR&&(this.renderer.production||S(this.type+": Wrong minFilter value",this.parameters.minFilter,"for this texture:",this,`
gl.LINEAR filtering will be used instead`),this.parameters.minFilter=this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.parameters.minFilter),this._state.minFilter=this.parameters.minFilter),this.parameters.magFilter!==this._state.magFilter&&(!this.renderer._isWebGL2&&(!pt(this._size.width)||!pt(this._size.height))&&(this.parameters.magFilter=this.gl.LINEAR),this.parameters.magFilter!==this.gl.LINEAR&&this.parameters.magFilter!==this.gl.NEAREST&&(this.renderer.production||S(this.type+": Wrong magFilter value",this.parameters.magFilter,"for this texture:",this,`
gl.LINEAR filtering will be used instead`),this.parameters.magFilter=this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.parameters.magFilter),this._state.magFilter=this.parameters.magFilter);const t=this.renderer.extensions.EXT_texture_filter_anisotropic;if(t&&this.parameters.anisotropy!==this._state.anisotropy){const e=this.gl.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT);this.parameters.anisotropy=Math.max(1,Math.min(this.parameters.anisotropy,e)),this.gl.texParameterf(this.gl.TEXTURE_2D,t.TEXTURE_MAX_ANISOTROPY_EXT,this.parameters.anisotropy),this._state.anisotropy=this.parameters.anisotropy}}setWrapS(t){this.parameters.wrapS!==t&&(this.parameters.wrapS=t,this.parameters._shouldUpdate=!0)}setWrapT(t){this.parameters.wrapT!==t&&(this.parameters.wrapT=t,this.parameters._shouldUpdate=!0)}setMinFilter(t){this.parameters.minFilter!==t&&(this.parameters.minFilter=t,this.parameters._shouldUpdate=!0)}setMagFilter(t){this.parameters.magFilter!==t&&(this.parameters.magFilter=t,this.parameters._shouldUpdate=!0)}setAnisotropy(t){t=isNaN(t)?this.parameters.anisotropy:t,this.parameters.anisotropy!==t&&(this.parameters.anisotropy=t,this.parameters._shouldUpdate=!0)}needUpdate(){this._forceUpdate=!0}_videoFrameCallback(){this._willUpdate=!0,this.source.requestVideoFrameCallback(()=>this._videoFrameCallback())}_upload(){this._updateGlobalTexParameters(),this.source?this.gl.texImage2D(this.gl.TEXTURE_2D,0,this._globalParameters.internalFormat,this._globalParameters.format,this._globalParameters.type,this.source):this.sourceType==="fbo"&&this.gl.texImage2D(this.gl.TEXTURE_2D,0,this._globalParameters.internalFormat,this._size.width,this._size.height,0,this._globalParameters.format,this._globalParameters.type,this.source||null),this._uploaded||(this.renderer.nextRender.add(()=>this._onSourceUploadedCallback&&this._onSourceUploadedCallback()),this._uploaded=!0)}_getSizes(){if(this.sourceType==="fbo")return{parentWidth:this._parent._boundingRect.document.width,parentHeight:this._parent._boundingRect.document.height,sourceWidth:this._parent._boundingRect.document.width,sourceHeight:this._parent._boundingRect.document.height,xOffset:0,yOffset:0};const t=this._parent.scale?Ge.set(this._parent.scale.x,this._parent.scale.y):Ge.set(1,1),e=this._parent._boundingRect.document.width*t.x,i=this._parent._boundingRect.document.height*t.y,s=this._size.width,r=this._size.height,n=s/r,a=e/i;let h=0,o=0;return a>n?o=Math.min(0,i-e*(1/n)):a<n&&(h=Math.min(0,e-i*n)),{parentWidth:e,parentHeight:i,sourceWidth:s,sourceHeight:r,xOffset:h,yOffset:o}}setScale(t){if(!t.type||t.type!=="Vec2"){this.renderer.production||S(this.type+": Cannot set scale because the parameter passed is not of Vec2 type:",t);return}t.sanitizeNaNValuesWith(this.scale).max(Ge.set(.001,.001)),t.equals(this.scale)||(this.scale.copy(t),this.resize())}setOffset(t){if(!t.type||t.type!=="Vec2"){this.renderer.production||S(this.type+": Cannot set offset because the parameter passed is not of Vec2 type:",scale);return}t.sanitizeNaNValuesWith(this.offset),t.equals(this.offset)||(this.offset.copy(t),this.resize())}_setSize(){if(this._parent&&this._parent._program){const t=this._getSizes();this._updateTextureMatrix(t)}}resize(){this.sourceType==="fbo"?(this._size={width:this._parent._size&&this._parent._size.width||this._parent._boundingRect.document.width,height:this._parent._size&&this._parent._size.height||this._parent._boundingRect.document.height},this._copiedFrom||(this.gl.bindTexture(this.gl.TEXTURE_2D,this._sampler.texture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this._globalParameters.internalFormat,this._size.width,this._size.height,0,this._globalParameters.format,this._globalParameters.type,null))):this.source&&(this._size={width:this.source.naturalWidth||this.source.width||this.source.videoWidth,height:this.source.naturalHeight||this.source.height||this.source.videoHeight}),this._setSize()}_updateTextureMatrix(t){const e=fr.set(t.parentWidth/(t.parentWidth-t.xOffset),t.parentHeight/(t.parentHeight-t.yOffset),1);e.x/=this.scale.x,e.y/=this.scale.y,this._textureMatrix.matrix=pr.setFromArray([e.x,0,0,0,0,e.y,0,0,0,0,1,0,(1-e.x)/2+this.offset.x,(1-e.y)/2+this.offset.y,0,1]),this._updateMatrixUniform()}_updateMatrixUniform(){this._textureMatrix.isActive&&(this.renderer.useProgram(this._parent._program),this.gl.uniformMatrix4fv(this._textureMatrix.location,!1,this._textureMatrix.matrix.elements))}_onSourceLoaded(t){this.setSource(t),this.sourceType==="image"&&this.renderer.cache.addTexture(this)}_bindTexture(){this._canDraw&&(this.renderer.state.activeTexture!==this.index&&(this.gl.activeTexture(this.gl.TEXTURE0+this.index),this.renderer.state.activeTexture=this.index),this.gl.bindTexture(this.gl.TEXTURE_2D,this._sampler.texture),this._sampler.isTextureBound||(this._sampler.isTextureBound=!!this.gl.getParameter(this.gl.TEXTURE_BINDING_2D),this._sampler.isTextureBound&&this.renderer.needRender()))}_draw(){this._sampler.isActive&&(this._bindTexture(),this.sourceType==="video"&&this.source&&!this._videoFrameCallbackID&&this.source.readyState>=this.source.HAVE_CURRENT_DATA&&!this.source.paused&&(this._willUpdate=!0),(this._forceUpdate||this._willUpdate&&this.shouldUpdate)&&(this._state.generateMipmap=!1,this._upload()),this.sourceType==="video"&&(this._willUpdate=!1),this._forceUpdate=!1),this.parameters._shouldUpdate&&(this._updateTexParameters(),this.parameters._shouldUpdate=!1)}onSourceLoaded(t){return t&&(this._onSourceLoadedCallback=t),this}onSourceUploaded(t){return t&&(this._onSourceUploadedCallback=t),this}_dispose(t=!1){this.sourceType==="video"||this.sourceType==="image"&&!this.renderer.state.isActive?(this._loader&&this._loader._removeSource(this),this.source=null):this.sourceType==="canvas"&&(this.source.width=this.source.width,this.source=null),this._parent=null,this.gl&&!this._copiedFrom&&(t||this.sourceType!=="image"||!this.renderer.state.isActive)&&(this._canDraw=!1,this.renderer.cache.removeTexture(this),this.gl.activeTexture(this.gl.TEXTURE0+this.index),this.gl.bindTexture(this.gl.TEXTURE_2D,null),this.gl.deleteTexture(this._sampler.texture))}}class gr{constructor(t,e="anonymous"){if(this.type="TextureLoader",t=t&&t.renderer||t,!t||t.type!=="Renderer")Z(this.type+": Renderer not passed as first argument",t);else if(!t.gl){Z(this.type+": Renderer WebGL context is undefined",t);return}this.renderer=t,this.gl=this.renderer.gl,this.crossOrigin=e,this.elements=[]}_addElement(t,e,i,s){const r={source:t,texture:e,load:this._sourceLoaded.bind(this,t,e,i),error:this._sourceLoadError.bind(this,t,s)};return this.elements.push(r),r}_sourceLoadError(t,e,i){e&&e(t,i)}_sourceLoaded(t,e,i){e._sourceLoaded||(e._onSourceLoaded(t),this._parent&&(this._increment&&this._increment(),this.renderer.nextRender.add(()=>this._parent._onLoadingCallback&&this._parent._onLoadingCallback(e))),i&&i(e))}_getSourceType(t){let e;return typeof t=="string"?t.match(/\.(jpeg|jpg|jfif|pjpeg|pjp|gif|bmp|png|webp|svg|avif|apng)$/)!==null?e="image":t.match(/\.(webm|mp4|mpg|mpeg|avi|ogg|ogm|ogv|mov|av1)$/)!==null&&(e="video"):t.tagName.toUpperCase()==="IMG"?e="image":t.tagName.toUpperCase()==="VIDEO"?e="video":t.tagName.toUpperCase()==="CANVAS"&&(e="canvas"),e}_createImage(t){if(typeof t=="string"||!t.hasAttribute("crossOrigin")){const e=new Image;return e.crossOrigin=this.crossOrigin,typeof t=="string"?e.src=t:(e.src=t.src,t.hasAttribute("data-sampler")&&e.setAttribute("data-sampler",t.getAttribute("data-sampler"))),e}else return t}_createVideo(t){if(typeof t=="string"||t.getAttribute("crossOrigin")===null){const e=document.createElement("video");return e.crossOrigin=this.crossOrigin,typeof t=="string"?e.src=t:(e.src=t.src,t.hasAttribute("data-sampler")&&e.setAttribute("data-sampler",t.getAttribute("data-sampler"))),e}else return t}loadSource(t,e,i,s){switch(this._getSourceType(t)){case"image":this.loadImage(t,e,i,s);break;case"video":this.loadVideo(t,e,i,s);break;case"canvas":this.loadCanvas(t,e,i);break;default:this._sourceLoadError(t,s,"this source could not be converted into a texture: "+t);break}}loadSources(t,e,i,s){for(let r=0;r<t.length;r++)this.loadSource(t[r],e,i,s)}loadImage(t,e={},i,s){const r=this.renderer.cache.getTextureFromSource(t);let n=Object.assign({},e);if(this._parent&&(n=Object.assign(n,this._parent._texturesOptions)),n.loader=this,r){n.sampler=typeof t!="string"&&t.hasAttribute("data-sampler")?t.getAttribute("data-sampler"):n.sampler,n.fromTexture=r;const l=new le(this.renderer,n);this._sourceLoaded(r.source,l,i),this._parent&&this._addToParent(l,r.source,"image");return}const a=this._createImage(t);n.sampler=a.hasAttribute("data-sampler")?a.getAttribute("data-sampler"):n.sampler;const h=new le(this.renderer,n),o=this._addElement(a,h,i,s);a.complete?this._sourceLoaded(a,h,i):a.decode?a.decode().then(this._sourceLoaded.bind(this,a,h,i)).catch(()=>{a.addEventListener("load",o.load,!1),a.addEventListener("error",o.error,!1)}):(a.addEventListener("load",o.load,!1),a.addEventListener("error",o.error,!1)),this._parent&&this._addToParent(h,a,"image")}loadImages(t,e,i,s){for(let r=0;r<t.length;r++)this.loadImage(t[r],e,i,s)}loadVideo(t,e={},i,s){const r=this._createVideo(t);r.preload=!0,r.muted=!0,r.loop=!0,r.setAttribute("playsinline",""),r.crossOrigin=this.crossOrigin;let n=Object.assign({},e);this._parent&&(n=Object.assign(e,this._parent._texturesOptions)),n.loader=this,n.sampler=r.hasAttribute("data-sampler")?r.getAttribute("data-sampler"):n.sampler;const a=new le(this.renderer,n),h=this._addElement(r,a,i,s);r.addEventListener("canplaythrough",h.load,!1),r.addEventListener("error",h.error,!1),r.readyState>=r.HAVE_FUTURE_DATA&&i&&this._sourceLoaded(r,a,i),r.load(),this._addToParent&&this._addToParent(a,r,"video"),"requestVideoFrameCallback"in HTMLVideoElement.prototype&&(h.videoFrameCallback=a._videoFrameCallback.bind(a),a._videoFrameCallbackID=r.requestVideoFrameCallback(h.videoFrameCallback))}loadVideos(t,e,i,s){for(let r=0;r<t.length;r++)this.loadVideo(t[r],e,i,s)}loadCanvas(t,e={},i){let s=Object.assign({},e);this._parent&&(s=Object.assign(e,this._parent._texturesOptions)),s.loader=this,s.sampler=t.hasAttribute("data-sampler")?t.getAttribute("data-sampler"):s.sampler;const r=new le(this.renderer,s);this._addElement(t,r,i,null),this._sourceLoaded(t,r,i),this._parent&&this._addToParent(r,t,"canvas")}loadCanvases(t,e,i){for(let s=0;s<t.length;s++)this.loadCanvas(t[s],e,i)}_removeSource(t){const e=this.elements.find(i=>i.texture.uuid===t.uuid);e&&(t.sourceType==="image"?e.source.removeEventListener("load",e.load,!1):t.sourceType==="video"&&(e.videoFrameCallback&&t._videoFrameCallbackID&&e.source.cancelVideoFrameCallback(t._videoFrameCallbackID),e.source.removeEventListener("canplaythrough",e.load,!1),e.source.pause(),e.source.removeAttribute("src"),e.source.load()),e.source.removeEventListener("error",e.error,!1))}}class mr extends gr{constructor(t,e,{sourcesLoaded:i=0,sourcesToLoad:s=0,complete:r=!1,onComplete:n=()=>{}}={}){super(t,e.crossOrigin),this.type="PlaneTextureLoader",this._parent=e,this._parent.type!=="Plane"&&this._parent.type!=="PingPongPlane"&&this._parent.type!=="ShaderPass"&&(S(this.type+": Wrong parent type assigned to this loader"),this._parent=null),this.sourcesLoaded=i,this.sourcesToLoad=s,this.complete=r,this.onComplete=n}_setLoaderSize(t){this.sourcesToLoad=t,this.sourcesToLoad===0&&(this.complete=!0,this.renderer.nextRender.add(()=>this.onComplete&&this.onComplete()))}_increment(){this.sourcesLoaded++,this.sourcesLoaded>=this.sourcesToLoad&&!this.complete&&(this.complete=!0,this.renderer.nextRender.add(()=>this.onComplete&&this.onComplete()))}_addSourceToParent(t,e){if(e==="image"){const i=this._parent.images;!i.find(r=>r.src===t.src)&&i.push(t)}else if(e==="video"){const i=this._parent.videos;!i.find(r=>r.src===t.src)&&i.push(t)}else if(e==="canvas"){const i=this._parent.canvases;!i.find(r=>r.isSameNode(t))&&i.push(t)}}_addToParent(t,e,i){this._addSourceToParent(e,i),this._parent&&t.addParent(this._parent)}}class xr{constructor(t,e="Mesh",{vertexShaderID:i,fragmentShaderID:s,vertexShader:r,fragmentShader:n,uniforms:a={},widthSegments:h=1,heightSegments:o=1,renderOrder:l=0,depthTest:d=!0,cullFace:_="back",texturesOptions:f={},crossOrigin:p="anonymous"}={}){if(this.type=e,t=t&&t.renderer||t,(!t||t.type!=="Renderer")&&(Z(this.type+": Curtains not passed as first argument or Curtains Renderer is missing",t),setTimeout(()=>{this._onErrorCallback&&this._onErrorCallback()},0)),this.renderer=t,this.gl=this.renderer.gl,!this.gl){this.renderer.production||Z(this.type+": Unable to create a "+this.type+" because the Renderer WebGL context is not defined"),setTimeout(()=>{this._onErrorCallback&&this._onErrorCallback()},0);return}this._canDraw=!1,this.renderOrder=l,this._depthTest=d,this.cullFace=_,this.cullFace!=="back"&&this.cullFace!=="front"&&this.cullFace!=="none"&&(this.cullFace="back"),this.textures=[],this._texturesOptions=Object.assign({premultiplyAlpha:!1,anisotropy:1,floatingPoint:"none",wrapS:this.gl.CLAMP_TO_EDGE,wrapT:this.gl.CLAMP_TO_EDGE,minFilter:this.gl.LINEAR,magFilter:this.gl.LINEAR},f),this.crossOrigin=p,!r&&i&&document.getElementById(i)&&(r=document.getElementById(i).innerHTML),!n&&s&&document.getElementById(s)&&(n=document.getElementById(s).innerHTML),this._initMesh(),h=parseInt(h),o=parseInt(o),this._geometry=new _r(this.renderer,{width:h,height:o}),this._program=new Fi(this.renderer,{parent:this,vertexShader:r,fragmentShader:n}),this._program.compiled?(this._program.createUniforms(a),this.uniforms=this._program.uniformsManager.uniforms,this._geometry.setProgram(this._program),this.renderer.onSceneChange()):this.renderer.nextRender.add(()=>this._onErrorCallback&&this._onErrorCallback())}_initMesh(){this.uuid=Oi(),this.loader=new mr(this.renderer,this,{sourcesLoaded:0,initSourcesToLoad:0,complete:!1,onComplete:()=>{this._onReadyCallback&&this._onReadyCallback(),this.renderer.needRender()}}),this.images=[],this.videos=[],this.canvases=[],this.userData={},this._canDraw=!0}_restoreContext(){this._canDraw=!1,this._matrices&&(this._matrices=null),this._program=new Fi(this.renderer,{parent:this,vertexShader:this._program.vsCode,fragmentShader:this._program.fsCode}),this._program.compiled&&(this._geometry.restoreContext(this._program),this._program.createUniforms(this.uniforms),this.uniforms=this._program.uniformsManager.uniforms,this._programRestored())}setRenderTarget(t){if(!t||t.type!=="RenderTarget"){this.renderer.production||S(this.type+": Could not set the render target because the argument passed is not a RenderTarget class object",t);return}this.type==="Plane"&&this.renderer.scene.removePlane(this),this.target=t,this.type==="Plane"&&this.renderer.scene.addPlane(this)}setRenderOrder(t=0){t=isNaN(t)?this.renderOrder:parseInt(t),t!==this.renderOrder&&(this.renderOrder=t,this.renderer.scene.setPlaneRenderOrder(this))}createTexture(t={}){const e=new le(this.renderer,Object.assign(t,this._texturesOptions));return e.addParent(this),e}addTexture(t){if(!t||t.type!=="Texture"){this.renderer.production||S(this.type+": cannot add ",t," to this "+this.type+" because it is not a valid texture");return}t.addParent(this)}loadSources(t,e={},i,s){for(let r=0;r<t.length;r++)this.loadSource(t[r],e,i,s)}loadSource(t,e={},i,s){this.loader.loadSource(t,Object.assign(e,this._texturesOptions),r=>{i&&i(r)},(r,n)=>{this.renderer.production||S(this.type+": this HTML tag could not be converted into a texture:",r.tagName),s&&s(r,n)})}loadImage(t,e={},i,s){this.loader.loadImage(t,Object.assign(e,this._texturesOptions),r=>{i&&i(r)},(r,n)=>{this.renderer.production||S(this.type+`: There has been an error:
`,n,`
while loading this image:
`,r),s&&s(r,n)})}loadVideo(t,e={},i,s){this.loader.loadVideo(t,Object.assign(e,this._texturesOptions),r=>{i&&i(r)},(r,n)=>{this.renderer.production||S(this.type+`: There has been an error:
`,n,`
while loading this video:
`,r),s&&s(r,n)})}loadCanvas(t,e={},i){this.loader.loadCanvas(t,Object.assign(e,this._texturesOptions),s=>{i&&i(s)})}loadImages(t,e={},i,s){for(let r=0;r<t.length;r++)this.loadImage(t[r],e,i,s)}loadVideos(t,e={},i,s){for(let r=0;r<t.length;r++)this.loadVideo(t[r],e,i,s)}loadCanvases(t,e={},i){for(let s=0;s<t.length;s++)this.loadCanvas(t[s],e,i)}playVideos(){for(let t=0;t<this.textures.length;t++){const e=this.textures[t];if(e.sourceType==="video"){const i=e.source.play();i!==void 0&&i.catch(s=>{this.renderer.production||S(this.type+": Could not play the video : ",s)})}}}_draw(){this.renderer.setDepthTest(this._depthTest),this.renderer.setFaceCulling(this.cullFace),this._program.updateUniforms(),this._geometry.bindBuffers(),this.renderer.state.forceBufferUpdate=!1;for(let t=0;t<this.textures.length;t++)if(this.textures[t]._draw(),this.textures[t]._sampler.isActive&&!this.textures[t]._sampler.isTextureBound)return;this._geometry.draw(),this.renderer.state.activeTexture=null,this._onAfterRenderCallback&&this._onAfterRenderCallback()}onError(t){return t&&(this._onErrorCallback=t),this}onLoading(t){return t&&(this._onLoadingCallback=t),this}onReady(t){return t&&(this._onReadyCallback=t),this}onRender(t){return t&&(this._onRenderCallback=t),this}onAfterRender(t){return t&&(this._onAfterRenderCallback=t),this}remove(){this._canDraw=!1,this.target&&this.renderer.bindFrameBuffer(null),this._dispose(),this.type==="Plane"?this.renderer.removePlane(this):this.type==="ShaderPass"&&(this.target&&(this.target._shaderPass=null,this.target.remove(),this.target=null),this.renderer.removeShaderPass(this))}_dispose(){if(this.gl){this._geometry&&this._geometry.dispose(),this.target&&this.type==="ShaderPass"&&(this.renderer.removeRenderTarget(this.target),this.textures.shift());for(let t=0;t<this.textures.length;t++)this.textures[t]._dispose();this.textures=[]}}}const zi=new Tt,yr=new Tt;class br extends xr{constructor(t,e,i="DOMMesh",{widthSegments:s,heightSegments:r,renderOrder:n,depthTest:a,cullFace:h,uniforms:o,vertexShaderID:l,fragmentShaderID:d,vertexShader:_,fragmentShader:f,texturesOptions:p,crossOrigin:c}={}){l=l||e&&e.getAttribute("data-vs-id"),d=d||e&&e.getAttribute("data-fs-id"),super(t,i,{widthSegments:s,heightSegments:r,renderOrder:n,depthTest:a,cullFace:h,uniforms:o,vertexShaderID:l,fragmentShaderID:d,vertexShader:_,fragmentShader:f,texturesOptions:p,crossOrigin:c}),this.gl&&(this.htmlElement=e,(!this.htmlElement||this.htmlElement.length===0)&&(this.renderer.production||S(this.type+": The HTML element you specified does not currently exists in the DOM")),this._setDocumentSizes())}_setDocumentSizes(){let t=this.htmlElement.getBoundingClientRect();this._boundingRect||(this._boundingRect={}),this._boundingRect.document={width:t.width*this.renderer.pixelRatio,height:t.height*this.renderer.pixelRatio,top:t.top*this.renderer.pixelRatio,left:t.left*this.renderer.pixelRatio}}getBoundingRect(){return{width:this._boundingRect.document.width,height:this._boundingRect.document.height,top:this._boundingRect.document.top,left:this._boundingRect.document.left,right:this._boundingRect.document.left+this._boundingRect.document.width,bottom:this._boundingRect.document.top+this._boundingRect.document.height}}resize(){this._setDocumentSizes(),this.type==="Plane"&&(this.setPerspective(this.camera.fov,this.camera.near,this.camera.far),this._setWorldSizes(),this._applyWorldPositions());for(let t=0;t<this.textures.length;t++)this.textures[t].resize();this.renderer.nextRender.add(()=>this._onAfterResizeCallback&&this._onAfterResizeCallback())}mouseToPlaneCoords(t){const e=this.scale?this.scale:yr.set(1,1),i=zi.set((this._boundingRect.document.width-this._boundingRect.document.width*e.x)/2,(this._boundingRect.document.height-this._boundingRect.document.height*e.y)/2),s={width:this._boundingRect.document.width*e.x/this.renderer.pixelRatio,height:this._boundingRect.document.height*e.y/this.renderer.pixelRatio,top:(this._boundingRect.document.top+i.y)/this.renderer.pixelRatio,left:(this._boundingRect.document.left+i.x)/this.renderer.pixelRatio};return zi.set((t.x-s.left)/s.width*2-1,1-(t.y-s.top)/s.height*2)}onAfterResize(t){return t&&(this._onAfterResizeCallback=t),this}}class vr{constructor({fov:t=50,near:e=.1,far:i=150,width:s,height:r,pixelRatio:n=1}={}){this.position=new I,this.projectionMatrix=new gt,this.worldMatrix=new gt,this.viewMatrix=new gt,this._shouldUpdate=!1,this.setSize(),this.setPerspective(t,e,i,s,r,n)}setFov(t){t=isNaN(t)?this.fov:parseFloat(t),t=Math.max(1,Math.min(t,179)),t!==this.fov&&(this.fov=t,this.setPosition(),this._shouldUpdate=!0),this.setCSSPerspective()}setNear(t){t=isNaN(t)?this.near:parseFloat(t),t=Math.max(t,.01),t!==this.near&&(this.near=t,this._shouldUpdate=!0)}setFar(t){t=isNaN(t)?this.far:parseFloat(t),t=Math.max(t,50),t!==this.far&&(this.far=t,this._shouldUpdate=!0)}setPixelRatio(t){t!==this.pixelRatio&&(this._shouldUpdate=!0),this.pixelRatio=t}setSize(t,e){(t!==this.width||e!==this.height)&&(this._shouldUpdate=!0),this.width=t,this.height=e}setPerspective(t,e,i,s,r,n){this.setPixelRatio(n),this.setSize(s,r),this.setFov(t),this.setNear(e),this.setFar(i),this._shouldUpdate&&this.updateProjectionMatrix()}setPosition(){this.position.set(0,0,1),this.worldMatrix.setFromArray([1,0,0,0,0,1,0,0,0,0,1,0,this.position.x,this.position.y,this.position.z,1]),this.viewMatrix=this.viewMatrix.copy(this.worldMatrix).getInverse()}setCSSPerspective(){this.CSSPerspective=Math.pow(Math.pow(this.width/(2*this.pixelRatio),2)+Math.pow(this.height/(2*this.pixelRatio),2),.5)/Math.tan(this.fov*.5*Math.PI/180)}getScreenRatiosFromFov(t=0){const e=this.position.z;t<e?t-=e:t+=e;const i=this.fov*Math.PI/180,s=2*Math.tan(i/2)*Math.abs(t);return{width:s*this.width/this.height,height:s}}updateProjectionMatrix(){const t=this.width/this.height,e=this.near*Math.tan(Math.PI/180*.5*this.fov),i=2*e,s=t*i,r=-.5*s,n=r+s,a=e-i,h=2*this.near/(n-r),o=2*this.near/(e-a),l=(n+r)/(n-r),d=(e+a)/(e-a),_=-(this.far+this.near)/(this.far-this.near),f=-2*this.far*this.near/(this.far-this.near);this.projectionMatrix.setFromArray([h,0,0,0,0,o,0,0,l,d,_,-1,0,0,f,0])}forceUpdate(){this._shouldUpdate=!0}cancelUpdate(){this._shouldUpdate=!1}}class Me{constructor(t=new Float32Array([0,0,0,1]),e="XYZ"){this.type="Quat",this.elements=t,this.axisOrder=e}setFromArray(t){return this.elements[0]=t[0],this.elements[1]=t[1],this.elements[2]=t[2],this.elements[3]=t[3],this}setAxisOrder(t){switch(t=t.toUpperCase(),t){case"XYZ":case"YXZ":case"ZXY":case"ZYX":case"YZX":case"XZY":this.axisOrder=t;break;default:this.axisOrder="XYZ"}return this}copy(t){return this.elements=t.elements,this.axisOrder=t.axisOrder,this}clone(){return new Me().copy(this)}equals(t){return this.elements[0]===t.elements[0]&&this.elements[1]===t.elements[1]&&this.elements[2]===t.elements[2]&&this.elements[3]===t.elements[3]&&this.axisOrder===t.axisOrder}setFromVec3(t){const e=t.x*.5,i=t.y*.5,s=t.z*.5,r=Math.cos(e),n=Math.cos(i),a=Math.cos(s),h=Math.sin(e),o=Math.sin(i),l=Math.sin(s);return this.axisOrder==="XYZ"?(this.elements[0]=h*n*a+r*o*l,this.elements[1]=r*o*a-h*n*l,this.elements[2]=r*n*l+h*o*a,this.elements[3]=r*n*a-h*o*l):this.axisOrder==="YXZ"?(this.elements[0]=h*n*a+r*o*l,this.elements[1]=r*o*a-h*n*l,this.elements[2]=r*n*l-h*o*a,this.elements[3]=r*n*a+h*o*l):this.axisOrder==="ZXY"?(this.elements[0]=h*n*a-r*o*l,this.elements[1]=r*o*a+h*n*l,this.elements[2]=r*n*l+h*o*a,this.elements[3]=r*n*a-h*o*l):this.axisOrder==="ZYX"?(this.elements[0]=h*n*a-r*o*l,this.elements[1]=r*o*a+h*n*l,this.elements[2]=r*n*l-h*o*a,this.elements[3]=r*n*a+h*o*l):this.axisOrder==="YZX"?(this.elements[0]=h*n*a+r*o*l,this.elements[1]=r*o*a+h*n*l,this.elements[2]=r*n*l-h*o*a,this.elements[3]=r*n*a-h*o*l):this.axisOrder==="XZY"&&(this.elements[0]=h*n*a-r*o*l,this.elements[1]=r*o*a-h*n*l,this.elements[2]=r*n*l+h*o*a,this.elements[3]=r*n*a+h*o*l),this}}const Tr=new Tt,wr=new I,Pr=new I,Rr=new I,Sr=new I,Mr=new I,Er=new I,lt=new I,ut=new I,Li=new Me,Cr=new I(.5,.5,0),Ar=new I,Or=new I,kr=new I,Dr=new I,Fr=new Tt;class zr extends br{constructor(t,e,{widthSegments:i,heightSegments:s,renderOrder:r,depthTest:n,cullFace:a,uniforms:h,vertexShaderID:o,fragmentShaderID:l,vertexShader:d,fragmentShader:_,texturesOptions:f,crossOrigin:p,alwaysDraw:c=!1,visible:g=!0,transparent:x=!1,drawCheckMargins:m={top:0,right:0,bottom:0,left:0},autoloadSources:b=!0,watchScroll:v=!0,fov:y=50}={}){super(t,e,"Plane",{widthSegments:i,heightSegments:s,renderOrder:r,depthTest:n,cullFace:a,uniforms:h,vertexShaderID:o,fragmentShaderID:l,vertexShader:d,fragmentShader:_,texturesOptions:f,crossOrigin:p}),this.gl&&(this.index=this.renderer.planes.length,this.target=null,this.alwaysDraw=c,this._shouldDraw=!0,this.visible=g,this._transparent=x,this.drawCheckMargins=m,this.autoloadSources=b,this.watchScroll=v,this._updateMVMatrix=!1,this.camera=new vr({fov:y,width:this.renderer._boundingRect.width,height:this.renderer._boundingRect.height,pixelRatio:this.renderer.pixelRatio}),this._program.compiled&&(this._initPlane(),this.renderer.scene.addPlane(this),this.renderer.planes.push(this)))}_programRestored(){this.target&&this.setRenderTarget(this.renderer.renderTargets[this.target.index]),this._initMatrices(),this.setPerspective(this.camera.fov,this.camera.near,this.camera.far),this._setWorldSizes(),this._applyWorldPositions(),this.renderer.scene.addPlane(this);for(let t=0;t<this.textures.length;t++)this.textures[t]._parent=this,this.textures[t]._restoreContext();this._canDraw=!0}_initPlane(){this._initTransformValues(),this._initPositions(),this.setPerspective(this.camera.fov,this.camera.near,this.camera.far),this._initSources()}_initTransformValues(){this.rotation=new I,this.rotation.onChange(()=>this._applyRotation()),this.quaternion=new Me,this.relativeTranslation=new I,this.relativeTranslation.onChange(()=>this._setTranslation()),this._translation=new I,this.scale=new I(1),this.scale.onChange(()=>{this.scale.z=1,this._applyScale()}),this.transformOrigin=new I(.5,.5,0),this.transformOrigin.onChange(()=>{this._setWorldTransformOrigin(),this._updateMVMatrix=!0})}resetPlane(t){this._initTransformValues(),this._setWorldTransformOrigin(),t!==null&&t?(this.htmlElement=t,this.resize()):!t&&!this.renderer.production&&S(this.type+": You are trying to reset a plane with a HTML element that does not exist. The old HTML element will be kept instead.")}removeRenderTarget(){this.target&&(this.renderer.scene.removePlane(this),this.target=null,this.renderer.scene.addPlane(this))}_initPositions(){this._initMatrices(),this._setWorldSizes(),this._applyWorldPositions()}_initMatrices(){const t=new gt;this._matrices={world:{matrix:t},modelView:{name:"uMVMatrix",matrix:t,location:this.gl.getUniformLocation(this._program.program,"uMVMatrix")},projection:{name:"uPMatrix",matrix:t,location:this.gl.getUniformLocation(this._program.program,"uPMatrix")},modelViewProjection:{matrix:t}}}_setPerspectiveMatrix(){this.camera._shouldUpdate&&(this.renderer.useProgram(this._program),this.gl.uniformMatrix4fv(this._matrices.projection.location,!1,this._matrices.projection.matrix.elements)),this.camera.cancelUpdate()}setPerspective(t,e,i){this.camera.setPerspective(t,e,i,this.renderer._boundingRect.width,this.renderer._boundingRect.height,this.renderer.pixelRatio),this.renderer.state.isContextLost&&this.camera.forceUpdate(),this._matrices.projection.matrix=this.camera.projectionMatrix,this.camera._shouldUpdate&&(this._setWorldSizes(),this._applyWorldPositions(),this._translation.z=this.relativeTranslation.z/this.camera.CSSPerspective),this._updateMVMatrix=this.camera._shouldUpdate}_setMVMatrix(){this._updateMVMatrix&&(this._matrices.world.matrix=this._matrices.world.matrix.composeFromOrigin(this._translation,this.quaternion,this.scale,this._boundingRect.world.transformOrigin),this._matrices.world.matrix.scale({x:this._boundingRect.world.width,y:this._boundingRect.world.height,z:1}),this._matrices.modelView.matrix.copy(this._matrices.world.matrix),this._matrices.modelView.matrix.elements[14]-=this.camera.position.z,this._matrices.modelViewProjection.matrix=this._matrices.projection.matrix.multiply(this._matrices.modelView.matrix),this.alwaysDraw||this._shouldDrawCheck(),this.renderer.useProgram(this._program),this.gl.uniformMatrix4fv(this._matrices.modelView.location,!1,this._matrices.modelView.matrix.elements)),this._updateMVMatrix=!1}_setWorldTransformOrigin(){this._boundingRect.world.transformOrigin=new I((this.transformOrigin.x*2-1)*this._boundingRect.world.width,-(this.transformOrigin.y*2-1)*this._boundingRect.world.height,this.transformOrigin.z)}_documentToWorldSpace(t){return Pr.set(t.x*this.renderer.pixelRatio/this.renderer._boundingRect.width*this._boundingRect.world.ratios.width,-(t.y*this.renderer.pixelRatio/this.renderer._boundingRect.height)*this._boundingRect.world.ratios.height,t.z)}_setWorldSizes(){const t=this.camera.getScreenRatiosFromFov();this._boundingRect.world={width:this._boundingRect.document.width/this.renderer._boundingRect.width*t.width/2,height:this._boundingRect.document.height/this.renderer._boundingRect.height*t.height/2,ratios:t},this._setWorldTransformOrigin()}_setWorldPosition(){const t={x:this._boundingRect.document.width/2+this._boundingRect.document.left,y:this._boundingRect.document.height/2+this._boundingRect.document.top},e={x:this.renderer._boundingRect.width/2+this.renderer._boundingRect.left,y:this.renderer._boundingRect.height/2+this.renderer._boundingRect.top};this._boundingRect.world.top=(e.y-t.y)/this.renderer._boundingRect.height*this._boundingRect.world.ratios.height,this._boundingRect.world.left=(t.x-e.x)/this.renderer._boundingRect.width*this._boundingRect.world.ratios.width}setScale(t){if(!t.type||t.type!=="Vec2"){this.renderer.production||S(this.type+": Cannot set scale because the parameter passed is not of Vec2 type:",t);return}t.sanitizeNaNValuesWith(this.scale).max(Tr.set(.001,.001)),(t.x!==this.scale.x||t.y!==this.scale.y)&&(this.scale.set(t.x,t.y,1),this._applyScale())}_applyScale(){for(let t=0;t<this.textures.length;t++)this.textures[t].resize();this._updateMVMatrix=!0}setRotation(t){if(!t.type||t.type!=="Vec3"){this.renderer.production||S(this.type+": Cannot set rotation because the parameter passed is not of Vec3 type:",t);return}t.sanitizeNaNValuesWith(this.rotation),t.equals(this.rotation)||(this.rotation.copy(t),this._applyRotation())}_applyRotation(){this.quaternion.setFromVec3(this.rotation),this._updateMVMatrix=!0}setTransformOrigin(t){if(!t.type||t.type!=="Vec3"){this.renderer.production||S(this.type+": Cannot set transform origin because the parameter passed is not of Vec3 type:",t);return}t.sanitizeNaNValuesWith(this.transformOrigin),t.equals(this.transformOrigin)||(this.transformOrigin.copy(t),this._setWorldTransformOrigin(),this._updateMVMatrix=!0)}_setTranslation(){let t=wr.set(0,0,0);this.relativeTranslation.equals(t)||(t=this._documentToWorldSpace(this.relativeTranslation)),this._translation.set(this._boundingRect.world.left+t.x,this._boundingRect.world.top+t.y,this.relativeTranslation.z/this.camera.CSSPerspective),this._updateMVMatrix=!0}setRelativeTranslation(t){if(!t.type||t.type!=="Vec3"){this.renderer.production||S(this.type+": Cannot set translation because the parameter passed is not of Vec3 type:",t);return}t.sanitizeNaNValuesWith(this.relativeTranslation),t.equals(this.relativeTranslation)||(this.relativeTranslation.copy(t),this._setTranslation())}_applyWorldPositions(){this._setWorldPosition(),this._setTranslation()}updatePosition(){this._setDocumentSizes(),this._applyWorldPositions()}updateScrollPosition(t,e){(t||e)&&(this._boundingRect.document.top+=e*this.renderer.pixelRatio,this._boundingRect.document.left+=t*this.renderer.pixelRatio,this._applyWorldPositions())}_getIntersection(t,e){let i=e.clone().sub(t),s=t.clone();for(;s.z>-1;)s.add(i);return s}_getNearPlaneIntersections(t,e,i){const s=this._matrices.modelViewProjection.matrix;if(i.length===1)i[0]===0?(e[0]=this._getIntersection(e[1],lt.set(.95,1,0).applyMat4(s)),e.push(this._getIntersection(e[3],ut.set(-1,-.95,0).applyMat4(s)))):i[0]===1?(e[1]=this._getIntersection(e[0],lt.set(-.95,1,0).applyMat4(s)),e.push(this._getIntersection(e[2],ut.set(1,-.95,0).applyMat4(s)))):i[0]===2?(e[2]=this._getIntersection(e[3],lt.set(-.95,-1,0).applyMat4(s)),e.push(this._getIntersection(e[1],ut.set(1,.95,0).applyMat4(s)))):i[0]===3&&(e[3]=this._getIntersection(e[2],lt.set(.95,-1,0).applyMat4(s)),e.push(this._getIntersection(e[0],ut.set(-1,.95,0).applyMat4(s))));else if(i.length===2)i[0]===0&&i[1]===1?(e[0]=this._getIntersection(e[3],lt.set(-1,-.95,0).applyMat4(s)),e[1]=this._getIntersection(e[2],ut.set(1,-.95,0).applyMat4(s))):i[0]===1&&i[1]===2?(e[1]=this._getIntersection(e[0],lt.set(-.95,1,0).applyMat4(s)),e[2]=this._getIntersection(e[3],ut.set(-.95,-1,0).applyMat4(s))):i[0]===2&&i[1]===3?(e[2]=this._getIntersection(e[1],lt.set(1,.95,0).applyMat4(s)),e[3]=this._getIntersection(e[0],ut.set(-1,.95,0).applyMat4(s))):i[0]===0&&i[1]===3&&(e[0]=this._getIntersection(e[1],lt.set(.95,1,0).applyMat4(s)),e[3]=this._getIntersection(e[2],ut.set(.95,-1,0).applyMat4(s)));else if(i.length===3){let r=0;for(let n=0;n<t.length;n++)i.includes(n)||(r=n);e=[e[r]],r===0?(e.push(this._getIntersection(e[0],lt.set(-.95,1,0).applyMat4(s))),e.push(this._getIntersection(e[0],ut.set(-1,.95,0).applyMat4(s)))):r===1?(e.push(this._getIntersection(e[0],lt.set(.95,1,0).applyMat4(s))),e.push(this._getIntersection(e[0],ut.set(1,.95,0).applyMat4(s)))):r===2?(e.push(this._getIntersection(e[0],lt.set(.95,-1,0).applyMat4(s))),e.push(this._getIntersection(e[0],ut.set(1,-.95,0).applyMat4(s)))):r===3&&(e.push(this._getIntersection(e[0],lt.set(-.95,-1,0).applyMat4(s))),e.push(this._getIntersection(e[0],ut.set(-1-.95,0).applyMat4(s))))}else for(let r=0;r<t.length;r++)e[r][0]=1e4,e[r][1]=1e4;return e}_getWorldCoords(){const t=[Rr.set(-1,1,0),Sr.set(1,1,0),Mr.set(1,-1,0),Er.set(-1,-1,0)];let e=[],i=[];for(let h=0;h<t.length;h++){const o=t[h].applyMat4(this._matrices.modelViewProjection.matrix);e.push(o),Math.abs(o.z)>1&&i.push(h)}i.length&&(e=this._getNearPlaneIntersections(t,e,i));let s=1/0,r=-1/0,n=1/0,a=-1/0;for(let h=0;h<e.length;h++){const o=e[h];o.x<s&&(s=o.x),o.x>r&&(r=o.x),o.y<n&&(n=o.y),o.y>a&&(a=o.y)}return{top:a,right:r,bottom:n,left:s}}_computeWebGLBoundingRect(){const t=this._getWorldCoords();let e={top:1-(t.top+1)/2,right:(t.right+1)/2,bottom:1-(t.bottom+1)/2,left:(t.left+1)/2};e.width=e.right-e.left,e.height=e.bottom-e.top,this._boundingRect.worldToDocument={width:e.width*this.renderer._boundingRect.width,height:e.height*this.renderer._boundingRect.height,top:e.top*this.renderer._boundingRect.height+this.renderer._boundingRect.top,left:e.left*this.renderer._boundingRect.width+this.renderer._boundingRect.left,right:e.left*this.renderer._boundingRect.width+this.renderer._boundingRect.left+e.width*this.renderer._boundingRect.width,bottom:e.top*this.renderer._boundingRect.height+this.renderer._boundingRect.top+e.height*this.renderer._boundingRect.height}}getWebGLBoundingRect(){if(this._matrices.modelViewProjection)(!this._boundingRect.worldToDocument||this.alwaysDraw)&&this._computeWebGLBoundingRect();else return this._boundingRect.document;return this._boundingRect.worldToDocument}_getWebGLDrawRect(){return this._computeWebGLBoundingRect(),{top:this._boundingRect.worldToDocument.top-this.drawCheckMargins.top,right:this._boundingRect.worldToDocument.right+this.drawCheckMargins.right,bottom:this._boundingRect.worldToDocument.bottom+this.drawCheckMargins.bottom,left:this._boundingRect.worldToDocument.left-this.drawCheckMargins.left}}_shouldDrawCheck(){const t=this._getWebGLDrawRect();Math.round(t.right)<=this.renderer._boundingRect.left||Math.round(t.left)>=this.renderer._boundingRect.left+this.renderer._boundingRect.width||Math.round(t.bottom)<=this.renderer._boundingRect.top||Math.round(t.top)>=this.renderer._boundingRect.top+this.renderer._boundingRect.height?this._shouldDraw&&(this._shouldDraw=!1,this.renderer.nextRender.add(()=>this._onLeaveViewCallback&&this._onLeaveViewCallback())):(this._shouldDraw||this.renderer.nextRender.add(()=>this._onReEnterViewCallback&&this._onReEnterViewCallback()),this._shouldDraw=!0)}isDrawn(){return this._canDraw&&this.visible&&(this._shouldDraw||this.alwaysDraw)}enableDepthTest(t){this._depthTest=t}_initSources(){let t=0;if(this.autoloadSources){const e=this.htmlElement.getElementsByTagName("img"),i=this.htmlElement.getElementsByTagName("video"),s=this.htmlElement.getElementsByTagName("canvas");e.length&&this.loadImages(e),i.length&&this.loadVideos(i),s.length&&this.loadCanvases(s),t=e.length+i.length+s.length}this.loader._setLoaderSize(t),this._canDraw=!0}_startDrawing(){this._canDraw&&(this._onRenderCallback&&this._onRenderCallback(),this.target?this.renderer.bindFrameBuffer(this.target):this.renderer.state.scenePassIndex===null&&this.renderer.bindFrameBuffer(null),this._setPerspectiveMatrix(),this._setMVMatrix(),(this.alwaysDraw||this._shouldDraw)&&this.visible&&this._draw())}mouseToPlaneCoords(t){if(Li.setAxisOrder(this.quaternion.axisOrder),Li.equals(this.quaternion)&&Cr.equals(this.transformOrigin))return super.mouseToPlaneCoords(t);{const e={x:2*(t.x/(this.renderer._boundingRect.width/this.renderer.pixelRatio))-1,y:2*(1-t.y/(this.renderer._boundingRect.height/this.renderer.pixelRatio))-1},i=this.camera.position.clone(),s=Ar.set(e.x,e.y,-.5);s.unproject(this.camera),s.sub(i).normalize();const r=Or.set(0,0,-1);r.applyQuat(this.quaternion).normalize();const n=Dr.set(0,0,0),a=r.dot(s);if(Math.abs(a)>=1e-4){const h=this._matrices.world.matrix.getInverse().multiply(this.camera.viewMatrix),o=this._boundingRect.world.transformOrigin.clone().add(this._translation),l=kr.set(this._translation.x-o.x,this._translation.y-o.y,this._translation.z-o.z);l.applyQuat(this.quaternion),o.add(l);const d=r.dot(o.clone().sub(i))/a;n.copy(i.add(s.multiplyScalar(d))),n.applyMat4(h)}else n.set(1/0,1/0,1/0);return Fr.set(n.x,n.y)}}onReEnterView(t){return t&&(this._onReEnterViewCallback=t),this}onLeaveView(t){return t&&(this._onLeaveViewCallback=t),this}}var Lr=`attribute vec3 aVertexPosition;
uniform mat4 uMVMatrix;
uniform mat4 uPMatrix;

void main () {
  vec3 vertexPos = aVertexPosition;

  vec4 pos = uPMatrix * uMVMatrix * vec4(vertexPos, 1.0);

  gl_Position = pos;
}`,Ur=`void main () {
    gl_FragColor = vec4(1.0 , 0.0, 0.0, 1.0);
}`;class Ir{constructor(){this.curtains=new hr({container:"canvas"}),this.params={vertexShader:Lr,fragmentShader:Ur},this.planeElement=document.querySelector("[data-plane]"),this.init()}init(){this.plane=new zr(this.curtains,this.planeElement,this.params)}}function wt(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}function Ui(u,t){u.prototype=Object.create(t.prototype),u.prototype.constructor=u,u.__proto__=t}/*!
 * GSAP 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var rt={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},$t={duration:.5,overwrite:!1,delay:0},Xe,H,U,dt=1e8,z=1/dt,Ye=Math.PI*2,Vr=Ye/4,Nr=0,Ii=Math.sqrt,Br=Math.cos,Wr=Math.sin,Y=function(t){return typeof t=="string"},B=function(t){return typeof t=="function"},Pt=function(t){return typeof t=="number"},je=function(t){return typeof t>"u"},mt=function(t){return typeof t=="object"},K=function(t){return t!==!1},He=function(){return typeof window<"u"},Ee=function(t){return B(t)||Y(t)},Vi=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},q=Array.isArray,qe=/(?:-?\.?\d|\.)+/gi,Ni=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Kt=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Qe=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Bi=/[+-]=-?[.\d]+/,Wi=/[^,'"\[\]\s]+/gi,Gr=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,V,xt,Ze,$e,nt={},Ce={},Gi,Xi=function(t){return(Ce=It(t,nt))&&et},Ke=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},ue=function(t,e){return!e&&console.warn(t)},Yi=function(t,e){return t&&(nt[t]=e)&&Ce&&(Ce[t]=e)||nt},de=function(){return 0},Xr={suppressEvents:!0,isStart:!0,kill:!1},Ae={suppressEvents:!0,kill:!1},Yr={suppressEvents:!0},Je={},Et=[],ti={},ji,at={},ei={},Hi=30,Oe=[],ii="",si=function(t){var e=t[0],i,s;if(mt(e)||B(e)||(t=[t]),!(i=(e._gsap||{}).harness)){for(s=Oe.length;s--&&!Oe[s].targetTest(e););i=Oe[s]}for(s=t.length;s--;)t[s]&&(t[s]._gsap||(t[s]._gsap=new Ts(t[s],i)))||t.splice(s,1);return t},Ut=function(t){return t._gsap||si(ft(t))[0]._gsap},qi=function(t,e,i){return(i=t[e])&&B(i)?t[e]():je(i)&&t.getAttribute&&t.getAttribute(e)||i},J=function(t,e){return(t=t.split(",")).forEach(e)||t},W=function(t){return Math.round(t*1e5)/1e5||0},j=function(t){return Math.round(t*1e7)/1e7||0},Jt=function(t,e){var i=e.charAt(0),s=parseFloat(e.substr(2));return t=parseFloat(t),i==="+"?t+s:i==="-"?t-s:i==="*"?t*s:t/s},jr=function(t,e){for(var i=e.length,s=0;t.indexOf(e[s])<0&&++s<i;);return s<i},ke=function(){var t=Et.length,e=Et.slice(0),i,s;for(ti={},Et.length=0,i=0;i<t;i++)s=e[i],s&&s._lazy&&(s.render(s._lazy[0],s._lazy[1],!0)._lazy=0)},Qi=function(t,e,i,s){Et.length&&!H&&ke(),t.render(e,i,s||H&&e<0&&(t._initted||t._startAt)),Et.length&&!H&&ke()},Zi=function(t){var e=parseFloat(t);return(e||e===0)&&(t+"").match(Wi).length<2?e:Y(t)?t.trim():t},$i=function(t){return t},ct=function(t,e){for(var i in e)i in t||(t[i]=e[i]);return t},Hr=function(t){return function(e,i){for(var s in i)s in e||s==="duration"&&t||s==="ease"||(e[s]=i[s])}},It=function(t,e){for(var i in e)t[i]=e[i];return t},Ki=function u(t,e){for(var i in e)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(t[i]=mt(e[i])?u(t[i]||(t[i]={}),e[i]):e[i]);return t},De=function(t,e){var i={},s;for(s in t)s in e||(i[s]=t[s]);return i},ce=function(t){var e=t.parent||V,i=t.keyframes?Hr(q(t.keyframes)):ct;if(K(t.inherit))for(;e;)i(t,e.vars.defaults),e=e.parent||e._dp;return t},qr=function(t,e){for(var i=t.length,s=i===e.length;s&&i--&&t[i]===e[i];);return i<0},Ji=function(t,e,i,s,r){i===void 0&&(i="_first"),s===void 0&&(s="_last");var n=t[s],a;if(r)for(a=e[r];n&&n[r]>a;)n=n._prev;return n?(e._next=n._next,n._next=e):(e._next=t[i],t[i]=e),e._next?e._next._prev=e:t[s]=e,e._prev=n,e.parent=e._dp=t,e},Fe=function(t,e,i,s){i===void 0&&(i="_first"),s===void 0&&(s="_last");var r=e._prev,n=e._next;r?r._next=n:t[i]===e&&(t[i]=n),n?n._prev=r:t[s]===e&&(t[s]=r),e._next=e._prev=e.parent=null},Ct=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},Vt=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var i=t;i;)i._dirty=1,i=i.parent;return t},Qr=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},ri=function(t,e,i,s){return t._startAt&&(H?t._startAt.revert(Ae):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,s))},Zr=function u(t){return!t||t._ts&&u(t.parent)},ts=function(t){return t._repeat?te(t._tTime,t=t.duration()+t._rDelay)*t:0},te=function(t,e){var i=Math.floor(t/=e);return t&&i===t?i-1:i},ze=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},Le=function(t){return t._end=j(t._start+(t._tDur/Math.abs(t._ts||t._rts||z)||0))},Ue=function(t,e){var i=t._dp;return i&&i.smoothChildTiming&&t._ts&&(t._start=j(i._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),Le(t),i._dirty||Vt(i,t)),t},es=function(t,e){var i;if((e._time||!e._dur&&e._initted||e._start<t._time&&(e._dur||!e.add))&&(i=ze(t.rawTime(),e),(!e._dur||fe(0,e.totalDuration(),i)-e._tTime>z)&&e.render(i,!0)),Vt(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(i=t;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;t._zTime=-z}},yt=function(t,e,i,s){return e.parent&&Ct(e),e._start=j((Pt(i)?i:i||t!==V?_t(t,i,e):t._time)+e._delay),e._end=j(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),Ji(t,e,"_first","_last",t._sort?"_start":0),ni(e)||(t._recent=e),s||es(t,e),t._ts<0&&Ue(t,t._tTime),t},is=function(t,e){return(nt.ScrollTrigger||Ke("scrollTrigger",e))&&nt.ScrollTrigger.create(e,t)},ss=function(t,e,i,s,r){if(fi(t,e,r),!t._initted)return 1;if(!i&&t._pt&&!H&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&ji!==ot.frame)return Et.push(t),t._lazy=[r,s],1},$r=function u(t){var e=t.parent;return e&&e._ts&&e._initted&&!e._lock&&(e.rawTime()<0||u(e))},ni=function(t){var e=t.data;return e==="isFromStart"||e==="isStart"},Kr=function(t,e,i,s){var r=t.ratio,n=e<0||!e&&(!t._start&&$r(t)&&!(!t._initted&&ni(t))||(t._ts<0||t._dp._ts<0)&&!ni(t))?0:1,a=t._rDelay,h=0,o,l,d;if(a&&t._repeat&&(h=fe(0,t._tDur,e),l=te(h,a),t._yoyo&&l&1&&(n=1-n),l!==te(t._tTime,a)&&(r=1-n,t.vars.repeatRefresh&&t._initted&&t.invalidate())),n!==r||H||s||t._zTime===z||!e&&t._zTime){if(!t._initted&&ss(t,e,s,i,h))return;for(d=t._zTime,t._zTime=e||(i?z:0),i||(i=e&&!d),t.ratio=n,t._from&&(n=1-n),t._time=0,t._tTime=h,o=t._pt;o;)o.r(n,o.d),o=o._next;e<0&&ri(t,e,i,!0),t._onUpdate&&!i&&ht(t,"onUpdate"),h&&t._repeat&&!i&&t.parent&&ht(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===n&&(n&&Ct(t,1),!i&&!H&&(ht(t,n?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)},Jr=function(t,e,i){var s;if(i>e)for(s=t._first;s&&s._start<=i;){if(s.data==="isPause"&&s._start>e)return s;s=s._next}else for(s=t._last;s&&s._start>=i;){if(s.data==="isPause"&&s._start<e)return s;s=s._prev}},ee=function(t,e,i,s){var r=t._repeat,n=j(e)||0,a=t._tTime/t._tDur;return a&&!s&&(t._time*=n/t._dur),t._dur=n,t._tDur=r?r<0?1e10:j(n*(r+1)+t._rDelay*r):n,a>0&&!s&&Ue(t,t._tTime=t._tDur*a),t.parent&&Le(t),i||Vt(t.parent,t),t},rs=function(t){return t instanceof $?Vt(t):ee(t,t._dur)},tn={_start:0,endTime:de,totalDuration:de},_t=function u(t,e,i){var s=t.labels,r=t._recent||tn,n=t.duration()>=dt?r.endTime(!1):t._dur,a,h,o;return Y(e)&&(isNaN(e)||e in s)?(h=e.charAt(0),o=e.substr(-1)==="%",a=e.indexOf("="),h==="<"||h===">"?(a>=0&&(e=e.replace(/=/,"")),(h==="<"?r._start:r.endTime(r._repeat>=0))+(parseFloat(e.substr(1))||0)*(o?(a<0?r:i).totalDuration()/100:1)):a<0?(e in s||(s[e]=n),s[e]):(h=parseFloat(e.charAt(a-1)+e.substr(a+1)),o&&i&&(h=h/100*(q(i)?i[0]:i).totalDuration()),a>1?u(t,e.substr(0,a-1),i)+h:n+h)):e==null?n:+e},_e=function(t,e,i){var s=Pt(e[1]),r=(s?2:1)+(t<2?0:1),n=e[r],a,h;if(s&&(n.duration=e[1]),n.parent=i,t){for(a=n,h=i;h&&!("immediateRender"in a);)a=h.vars.defaults||{},h=K(h.vars.inherit)&&h.parent;n.immediateRender=K(a.immediateRender),t<2?n.runBackwards=1:n.startAt=e[r-1]}return new X(e[0],n,e[r+1])},At=function(t,e){return t||t===0?e(t):e},fe=function(t,e,i){return i<t?t:i>e?e:i},Q=function(t,e){return!Y(t)||!(e=Gr.exec(t))?"":e[1]},en=function(t,e,i){return At(i,function(s){return fe(t,e,s)})},ai=[].slice,ns=function(t,e){return t&&mt(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&mt(t[0]))&&!t.nodeType&&t!==xt},sn=function(t,e,i){return i===void 0&&(i=[]),t.forEach(function(s){var r;return Y(s)&&!e||ns(s,1)?(r=i).push.apply(r,ft(s)):i.push(s)})||i},ft=function(t,e,i){return U&&!e&&U.selector?U.selector(t):Y(t)&&!i&&(Ze||!se())?ai.call((e||$e).querySelectorAll(t),0):q(t)?sn(t,i):ns(t)?ai.call(t,0):t?[t]:[]},hi=function(t){return t=ft(t)[0]||ue("Invalid scope")||{},function(e){var i=t.current||t.nativeElement||t;return ft(e,i.querySelectorAll?i:i===t?ue("Invalid scope")||$e.createElement("div"):t)}},as=function(t){return t.sort(function(){return .5-Math.random()})},hs=function(t){if(B(t))return t;var e=mt(t)?t:{each:t},i=Nt(e.ease),s=e.from||0,r=parseFloat(e.base)||0,n={},a=s>0&&s<1,h=isNaN(s)||a,o=e.axis,l=s,d=s;return Y(s)?l=d={center:.5,edges:.5,end:1}[s]||0:!a&&h&&(l=s[0],d=s[1]),function(_,f,p){var c=(p||e).length,g=n[c],x,m,b,v,y,w,P,R,T;if(!g){if(T=e.grid==="auto"?0:(e.grid||[1,dt])[1],!T){for(P=-dt;P<(P=p[T++].getBoundingClientRect().left)&&T<c;);T<c&&T--}for(g=n[c]=[],x=h?Math.min(T,c)*l-.5:s%T,m=T===dt?0:h?c*d/T-.5:s/T|0,P=0,R=dt,w=0;w<c;w++)b=w%T-x,v=m-(w/T|0),g[w]=y=o?Math.abs(o==="y"?v:b):Ii(b*b+v*v),y>P&&(P=y),y<R&&(R=y);s==="random"&&as(g),g.max=P-R,g.min=R,g.v=c=(parseFloat(e.amount)||parseFloat(e.each)*(T>c?c-1:o?o==="y"?c/T:T:Math.max(T,c/T))||0)*(s==="edges"?-1:1),g.b=c<0?r-c:r,g.u=Q(e.amount||e.each)||0,i=i&&c<0?ys(i):i}return c=(g[_]-g.min)/g.max||0,j(g.b+(i?i(c):c)*g.v)+g.u}},oi=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(i){var s=j(Math.round(parseFloat(i)/t)*t*e);return(s-s%1)/e+(Pt(i)?0:Q(i))}},os=function(t,e){var i=q(t),s,r;return!i&&mt(t)&&(s=i=t.radius||dt,t.values?(t=ft(t.values),(r=!Pt(t[0]))&&(s*=s)):t=oi(t.increment)),At(e,i?B(t)?function(n){return r=t(n),Math.abs(r-n)<=s?r:n}:function(n){for(var a=parseFloat(r?n.x:n),h=parseFloat(r?n.y:0),o=dt,l=0,d=t.length,_,f;d--;)r?(_=t[d].x-a,f=t[d].y-h,_=_*_+f*f):_=Math.abs(t[d]-a),_<o&&(o=_,l=d);return l=!s||o<=s?t[l]:n,r||l===n||Pt(n)?l:l+Q(n)}:oi(t))},ls=function(t,e,i,s){return At(q(t)?!e:i===!0?!!(i=0):!s,function(){return q(t)?t[~~(Math.random()*t.length)]:(i=i||1e-5)&&(s=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((t-i/2+Math.random()*(e-t+i*.99))/i)*i*s)/s})},rn=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(s){return e.reduce(function(r,n){return n(r)},s)}},nn=function(t,e){return function(i){return t(parseFloat(i))+(e||Q(i))}},an=function(t,e,i){return ds(t,e,0,1,i)},us=function(t,e,i){return At(i,function(s){return t[~~e(s)]})},hn=function u(t,e,i){var s=e-t;return q(t)?us(t,u(0,t.length),e):At(i,function(r){return(s+(r-t)%s)%s+t})},on=function u(t,e,i){var s=e-t,r=s*2;return q(t)?us(t,u(0,t.length-1),e):At(i,function(n){return n=(r+(n-t)%r)%r||0,t+(n>s?r-n:n)})},pe=function(t){for(var e=0,i="",s,r,n,a;~(s=t.indexOf("random(",e));)n=t.indexOf(")",s),a=t.charAt(s+7)==="[",r=t.substr(s+7,n-s-7).match(a?Wi:qe),i+=t.substr(e,s-e)+ls(a?r:+r[0],a?0:+r[1],+r[2]||1e-5),e=n+1;return i+t.substr(e,t.length-e)},ds=function(t,e,i,s,r){var n=e-t,a=s-i;return At(r,function(h){return i+((h-t)/n*a||0)})},ln=function u(t,e,i,s){var r=isNaN(t+e)?0:function(f){return(1-f)*t+f*e};if(!r){var n=Y(t),a={},h,o,l,d,_;if(i===!0&&(s=1)&&(i=null),n)t={p:t},e={p:e};else if(q(t)&&!q(e)){for(l=[],d=t.length,_=d-2,o=1;o<d;o++)l.push(u(t[o-1],t[o]));d--,r=function(p){p*=d;var c=Math.min(_,~~p);return l[c](p-c)},i=e}else s||(t=It(q(t)?[]:{},t));if(!l){for(h in e)ci.call(a,t,h,"get",e[h]);r=function(p){return mi(p,a)||(n?t.p:t)}}}return At(i,r)},cs=function(t,e,i){var s=t.labels,r=dt,n,a,h;for(n in s)a=s[n]-e,a<0==!!i&&a&&r>(a=Math.abs(a))&&(h=n,r=a);return h},ht=function(t,e,i){var s=t.vars,r=s[e],n=U,a=t._ctx,h,o,l;if(r)return h=s[e+"Params"],o=s.callbackScope||t,i&&Et.length&&ke(),a&&(U=a),l=h?r.apply(o,h):r.call(o),U=n,l},ge=function(t){return Ct(t),t.scrollTrigger&&t.scrollTrigger.kill(!!H),t.progress()<1&&ht(t,"onInterrupt"),t},ie,_s=[],fs=function(t){if(t)if(t=!t.name&&t.default||t,He()||t.headless){var e=t.name,i=B(t),s=e&&!i&&t.init?function(){this._props=[]}:t,r={init:de,render:mi,add:ci,kill:Rn,modifier:Pn,rawVars:0},n={targetTest:0,get:0,getSetter:gi,aliases:{},register:0};if(se(),t!==s){if(at[e])return;ct(s,ct(De(t,r),n)),It(s.prototype,It(r,De(t,n))),at[s.prop=e]=s,t.targetTest&&(Oe.push(s),Je[e]=1),e=(e==="css"?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}Yi(e,s),t.register&&t.register(et,s,tt)}else _s.push(t)},D=255,me={aqua:[0,D,D],lime:[0,D,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,D],navy:[0,0,128],white:[D,D,D],olive:[128,128,0],yellow:[D,D,0],orange:[D,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[D,0,0],pink:[D,192,203],cyan:[0,D,D],transparent:[D,D,D,0]},li=function(t,e,i){return t+=t<0?1:t>1?-1:0,(t*6<1?e+(i-e)*t*6:t<.5?i:t*3<2?e+(i-e)*(2/3-t)*6:e)*D+.5|0},ps=function(t,e,i){var s=t?Pt(t)?[t>>16,t>>8&D,t&D]:0:me.black,r,n,a,h,o,l,d,_,f,p;if(!s){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),me[t])s=me[t];else if(t.charAt(0)==="#"){if(t.length<6&&(r=t.charAt(1),n=t.charAt(2),a=t.charAt(3),t="#"+r+r+n+n+a+a+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return s=parseInt(t.substr(1,6),16),[s>>16,s>>8&D,s&D,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),s=[t>>16,t>>8&D,t&D]}else if(t.substr(0,3)==="hsl"){if(s=p=t.match(qe),!e)h=+s[0]%360/360,o=+s[1]/100,l=+s[2]/100,n=l<=.5?l*(o+1):l+o-l*o,r=l*2-n,s.length>3&&(s[3]*=1),s[0]=li(h+1/3,r,n),s[1]=li(h,r,n),s[2]=li(h-1/3,r,n);else if(~t.indexOf("="))return s=t.match(Ni),i&&s.length<4&&(s[3]=1),s}else s=t.match(qe)||me.transparent;s=s.map(Number)}return e&&!p&&(r=s[0]/D,n=s[1]/D,a=s[2]/D,d=Math.max(r,n,a),_=Math.min(r,n,a),l=(d+_)/2,d===_?h=o=0:(f=d-_,o=l>.5?f/(2-d-_):f/(d+_),h=d===r?(n-a)/f+(n<a?6:0):d===n?(a-r)/f+2:(r-n)/f+4,h*=60),s[0]=~~(h+.5),s[1]=~~(o*100+.5),s[2]=~~(l*100+.5)),i&&s.length<4&&(s[3]=1),s},gs=function(t){var e=[],i=[],s=-1;return t.split(Ot).forEach(function(r){var n=r.match(Kt)||[];e.push.apply(e,n),i.push(s+=n.length+1)}),e.c=i,e},ms=function(t,e,i){var s="",r=(t+s).match(Ot),n=e?"hsla(":"rgba(",a=0,h,o,l,d;if(!r)return t;if(r=r.map(function(_){return(_=ps(_,e,1))&&n+(e?_[0]+","+_[1]+"%,"+_[2]+"%,"+_[3]:_.join(","))+")"}),i&&(l=gs(t),h=i.c,h.join(s)!==l.c.join(s)))for(o=t.replace(Ot,"1").split(Kt),d=o.length-1;a<d;a++)s+=o[a]+(~h.indexOf(a)?r.shift()||n+"0,0,0,0)":(l.length?l:r.length?r:i).shift());if(!o)for(o=t.split(Ot),d=o.length-1;a<d;a++)s+=o[a]+r[a];return s+o[d]},Ot=function(){var u="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in me)u+="|"+t+"\\b";return new RegExp(u+")","gi")}(),un=/hsl[a]?\(/,xs=function(t){var e=t.join(" "),i;if(Ot.lastIndex=0,Ot.test(e))return i=un.test(e),t[1]=ms(t[1],i),t[0]=ms(t[0],i,gs(t[1])),!0},xe,ot=function(){var u=Date.now,t=500,e=33,i=u(),s=i,r=1e3/240,n=r,a=[],h,o,l,d,_,f,p=function c(g){var x=u()-s,m=g===!0,b,v,y,w;if((x>t||x<0)&&(i+=x-e),s+=x,y=s-i,b=y-n,(b>0||m)&&(w=++d.frame,_=y-d.time*1e3,d.time=y=y/1e3,n+=b+(b>=r?4:r-b),v=1),m||(h=o(c)),v)for(f=0;f<a.length;f++)a[f](y,_,w,g)};return d={time:0,frame:0,tick:function(){p(!0)},deltaRatio:function(g){return _/(1e3/(g||60))},wake:function(){Gi&&(!Ze&&He()&&(xt=Ze=window,$e=xt.document||{},nt.gsap=et,(xt.gsapVersions||(xt.gsapVersions=[])).push(et.version),Xi(Ce||xt.GreenSockGlobals||!xt.gsap&&xt||{}),_s.forEach(fs)),l=typeof requestAnimationFrame<"u"&&requestAnimationFrame,h&&d.sleep(),o=l||function(g){return setTimeout(g,n-d.time*1e3+1|0)},xe=1,p(2))},sleep:function(){(l?cancelAnimationFrame:clearTimeout)(h),xe=0,o=de},lagSmoothing:function(g,x){t=g||1/0,e=Math.min(x||33,t)},fps:function(g){r=1e3/(g||240),n=d.time*1e3+r},add:function(g,x,m){var b=x?function(v,y,w,P){g(v,y,w,P),d.remove(b)}:g;return d.remove(g),a[m?"unshift":"push"](b),se(),b},remove:function(g,x){~(x=a.indexOf(g))&&a.splice(x,1)&&f>=x&&f--},_listeners:a},d}(),se=function(){return!xe&&ot.wake()},C={},dn=/^[\d.\-M][\d.\-,\s]/,cn=/["']/g,_n=function(t){for(var e={},i=t.substr(1,t.length-3).split(":"),s=i[0],r=1,n=i.length,a,h,o;r<n;r++)h=i[r],a=r!==n-1?h.lastIndexOf(","):h.length,o=h.substr(0,a),e[s]=isNaN(o)?o.replace(cn,"").trim():+o,s=h.substr(a+1).trim();return e},fn=function(t){var e=t.indexOf("(")+1,i=t.indexOf(")"),s=t.indexOf("(",e);return t.substring(e,~s&&s<i?t.indexOf(")",i+1):i)},pn=function(t){var e=(t+"").split("("),i=C[e[0]];return i&&e.length>1&&i.config?i.config.apply(null,~t.indexOf("{")?[_n(e[1])]:fn(t).split(",").map(Zi)):C._CE&&dn.test(t)?C._CE("",t):i},ys=function(t){return function(e){return 1-t(1-e)}},bs=function u(t,e){for(var i=t._first,s;i;)i instanceof $?u(i,e):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==e&&(i.timeline?u(i.timeline,e):(s=i._ease,i._ease=i._yEase,i._yEase=s,i._yoyo=e)),i=i._next},Nt=function(t,e){return t&&(B(t)?t:C[t]||pn(t))||e},Bt=function(t,e,i,s){i===void 0&&(i=function(h){return 1-e(1-h)}),s===void 0&&(s=function(h){return h<.5?e(h*2)/2:1-e((1-h)*2)/2});var r={easeIn:e,easeOut:i,easeInOut:s},n;return J(t,function(a){C[a]=nt[a]=r,C[n=a.toLowerCase()]=i;for(var h in r)C[n+(h==="easeIn"?".in":h==="easeOut"?".out":".inOut")]=C[a+"."+h]=r[h]}),r},vs=function(t){return function(e){return e<.5?(1-t(1-e*2))/2:.5+t((e-.5)*2)/2}},ui=function u(t,e,i){var s=e>=1?e:1,r=(i||(t?.3:.45))/(e<1?e:1),n=r/Ye*(Math.asin(1/s)||0),a=function(l){return l===1?1:s*Math.pow(2,-10*l)*Wr((l-n)*r)+1},h=t==="out"?a:t==="in"?function(o){return 1-a(1-o)}:vs(a);return r=Ye/r,h.config=function(o,l){return u(t,o,l)},h},di=function u(t,e){e===void 0&&(e=1.70158);var i=function(n){return n?--n*n*((e+1)*n+e)+1:0},s=t==="out"?i:t==="in"?function(r){return 1-i(1-r)}:vs(i);return s.config=function(r){return u(t,r)},s};J("Linear,Quad,Cubic,Quart,Quint,Strong",function(u,t){var e=t<5?t+1:t;Bt(u+",Power"+(e-1),t?function(i){return Math.pow(i,e)}:function(i){return i},function(i){return 1-Math.pow(1-i,e)},function(i){return i<.5?Math.pow(i*2,e)/2:1-Math.pow((1-i)*2,e)/2})}),C.Linear.easeNone=C.none=C.Linear.easeIn,Bt("Elastic",ui("in"),ui("out"),ui()),function(u,t){var e=1/t,i=2*e,s=2.5*e,r=function(a){return a<e?u*a*a:a<i?u*Math.pow(a-1.5/t,2)+.75:a<s?u*(a-=2.25/t)*a+.9375:u*Math.pow(a-2.625/t,2)+.984375};Bt("Bounce",function(n){return 1-r(1-n)},r)}(7.5625,2.75),Bt("Expo",function(u){return u?Math.pow(2,10*(u-1)):0}),Bt("Circ",function(u){return-(Ii(1-u*u)-1)}),Bt("Sine",function(u){return u===1?1:-Br(u*Vr)+1}),Bt("Back",di("in"),di("out"),di()),C.SteppedEase=C.steps=nt.SteppedEase={config:function(t,e){t===void 0&&(t=1);var i=1/t,s=t+(e?0:1),r=e?1:0,n=1-z;return function(a){return((s*fe(0,n,a)|0)+r)*i}}},$t.ease=C["quad.out"],J("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(u){return ii+=u+","+u+"Params,"});var Ts=function(t,e){this.id=Nr++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:qi,this.set=e?e.getSetter:gi},ye=function(){function u(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,ee(this,+e.duration,1,1),this.data=e.data,U&&(this._ctx=U,U.data.push(this)),xe||ot.wake()}var t=u.prototype;return t.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},t.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},t.totalDuration=function(i){return arguments.length?(this._dirty=0,ee(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(i,s){if(se(),!arguments.length)return this._tTime;var r=this._dp;if(r&&r.smoothChildTiming&&this._ts){for(Ue(this,i),!r._dp||r.parent||es(r,this);r&&r.parent;)r.parent._time!==r._start+(r._ts>=0?r._tTime/r._ts:(r.totalDuration()-r._tTime)/-r._ts)&&r.totalTime(r._tTime,!0),r=r.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&yt(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!s||this._initted&&Math.abs(this._zTime)===z||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),Qi(this,i,s)),this},t.time=function(i,s){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+ts(this))%(this._dur+this._rDelay)||(i?this._dur:0),s):this._time},t.totalProgress=function(i,s){return arguments.length?this.totalTime(this.totalDuration()*i,s):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},t.progress=function(i,s){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+ts(this),s):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(i,s){var r=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*r,s):this._repeat?te(this._tTime,r)+1:1},t.timeScale=function(i,s){if(!arguments.length)return this._rts===-z?0:this._rts;if(this._rts===i)return this;var r=this.parent&&this._ts?ze(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-z?0:this._rts,this.totalTime(fe(-Math.abs(this._delay),this._tDur,r),s!==!1),Le(this),Qr(this)},t.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(se(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==z&&(this._tTime-=z)))),this):this._ps},t.startTime=function(i){if(arguments.length){this._start=i;var s=this.parent||this._dp;return s&&(s._sort||!this.parent)&&yt(s,this,i-this._delay),this}return this._start},t.endTime=function(i){return this._start+(K(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(i){var s=this.parent||this._dp;return s?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?ze(s.rawTime(i),this):this._tTime:this._tTime},t.revert=function(i){i===void 0&&(i=Yr);var s=H;return H=i,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),H=s,this},t.globalTime=function(i){for(var s=this,r=arguments.length?i:s.rawTime();s;)r=s._start+r/(Math.abs(s._ts)||1),s=s._dp;return!this.parent&&this._sat?this._sat.globalTime(i):r},t.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,rs(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(i){if(arguments.length){var s=this._time;return this._rDelay=i,rs(this),s?this.time(s):this}return this._rDelay},t.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},t.seek=function(i,s){return this.totalTime(_t(this,i),K(s))},t.restart=function(i,s){return this.play().totalTime(i?-this._delay:0,K(s))},t.play=function(i,s){return i!=null&&this.seek(i,s),this.reversed(!1).paused(!1)},t.reverse=function(i,s){return i!=null&&this.seek(i||this.totalDuration(),s),this.reversed(!0).paused(!1)},t.pause=function(i,s){return i!=null&&this.seek(i,s),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-z:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-z,this},t.isActive=function(){var i=this.parent||this._dp,s=this._start,r;return!!(!i||this._ts&&this._initted&&i.isActive()&&(r=i.rawTime(!0))>=s&&r<this.endTime(!0)-z)},t.eventCallback=function(i,s,r){var n=this.vars;return arguments.length>1?(s?(n[i]=s,r&&(n[i+"Params"]=r),i==="onUpdate"&&(this._onUpdate=s)):delete n[i],this):n[i]},t.then=function(i){var s=this;return new Promise(function(r){var n=B(i)?i:$i,a=function(){var o=s.then;s.then=null,B(n)&&(n=n(s))&&(n.then||n===s)&&(s.then=o),r(n),s.then=o};s._initted&&s.totalProgress()===1&&s._ts>=0||!s._tTime&&s._ts<0?a():s._prom=a})},t.kill=function(){ge(this)},u}();ct(ye.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-z,_prom:0,_ps:!1,_rts:1});var $=function(u){Ui(t,u);function t(i,s){var r;return i===void 0&&(i={}),r=u.call(this,i)||this,r.labels={},r.smoothChildTiming=!!i.smoothChildTiming,r.autoRemoveChildren=!!i.autoRemoveChildren,r._sort=K(i.sortChildren),V&&yt(i.parent||V,wt(r),s),i.reversed&&r.reverse(),i.paused&&r.paused(!0),i.scrollTrigger&&is(wt(r),i.scrollTrigger),r}var e=t.prototype;return e.to=function(s,r,n){return _e(0,arguments,this),this},e.from=function(s,r,n){return _e(1,arguments,this),this},e.fromTo=function(s,r,n,a){return _e(2,arguments,this),this},e.set=function(s,r,n){return r.duration=0,r.parent=this,ce(r).repeatDelay||(r.repeat=0),r.immediateRender=!!r.immediateRender,new X(s,r,_t(this,n),1),this},e.call=function(s,r,n){return yt(this,X.delayedCall(0,s,r),n)},e.staggerTo=function(s,r,n,a,h,o,l){return n.duration=r,n.stagger=n.stagger||a,n.onComplete=o,n.onCompleteParams=l,n.parent=this,new X(s,n,_t(this,h)),this},e.staggerFrom=function(s,r,n,a,h,o,l){return n.runBackwards=1,ce(n).immediateRender=K(n.immediateRender),this.staggerTo(s,r,n,a,h,o,l)},e.staggerFromTo=function(s,r,n,a,h,o,l,d){return a.startAt=n,ce(a).immediateRender=K(a.immediateRender),this.staggerTo(s,r,a,h,o,l,d)},e.render=function(s,r,n){var a=this._time,h=this._dirty?this.totalDuration():this._tDur,o=this._dur,l=s<=0?0:j(s),d=this._zTime<0!=s<0&&(this._initted||!o),_,f,p,c,g,x,m,b,v,y,w,P;if(this!==V&&l>h&&s>=0&&(l=h),l!==this._tTime||n||d){if(a!==this._time&&o&&(l+=this._time-a,s+=this._time-a),_=l,v=this._start,b=this._ts,x=!b,d&&(o||(a=this._zTime),(s||!r)&&(this._zTime=s)),this._repeat){if(w=this._yoyo,g=o+this._rDelay,this._repeat<-1&&s<0)return this.totalTime(g*100+s,r,n);if(_=j(l%g),l===h?(c=this._repeat,_=o):(c=~~(l/g),c&&c===l/g&&(_=o,c--),_>o&&(_=o)),y=te(this._tTime,g),!a&&this._tTime&&y!==c&&this._tTime-y*g-this._dur<=0&&(y=c),w&&c&1&&(_=o-_,P=1),c!==y&&!this._lock){var R=w&&y&1,T=R===(w&&c&1);if(c<y&&(R=!R),a=R?0:l%o?o:l,this._lock=1,this.render(a||(P?0:j(c*g)),r,!o)._lock=0,this._tTime=l,!r&&this.parent&&ht(this,"onRepeat"),this.vars.repeatRefresh&&!P&&(this.invalidate()._lock=1),a&&a!==this._time||x!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(o=this._dur,h=this._tDur,T&&(this._lock=2,a=R?o:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!P&&this.invalidate()),this._lock=0,!this._ts&&!x)return this;bs(this,P)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(m=Jr(this,j(a),j(_)),m&&(l-=_-(_=m._start))),this._tTime=l,this._time=_,this._act=!b,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=s,a=0),!a&&_&&!r&&!c&&(ht(this,"onStart"),this._tTime!==l))return this;if(_>=a&&s>=0)for(f=this._first;f;){if(p=f._next,(f._act||_>=f._start)&&f._ts&&m!==f){if(f.parent!==this)return this.render(s,r,n);if(f.render(f._ts>0?(_-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(_-f._start)*f._ts,r,n),_!==this._time||!this._ts&&!x){m=0,p&&(l+=this._zTime=-z);break}}f=p}else{f=this._last;for(var E=s<0?s:_;f;){if(p=f._prev,(f._act||E<=f._end)&&f._ts&&m!==f){if(f.parent!==this)return this.render(s,r,n);if(f.render(f._ts>0?(E-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(E-f._start)*f._ts,r,n||H&&(f._initted||f._startAt)),_!==this._time||!this._ts&&!x){m=0,p&&(l+=this._zTime=E?-z:z);break}}f=p}}if(m&&!r&&(this.pause(),m.render(_>=a?0:-z)._zTime=_>=a?1:-1,this._ts))return this._start=v,Le(this),this.render(s,r,n);this._onUpdate&&!r&&ht(this,"onUpdate",!0),(l===h&&this._tTime>=this.totalDuration()||!l&&a)&&(v===this._start||Math.abs(b)!==Math.abs(this._ts))&&(this._lock||((s||!o)&&(l===h&&this._ts>0||!l&&this._ts<0)&&Ct(this,1),!r&&!(s<0&&!a)&&(l||a||!h)&&(ht(this,l===h&&s>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(l<h&&this.timeScale()>0)&&this._prom())))}return this},e.add=function(s,r){var n=this;if(Pt(r)||(r=_t(this,r,s)),!(s instanceof ye)){if(q(s))return s.forEach(function(a){return n.add(a,r)}),this;if(Y(s))return this.addLabel(s,r);if(B(s))s=X.delayedCall(0,s);else return this}return this!==s?yt(this,s,r):this},e.getChildren=function(s,r,n,a){s===void 0&&(s=!0),r===void 0&&(r=!0),n===void 0&&(n=!0),a===void 0&&(a=-dt);for(var h=[],o=this._first;o;)o._start>=a&&(o instanceof X?r&&h.push(o):(n&&h.push(o),s&&h.push.apply(h,o.getChildren(!0,r,n)))),o=o._next;return h},e.getById=function(s){for(var r=this.getChildren(1,1,1),n=r.length;n--;)if(r[n].vars.id===s)return r[n]},e.remove=function(s){return Y(s)?this.removeLabel(s):B(s)?this.killTweensOf(s):(Fe(this,s),s===this._recent&&(this._recent=this._last),Vt(this))},e.totalTime=function(s,r){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=j(ot.time-(this._ts>0?s/this._ts:(this.totalDuration()-s)/-this._ts))),u.prototype.totalTime.call(this,s,r),this._forcing=0,this):this._tTime},e.addLabel=function(s,r){return this.labels[s]=_t(this,r),this},e.removeLabel=function(s){return delete this.labels[s],this},e.addPause=function(s,r,n){var a=X.delayedCall(0,r||de,n);return a.data="isPause",this._hasPause=1,yt(this,a,_t(this,s))},e.removePause=function(s){var r=this._first;for(s=_t(this,s);r;)r._start===s&&r.data==="isPause"&&Ct(r),r=r._next},e.killTweensOf=function(s,r,n){for(var a=this.getTweensOf(s,n),h=a.length;h--;)kt!==a[h]&&a[h].kill(s,r);return this},e.getTweensOf=function(s,r){for(var n=[],a=ft(s),h=this._first,o=Pt(r),l;h;)h instanceof X?jr(h._targets,a)&&(o?(!kt||h._initted&&h._ts)&&h.globalTime(0)<=r&&h.globalTime(h.totalDuration())>r:!r||h.isActive())&&n.push(h):(l=h.getTweensOf(a,r)).length&&n.push.apply(n,l),h=h._next;return n},e.tweenTo=function(s,r){r=r||{};var n=this,a=_t(n,s),h=r,o=h.startAt,l=h.onStart,d=h.onStartParams,_=h.immediateRender,f,p=X.to(n,ct({ease:r.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:r.duration||Math.abs((a-(o&&"time"in o?o.time:n._time))/n.timeScale())||z,onStart:function(){if(n.pause(),!f){var g=r.duration||Math.abs((a-(o&&"time"in o?o.time:n._time))/n.timeScale());p._dur!==g&&ee(p,g,0,1).render(p._time,!0,!0),f=1}l&&l.apply(p,d||[])}},r));return _?p.render(0):p},e.tweenFromTo=function(s,r,n){return this.tweenTo(r,ct({startAt:{time:_t(this,s)}},n))},e.recent=function(){return this._recent},e.nextLabel=function(s){return s===void 0&&(s=this._time),cs(this,_t(this,s))},e.previousLabel=function(s){return s===void 0&&(s=this._time),cs(this,_t(this,s),1)},e.currentLabel=function(s){return arguments.length?this.seek(s,!0):this.previousLabel(this._time+z)},e.shiftChildren=function(s,r,n){n===void 0&&(n=0);for(var a=this._first,h=this.labels,o;a;)a._start>=n&&(a._start+=s,a._end+=s),a=a._next;if(r)for(o in h)h[o]>=n&&(h[o]+=s);return Vt(this)},e.invalidate=function(s){var r=this._first;for(this._lock=0;r;)r.invalidate(s),r=r._next;return u.prototype.invalidate.call(this,s)},e.clear=function(s){s===void 0&&(s=!0);for(var r=this._first,n;r;)n=r._next,this.remove(r),r=n;return this._dp&&(this._time=this._tTime=this._pTime=0),s&&(this.labels={}),Vt(this)},e.totalDuration=function(s){var r=0,n=this,a=n._last,h=dt,o,l,d;if(arguments.length)return n.timeScale((n._repeat<0?n.duration():n.totalDuration())/(n.reversed()?-s:s));if(n._dirty){for(d=n.parent;a;)o=a._prev,a._dirty&&a.totalDuration(),l=a._start,l>h&&n._sort&&a._ts&&!n._lock?(n._lock=1,yt(n,a,l-a._delay,1)._lock=0):h=l,l<0&&a._ts&&(r-=l,(!d&&!n._dp||d&&d.smoothChildTiming)&&(n._start+=l/n._ts,n._time-=l,n._tTime-=l),n.shiftChildren(-l,!1,-1/0),h=0),a._end>r&&a._ts&&(r=a._end),a=o;ee(n,n===V&&n._time>r?n._time:r,1,1),n._dirty=0}return n._tDur},t.updateRoot=function(s){if(V._ts&&(Qi(V,ze(s,V)),ji=ot.frame),ot.frame>=Hi){Hi+=rt.autoSleep||120;var r=V._first;if((!r||!r._ts)&&rt.autoSleep&&ot._listeners.length<2){for(;r&&!r._ts;)r=r._next;r||ot.sleep()}}},t}(ye);ct($.prototype,{_lock:0,_hasPause:0,_forcing:0});var gn=function(t,e,i,s,r,n,a){var h=new tt(this._pt,t,e,0,1,Es,null,r),o=0,l=0,d,_,f,p,c,g,x,m;for(h.b=i,h.e=s,i+="",s+="",(x=~s.indexOf("random("))&&(s=pe(s)),n&&(m=[i,s],n(m,t,e),i=m[0],s=m[1]),_=i.match(Qe)||[];d=Qe.exec(s);)p=d[0],c=s.substring(o,d.index),f?f=(f+1)%5:c.substr(-5)==="rgba("&&(f=1),p!==_[l++]&&(g=parseFloat(_[l-1])||0,h._pt={_next:h._pt,p:c||l===1?c:",",s:g,c:p.charAt(1)==="="?Jt(g,p)-g:parseFloat(p)-g,m:f&&f<4?Math.round:0},o=Qe.lastIndex);return h.c=o<s.length?s.substring(o,s.length):"",h.fp=a,(Bi.test(s)||x)&&(h.e=0),this._pt=h,h},ci=function(t,e,i,s,r,n,a,h,o,l){B(s)&&(s=s(r||0,t,n));var d=t[e],_=i!=="get"?i:B(d)?o?t[e.indexOf("set")||!B(t["get"+e.substr(3)])?e:"get"+e.substr(3)](o):t[e]():d,f=B(d)?o?vn:Ss:pi,p;if(Y(s)&&(~s.indexOf("random(")&&(s=pe(s)),s.charAt(1)==="="&&(p=Jt(_,s)+(Q(_)||0),(p||p===0)&&(s=p))),!l||_!==s||_i)return!isNaN(_*s)&&s!==""?(p=new tt(this._pt,t,e,+_||0,s-(_||0),typeof d=="boolean"?wn:Ms,0,f),o&&(p.fp=o),a&&p.modifier(a,this,t),this._pt=p):(!d&&!(e in t)&&Ke(e,s),gn.call(this,t,e,_,s,f,h||rt.stringFilter,o))},mn=function(t,e,i,s,r){if(B(t)&&(t=be(t,r,e,i,s)),!mt(t)||t.style&&t.nodeType||q(t)||Vi(t))return Y(t)?be(t,r,e,i,s):t;var n={},a;for(a in t)n[a]=be(t[a],r,e,i,s);return n},ws=function(t,e,i,s,r,n){var a,h,o,l;if(at[t]&&(a=new at[t]).init(r,a.rawVars?e[t]:mn(e[t],s,r,n,i),i,s,n)!==!1&&(i._pt=h=new tt(i._pt,r,t,0,1,a.render,a,0,a.priority),i!==ie))for(o=i._ptLookup[i._targets.indexOf(r)],l=a._props.length;l--;)o[a._props[l]]=h;return a},kt,_i,fi=function u(t,e,i){var s=t.vars,r=s.ease,n=s.startAt,a=s.immediateRender,h=s.lazy,o=s.onUpdate,l=s.runBackwards,d=s.yoyoEase,_=s.keyframes,f=s.autoRevert,p=t._dur,c=t._startAt,g=t._targets,x=t.parent,m=x&&x.data==="nested"?x.vars.targets:g,b=t._overwrite==="auto"&&!Xe,v=t.timeline,y,w,P,R,T,E,A,O,k,L,F,M,G;if(v&&(!_||!r)&&(r="none"),t._ease=Nt(r,$t.ease),t._yEase=d?ys(Nt(d===!0?r:d,$t.ease)):0,d&&t._yoyo&&!t._repeat&&(d=t._yEase,t._yEase=t._ease,t._ease=d),t._from=!v&&!!s.runBackwards,!v||_&&!s.stagger){if(O=g[0]?Ut(g[0]).harness:0,M=O&&s[O.prop],y=De(s,Je),c&&(c._zTime<0&&c.progress(1),e<0&&l&&a&&!f?c.render(-1,!0):c.revert(l&&p?Ae:Xr),c._lazy=0),n){if(Ct(t._startAt=X.set(g,ct({data:"isStart",overwrite:!1,parent:x,immediateRender:!0,lazy:!c&&K(h),startAt:null,delay:0,onUpdate:o&&function(){return ht(t,"onUpdate")},stagger:0},n))),t._startAt._dp=0,t._startAt._sat=t,e<0&&(H||!a&&!f)&&t._startAt.revert(Ae),a&&p&&e<=0&&i<=0){e&&(t._zTime=e);return}}else if(l&&p&&!c){if(e&&(a=!1),P=ct({overwrite:!1,data:"isFromStart",lazy:a&&!c&&K(h),immediateRender:a,stagger:0,parent:x},y),M&&(P[O.prop]=M),Ct(t._startAt=X.set(g,P)),t._startAt._dp=0,t._startAt._sat=t,e<0&&(H?t._startAt.revert(Ae):t._startAt.render(-1,!0)),t._zTime=e,!a)u(t._startAt,z,z);else if(!e)return}for(t._pt=t._ptCache=0,h=p&&K(h)||h&&!p,w=0;w<g.length;w++){if(T=g[w],A=T._gsap||si(g)[w]._gsap,t._ptLookup[w]=L={},ti[A.id]&&Et.length&&ke(),F=m===g?w:m.indexOf(T),O&&(k=new O).init(T,M||y,t,F,m)!==!1&&(t._pt=R=new tt(t._pt,T,k.name,0,1,k.render,k,0,k.priority),k._props.forEach(function(st){L[st]=R}),k.priority&&(E=1)),!O||M)for(P in y)at[P]&&(k=ws(P,y,t,F,T,m))?k.priority&&(E=1):L[P]=R=ci.call(t,T,P,"get",y[P],F,m,0,s.stringFilter);t._op&&t._op[w]&&t.kill(T,t._op[w]),b&&t._pt&&(kt=t,V.killTweensOf(T,L,t.globalTime(e)),G=!t.parent,kt=0),t._pt&&h&&(ti[A.id]=1)}E&&Cs(t),t._onInit&&t._onInit(t)}t._onUpdate=o,t._initted=(!t._op||t._pt)&&!G,_&&e<=0&&v.render(dt,!0,!0)},xn=function(t,e,i,s,r,n,a,h){var o=(t._pt&&t._ptCache||(t._ptCache={}))[e],l,d,_,f;if(!o)for(o=t._ptCache[e]=[],_=t._ptLookup,f=t._targets.length;f--;){if(l=_[f][e],l&&l.d&&l.d._pt)for(l=l.d._pt;l&&l.p!==e&&l.fp!==e;)l=l._next;if(!l)return _i=1,t.vars[e]="+=0",fi(t,a),_i=0,h?ue(e+" not eligible for reset"):1;o.push(l)}for(f=o.length;f--;)d=o[f],l=d._pt||d,l.s=(s||s===0)&&!r?s:l.s+(s||0)+n*l.c,l.c=i-l.s,d.e&&(d.e=W(i)+Q(d.e)),d.b&&(d.b=l.s+Q(d.b))},yn=function(t,e){var i=t[0]?Ut(t[0]).harness:0,s=i&&i.aliases,r,n,a,h;if(!s)return e;r=It({},e);for(n in s)if(n in r)for(h=s[n].split(","),a=h.length;a--;)r[h[a]]=r[n];return r},bn=function(t,e,i,s){var r=e.ease||s||"power1.inOut",n,a;if(q(e))a=i[t]||(i[t]=[]),e.forEach(function(h,o){return a.push({t:o/(e.length-1)*100,v:h,e:r})});else for(n in e)a=i[n]||(i[n]=[]),n==="ease"||a.push({t:parseFloat(t),v:e[n],e:r})},be=function(t,e,i,s,r){return B(t)?t.call(e,i,s,r):Y(t)&&~t.indexOf("random(")?pe(t):t},Ps=ii+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Rs={};J(Ps+",id,stagger,delay,duration,paused,scrollTrigger",function(u){return Rs[u]=1});var X=function(u){Ui(t,u);function t(i,s,r,n){var a;typeof s=="number"&&(r.duration=s,s=r,r=null),a=u.call(this,n?s:ce(s))||this;var h=a.vars,o=h.duration,l=h.delay,d=h.immediateRender,_=h.stagger,f=h.overwrite,p=h.keyframes,c=h.defaults,g=h.scrollTrigger,x=h.yoyoEase,m=s.parent||V,b=(q(i)||Vi(i)?Pt(i[0]):"length"in s)?[i]:ft(i),v,y,w,P,R,T,E,A;if(a._targets=b.length?si(b):ue("GSAP target "+i+" not found. https://gsap.com",!rt.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=f,p||_||Ee(o)||Ee(l)){if(s=a.vars,v=a.timeline=new $({data:"nested",defaults:c||{},targets:m&&m.data==="nested"?m.vars.targets:b}),v.kill(),v.parent=v._dp=wt(a),v._start=0,_||Ee(o)||Ee(l)){if(P=b.length,E=_&&hs(_),mt(_))for(R in _)~Ps.indexOf(R)&&(A||(A={}),A[R]=_[R]);for(y=0;y<P;y++)w=De(s,Rs),w.stagger=0,x&&(w.yoyoEase=x),A&&It(w,A),T=b[y],w.duration=+be(o,wt(a),y,T,b),w.delay=(+be(l,wt(a),y,T,b)||0)-a._delay,!_&&P===1&&w.delay&&(a._delay=l=w.delay,a._start+=l,w.delay=0),v.to(T,w,E?E(y,T,b):0),v._ease=C.none;v.duration()?o=l=0:a.timeline=0}else if(p){ce(ct(v.vars.defaults,{ease:"none"})),v._ease=Nt(p.ease||s.ease||"none");var O=0,k,L,F;if(q(p))p.forEach(function(M){return v.to(b,M,">")}),v.duration();else{w={};for(R in p)R==="ease"||R==="easeEach"||bn(R,p[R],w,p.easeEach);for(R in w)for(k=w[R].sort(function(M,G){return M.t-G.t}),O=0,y=0;y<k.length;y++)L=k[y],F={ease:L.e,duration:(L.t-(y?k[y-1].t:0))/100*o},F[R]=L.v,v.to(b,F,O),O+=F.duration;v.duration()<o&&v.to({},{duration:o-v.duration()})}}o||a.duration(o=v.duration())}else a.timeline=0;return f===!0&&!Xe&&(kt=wt(a),V.killTweensOf(b),kt=0),yt(m,wt(a),r),s.reversed&&a.reverse(),s.paused&&a.paused(!0),(d||!o&&!p&&a._start===j(m._time)&&K(d)&&Zr(wt(a))&&m.data!=="nested")&&(a._tTime=-z,a.render(Math.max(0,-l)||0)),g&&is(wt(a),g),a}var e=t.prototype;return e.render=function(s,r,n){var a=this._time,h=this._tDur,o=this._dur,l=s<0,d=s>h-z&&!l?h:s<z?0:s,_,f,p,c,g,x,m,b,v;if(!o)Kr(this,s,r,n);else if(d!==this._tTime||!s||n||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==l){if(_=d,b=this.timeline,this._repeat){if(c=o+this._rDelay,this._repeat<-1&&l)return this.totalTime(c*100+s,r,n);if(_=j(d%c),d===h?(p=this._repeat,_=o):(p=~~(d/c),p&&p===j(d/c)&&(_=o,p--),_>o&&(_=o)),x=this._yoyo&&p&1,x&&(v=this._yEase,_=o-_),g=te(this._tTime,c),_===a&&!n&&this._initted&&p===g)return this._tTime=d,this;p!==g&&(b&&this._yEase&&bs(b,x),this.vars.repeatRefresh&&!x&&!this._lock&&this._time!==c&&this._initted&&(this._lock=n=1,this.render(j(c*p),!0).invalidate()._lock=0))}if(!this._initted){if(ss(this,l?s:_,n,r,d))return this._tTime=0,this;if(a!==this._time&&!(n&&this.vars.repeatRefresh&&p!==g))return this;if(o!==this._dur)return this.render(s,r,n)}if(this._tTime=d,this._time=_,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=m=(v||this._ease)(_/o),this._from&&(this.ratio=m=1-m),_&&!a&&!r&&!p&&(ht(this,"onStart"),this._tTime!==d))return this;for(f=this._pt;f;)f.r(m,f.d),f=f._next;b&&b.render(s<0?s:b._dur*b._ease(_/this._dur),r,n)||this._startAt&&(this._zTime=s),this._onUpdate&&!r&&(l&&ri(this,s,r,n),ht(this,"onUpdate")),this._repeat&&p!==g&&this.vars.onRepeat&&!r&&this.parent&&ht(this,"onRepeat"),(d===this._tDur||!d)&&this._tTime===d&&(l&&!this._onUpdate&&ri(this,s,!0,!0),(s||!o)&&(d===this._tDur&&this._ts>0||!d&&this._ts<0)&&Ct(this,1),!r&&!(l&&!a)&&(d||a||x)&&(ht(this,d===h?"onComplete":"onReverseComplete",!0),this._prom&&!(d<h&&this.timeScale()>0)&&this._prom()))}return this},e.targets=function(){return this._targets},e.invalidate=function(s){return(!s||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(s),u.prototype.invalidate.call(this,s)},e.resetTo=function(s,r,n,a,h){xe||ot.wake(),this._ts||this.play();var o=Math.min(this._dur,(this._dp._time-this._start)*this._ts),l;return this._initted||fi(this,o),l=this._ease(o/this._dur),xn(this,s,r,n,a,l,o,h)?this.resetTo(s,r,n,a,1):(Ue(this,0),this.parent||Ji(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},e.kill=function(s,r){if(r===void 0&&(r="all"),!s&&(!r||r==="all"))return this._lazy=this._pt=0,this.parent?ge(this):this;if(this.timeline){var n=this.timeline.totalDuration();return this.timeline.killTweensOf(s,r,kt&&kt.vars.overwrite!==!0)._first||ge(this),this.parent&&n!==this.timeline.totalDuration()&&ee(this,this._dur*this.timeline._tDur/n,0,1),this}var a=this._targets,h=s?ft(s):a,o=this._ptLookup,l=this._pt,d,_,f,p,c,g,x;if((!r||r==="all")&&qr(a,h))return r==="all"&&(this._pt=0),ge(this);for(d=this._op=this._op||[],r!=="all"&&(Y(r)&&(c={},J(r,function(m){return c[m]=1}),r=c),r=yn(a,r)),x=a.length;x--;)if(~h.indexOf(a[x])){_=o[x],r==="all"?(d[x]=r,p=_,f={}):(f=d[x]=d[x]||{},p=r);for(c in p)g=_&&_[c],g&&((!("kill"in g.d)||g.d.kill(c)===!0)&&Fe(this,g,"_pt"),delete _[c]),f!=="all"&&(f[c]=1)}return this._initted&&!this._pt&&l&&ge(this),this},t.to=function(s,r){return new t(s,r,arguments[2])},t.from=function(s,r){return _e(1,arguments)},t.delayedCall=function(s,r,n,a){return new t(r,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:s,onComplete:r,onReverseComplete:r,onCompleteParams:n,onReverseCompleteParams:n,callbackScope:a})},t.fromTo=function(s,r,n){return _e(2,arguments)},t.set=function(s,r){return r.duration=0,r.repeatDelay||(r.repeat=0),new t(s,r)},t.killTweensOf=function(s,r,n){return V.killTweensOf(s,r,n)},t}(ye);ct(X.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),J("staggerTo,staggerFrom,staggerFromTo",function(u){X[u]=function(){var t=new $,e=ai.call(arguments,0);return e.splice(u==="staggerFromTo"?5:4,0,0),t[u].apply(t,e)}});var pi=function(t,e,i){return t[e]=i},Ss=function(t,e,i){return t[e](i)},vn=function(t,e,i,s){return t[e](s.fp,i)},Tn=function(t,e,i){return t.setAttribute(e,i)},gi=function(t,e){return B(t[e])?Ss:je(t[e])&&t.setAttribute?Tn:pi},Ms=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e6)/1e6,e)},wn=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},Es=function(t,e){var i=e._pt,s="";if(!t&&e.b)s=e.b;else if(t===1&&e.e)s=e.e;else{for(;i;)s=i.p+(i.m?i.m(i.s+i.c*t):Math.round((i.s+i.c*t)*1e4)/1e4)+s,i=i._next;s+=e.c}e.set(e.t,e.p,s,e)},mi=function(t,e){for(var i=e._pt;i;)i.r(t,i.d),i=i._next},Pn=function(t,e,i,s){for(var r=this._pt,n;r;)n=r._next,r.p===s&&r.modifier(t,e,i),r=n},Rn=function(t){for(var e=this._pt,i,s;e;)s=e._next,e.p===t&&!e.op||e.op===t?Fe(this,e,"_pt"):e.dep||(i=1),e=s;return!i},Sn=function(t,e,i,s){s.mSet(t,e,s.m.call(s.tween,i,s.mt),s)},Cs=function(t){for(var e=t._pt,i,s,r,n;e;){for(i=e._next,s=r;s&&s.pr>e.pr;)s=s._next;(e._prev=s?s._prev:n)?e._prev._next=e:r=e,(e._next=s)?s._prev=e:n=e,e=i}t._pt=r},tt=function(){function u(e,i,s,r,n,a,h,o,l){this.t=i,this.s=r,this.c=n,this.p=s,this.r=a||Ms,this.d=h||this,this.set=o||pi,this.pr=l||0,this._next=e,e&&(e._prev=this)}var t=u.prototype;return t.modifier=function(i,s,r){this.mSet=this.mSet||this.set,this.set=Sn,this.m=i,this.mt=r,this.tween=s},u}();J(ii+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(u){return Je[u]=1}),nt.TweenMax=nt.TweenLite=X,nt.TimelineLite=nt.TimelineMax=$,V=new $({sortChildren:!1,defaults:$t,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),rt.stringFilter=xs;var Wt=[],Ie={},Mn=[],As=0,En=0,xi=function(t){return(Ie[t]||Mn).map(function(e){return e()})},yi=function(){var t=Date.now(),e=[];t-As>2&&(xi("matchMediaInit"),Wt.forEach(function(i){var s=i.queries,r=i.conditions,n,a,h,o;for(a in s)n=xt.matchMedia(s[a]).matches,n&&(h=1),n!==r[a]&&(r[a]=n,o=1);o&&(i.revert(),h&&e.push(i))}),xi("matchMediaRevert"),e.forEach(function(i){return i.onMatch(i,function(s){return i.add(null,s)})}),As=t,xi("matchMedia"))},Os=function(){function u(e,i){this.selector=i&&hi(i),this.data=[],this._r=[],this.isReverted=!1,this.id=En++,e&&this.add(e)}var t=u.prototype;return t.add=function(i,s,r){B(i)&&(r=s,s=i,i=B);var n=this,a=function(){var o=U,l=n.selector,d;return o&&o!==n&&o.data.push(n),r&&(n.selector=hi(r)),U=n,d=s.apply(n,arguments),B(d)&&n._r.push(d),U=o,n.selector=l,n.isReverted=!1,d};return n.last=a,i===B?a(n,function(h){return n.add(null,h)}):i?n[i]=a:a},t.ignore=function(i){var s=U;U=null,i(this),U=s},t.getTweens=function(){var i=[];return this.data.forEach(function(s){return s instanceof u?i.push.apply(i,s.getTweens()):s instanceof X&&!(s.parent&&s.parent.data==="nested")&&i.push(s)}),i},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(i,s){var r=this;if(i?function(){for(var a=r.getTweens(),h=r.data.length,o;h--;)o=r.data[h],o.data==="isFlip"&&(o.revert(),o.getChildren(!0,!0,!1).forEach(function(l){return a.splice(a.indexOf(l),1)}));for(a.map(function(l){return{g:l._dur||l._delay||l._sat&&!l._sat.vars.immediateRender?l.globalTime(0):-1/0,t:l}}).sort(function(l,d){return d.g-l.g||-1/0}).forEach(function(l){return l.t.revert(i)}),h=r.data.length;h--;)o=r.data[h],o instanceof $?o.data!=="nested"&&(o.scrollTrigger&&o.scrollTrigger.revert(),o.kill()):!(o instanceof X)&&o.revert&&o.revert(i);r._r.forEach(function(l){return l(i,r)}),r.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),s)for(var n=Wt.length;n--;)Wt[n].id===this.id&&Wt.splice(n,1)},t.revert=function(i){this.kill(i||{})},u}(),Cn=function(){function u(e){this.contexts=[],this.scope=e,U&&U.data.push(this)}var t=u.prototype;return t.add=function(i,s,r){mt(i)||(i={matches:i});var n=new Os(0,r||this.scope),a=n.conditions={},h,o,l;U&&!n.selector&&(n.selector=U.selector),this.contexts.push(n),s=n.add("onMatch",s),n.queries=i;for(o in i)o==="all"?l=1:(h=xt.matchMedia(i[o]),h&&(Wt.indexOf(n)<0&&Wt.push(n),(a[o]=h.matches)&&(l=1),h.addListener?h.addListener(yi):h.addEventListener("change",yi)));return l&&s(n,function(d){return n.add(null,d)}),this},t.revert=function(i){this.kill(i||{})},t.kill=function(i){this.contexts.forEach(function(s){return s.kill(i,!0)})},u}(),Ve={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e.forEach(function(s){return fs(s)})},timeline:function(t){return new $(t)},getTweensOf:function(t,e){return V.getTweensOf(t,e)},getProperty:function(t,e,i,s){Y(t)&&(t=ft(t)[0]);var r=Ut(t||{}).get,n=i?$i:Zi;return i==="native"&&(i=""),t&&(e?n((at[e]&&at[e].get||r)(t,e,i,s)):function(a,h,o){return n((at[a]&&at[a].get||r)(t,a,h,o))})},quickSetter:function(t,e,i){if(t=ft(t),t.length>1){var s=t.map(function(l){return et.quickSetter(l,e,i)}),r=s.length;return function(l){for(var d=r;d--;)s[d](l)}}t=t[0]||{};var n=at[e],a=Ut(t),h=a.harness&&(a.harness.aliases||{})[e]||e,o=n?function(l){var d=new n;ie._pt=0,d.init(t,i?l+i:l,ie,0,[t]),d.render(1,d),ie._pt&&mi(1,ie)}:a.set(t,h);return n?o:function(l){return o(t,h,i?l+i:l,a,1)}},quickTo:function(t,e,i){var s,r=et.to(t,It((s={},s[e]="+=0.1",s.paused=!0,s),i||{})),n=function(h,o,l){return r.resetTo(e,h,o,l)};return n.tween=r,n},isTweening:function(t){return V.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=Nt(t.ease,$t.ease)),Ki($t,t||{})},config:function(t){return Ki(rt,t||{})},registerEffect:function(t){var e=t.name,i=t.effect,s=t.plugins,r=t.defaults,n=t.extendTimeline;(s||"").split(",").forEach(function(a){return a&&!at[a]&&!nt[a]&&ue(e+" effect requires "+a+" plugin.")}),ei[e]=function(a,h,o){return i(ft(a),ct(h||{},r),o)},n&&($.prototype[e]=function(a,h,o){return this.add(ei[e](a,mt(h)?h:(o=h)&&{},this),o)})},registerEase:function(t,e){C[t]=Nt(e)},parseEase:function(t,e){return arguments.length?Nt(t,e):C},getById:function(t){return V.getById(t)},exportRoot:function(t,e){t===void 0&&(t={});var i=new $(t),s,r;for(i.smoothChildTiming=K(t.smoothChildTiming),V.remove(i),i._dp=0,i._time=i._tTime=V._time,s=V._first;s;)r=s._next,(e||!(!s._dur&&s instanceof X&&s.vars.onComplete===s._targets[0]))&&yt(i,s,s._start-s._delay),s=r;return yt(V,i,0),i},context:function(t,e){return t?new Os(t,e):U},matchMedia:function(t){return new Cn(t)},matchMediaRefresh:function(){return Wt.forEach(function(t){var e=t.conditions,i,s;for(s in e)e[s]&&(e[s]=!1,i=1);i&&t.revert()})||yi()},addEventListener:function(t,e){var i=Ie[t]||(Ie[t]=[]);~i.indexOf(e)||i.push(e)},removeEventListener:function(t,e){var i=Ie[t],s=i&&i.indexOf(e);s>=0&&i.splice(s,1)},utils:{wrap:hn,wrapYoyo:on,distribute:hs,random:ls,snap:os,normalize:an,getUnit:Q,clamp:en,splitColor:ps,toArray:ft,selector:hi,mapRange:ds,pipe:rn,unitize:nn,interpolate:ln,shuffle:as},install:Xi,effects:ei,ticker:ot,updateRoot:$.updateRoot,plugins:at,globalTimeline:V,core:{PropTween:tt,globals:Yi,Tween:X,Timeline:$,Animation:ye,getCache:Ut,_removeLinkedListItem:Fe,reverting:function(){return H},context:function(t){return t&&U&&(U.data.push(t),t._ctx=U),U},suppressOverwrites:function(t){return Xe=t}}};J("to,from,fromTo,delayedCall,set,killTweensOf",function(u){return Ve[u]=X[u]}),ot.add($.updateRoot),ie=Ve.to({},{duration:0});var An=function(t,e){for(var i=t._pt;i&&i.p!==e&&i.op!==e&&i.fp!==e;)i=i._next;return i},On=function(t,e){var i=t._targets,s,r,n;for(s in e)for(r=i.length;r--;)n=t._ptLookup[r][s],n&&(n=n.d)&&(n._pt&&(n=An(n,s)),n&&n.modifier&&n.modifier(e[s],t,i[r],s))},bi=function(t,e){return{name:t,rawVars:1,init:function(s,r,n){n._onInit=function(a){var h,o;if(Y(r)&&(h={},J(r,function(l){return h[l]=1}),r=h),e){h={};for(o in r)h[o]=e(r[o]);r=h}On(a,r)}}}},et=Ve.registerPlugin({name:"attr",init:function(t,e,i,s,r){var n,a,h;this.tween=i;for(n in e)h=t.getAttribute(n)||"",a=this.add(t,"setAttribute",(h||0)+"",e[n],s,r,0,0,n),a.op=n,a.b=h,this._props.push(n)},render:function(t,e){for(var i=e._pt;i;)H?i.set(i.t,i.p,i.b,i):i.r(t,i.d),i=i._next}},{name:"endArray",init:function(t,e){for(var i=e.length;i--;)this.add(t,i,t[i]||0,e[i],0,0,0,0,0,1)}},bi("roundProps",oi),bi("modifiers"),bi("snap",os))||Ve;X.version=$.version=et.version="3.12.5",Gi=1,He()&&se(),C.Power0,C.Power1,C.Power2,C.Power3,C.Power4,C.Linear,C.Quad,C.Cubic,C.Quart,C.Quint,C.Strong,C.Elastic,C.Back,C.SteppedEase,C.Bounce,C.Sine,C.Expo,C.Circ;/*!
 * CSSPlugin 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var ks,Dt,re,vi,Gt,Ds,Ti,kn=function(){return typeof window<"u"},Rt={},Xt=180/Math.PI,ne=Math.PI/180,ae=Math.atan2,Fs=1e8,wi=/([A-Z])/g,Dn=/(left|right|width|margin|padding|x)/i,Fn=/[\s,\(]\S/,bt={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Pi=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},zn=function(t,e){return e.set(e.t,e.p,t===1?e.e:Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},Ln=function(t,e){return e.set(e.t,e.p,t?Math.round((e.s+e.c*t)*1e4)/1e4+e.u:e.b,e)},Un=function(t,e){var i=e.s+e.c*t;e.set(e.t,e.p,~~(i+(i<0?-.5:.5))+e.u,e)},zs=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},Ls=function(t,e){return e.set(e.t,e.p,t!==1?e.b:e.e,e)},In=function(t,e,i){return t.style[e]=i},Vn=function(t,e,i){return t.style.setProperty(e,i)},Nn=function(t,e,i){return t._gsap[e]=i},Bn=function(t,e,i){return t._gsap.scaleX=t._gsap.scaleY=i},Wn=function(t,e,i,s,r){var n=t._gsap;n.scaleX=n.scaleY=i,n.renderTransform(r,n)},Gn=function(t,e,i,s,r){var n=t._gsap;n[e]=i,n.renderTransform(r,n)},N="transform",it=N+"Origin",Xn=function u(t,e){var i=this,s=this.target,r=s.style,n=s._gsap;if(t in Rt&&r){if(this.tfm=this.tfm||{},t!=="transform")t=bt[t]||t,~t.indexOf(",")?t.split(",").forEach(function(a){return i.tfm[a]=St(s,a)}):this.tfm[t]=n.x?n[t]:St(s,t),t===it&&(this.tfm.zOrigin=n.zOrigin);else return bt.transform.split(",").forEach(function(a){return u.call(i,a,e)});if(this.props.indexOf(N)>=0)return;n.svg&&(this.svgo=s.getAttribute("data-svg-origin"),this.props.push(it,e,"")),t=N}(r||e)&&this.props.push(t,e,r[t])},Us=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},Yn=function(){var t=this.props,e=this.target,i=e.style,s=e._gsap,r,n;for(r=0;r<t.length;r+=3)t[r+1]?e[t[r]]=t[r+2]:t[r+2]?i[t[r]]=t[r+2]:i.removeProperty(t[r].substr(0,2)==="--"?t[r]:t[r].replace(wi,"-$1").toLowerCase());if(this.tfm){for(n in this.tfm)s[n]=this.tfm[n];s.svg&&(s.renderTransform(),e.setAttribute("data-svg-origin",this.svgo||"")),r=Ti(),(!r||!r.isStart)&&!i[N]&&(Us(i),s.zOrigin&&i[it]&&(i[it]+=" "+s.zOrigin+"px",s.zOrigin=0,s.renderTransform()),s.uncache=1)}},Is=function(t,e){var i={target:t,props:[],revert:Yn,save:Xn};return t._gsap||et.core.getCache(t),e&&e.split(",").forEach(function(s){return i.save(s)}),i},Vs,Ri=function(t,e){var i=Dt.createElementNS?Dt.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Dt.createElement(t);return i&&i.style?i:Dt.createElement(t)},vt=function u(t,e,i){var s=getComputedStyle(t);return s[e]||s.getPropertyValue(e.replace(wi,"-$1").toLowerCase())||s.getPropertyValue(e)||!i&&u(t,he(e)||e,1)||""},Ns="O,Moz,ms,Ms,Webkit".split(","),he=function(t,e,i){var s=e||Gt,r=s.style,n=5;if(t in r&&!i)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);n--&&!(Ns[n]+t in r););return n<0?null:(n===3?"ms":n>=0?Ns[n]:"")+t},Si=function(){kn()&&window.document&&(ks=window,Dt=ks.document,re=Dt.documentElement,Gt=Ri("div")||{style:{}},Ri("div"),N=he(N),it=N+"Origin",Gt.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Vs=!!he("perspective"),Ti=et.core.reverting,vi=1)},Mi=function u(t){var e=Ri("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,s=this.nextSibling,r=this.style.cssText,n;if(re.appendChild(e),e.appendChild(this),this.style.display="block",t)try{n=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=u}catch{}else this._gsapBBox&&(n=this._gsapBBox());return i&&(s?i.insertBefore(this,s):i.appendChild(this)),re.removeChild(e),this.style.cssText=r,n},Bs=function(t,e){for(var i=e.length;i--;)if(t.hasAttribute(e[i]))return t.getAttribute(e[i])},Ws=function(t){var e;try{e=t.getBBox()}catch{e=Mi.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===Mi||(e=Mi.call(t,!0)),e&&!e.width&&!e.x&&!e.y?{x:+Bs(t,["x","cx","x1"])||0,y:+Bs(t,["y","cy","y1"])||0,width:0,height:0}:e},Gs=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&Ws(t))},Yt=function(t,e){if(e){var i=t.style,s;e in Rt&&e!==it&&(e=N),i.removeProperty?(s=e.substr(0,2),(s==="ms"||e.substr(0,6)==="webkit")&&(e="-"+e),i.removeProperty(s==="--"?e:e.replace(wi,"-$1").toLowerCase())):i.removeAttribute(e)}},Ft=function(t,e,i,s,r,n){var a=new tt(t._pt,e,i,0,1,n?Ls:zs);return t._pt=a,a.b=s,a.e=r,t._props.push(i),a},Xs={deg:1,rad:1,turn:1},jn={grid:1,flex:1},zt=function u(t,e,i,s){var r=parseFloat(i)||0,n=(i+"").trim().substr((r+"").length)||"px",a=Gt.style,h=Dn.test(e),o=t.tagName.toLowerCase()==="svg",l=(o?"client":"offset")+(h?"Width":"Height"),d=100,_=s==="px",f=s==="%",p,c,g,x;if(s===n||!r||Xs[s]||Xs[n])return r;if(n!=="px"&&!_&&(r=u(t,e,i,"px")),x=t.getCTM&&Gs(t),(f||n==="%")&&(Rt[e]||~e.indexOf("adius")))return p=x?t.getBBox()[h?"width":"height"]:t[l],W(f?r/p*d:r/100*p);if(a[h?"width":"height"]=d+(_?n:s),c=~e.indexOf("adius")||s==="em"&&t.appendChild&&!o?t:t.parentNode,x&&(c=(t.ownerSVGElement||{}).parentNode),(!c||c===Dt||!c.appendChild)&&(c=Dt.body),g=c._gsap,g&&f&&g.width&&h&&g.time===ot.time&&!g.uncache)return W(r/g.width*d);if(f&&(e==="height"||e==="width")){var m=t.style[e];t.style[e]=d+s,p=t[l],m?t.style[e]=m:Yt(t,e)}else(f||n==="%")&&!jn[vt(c,"display")]&&(a.position=vt(t,"position")),c===t&&(a.position="static"),c.appendChild(Gt),p=Gt[l],c.removeChild(Gt),a.position="absolute";return h&&f&&(g=Ut(c),g.time=ot.time,g.width=c[l]),W(_?p*r/d:p&&r?d/p*r:0)},St=function(t,e,i,s){var r;return vi||Si(),e in bt&&e!=="transform"&&(e=bt[e],~e.indexOf(",")&&(e=e.split(",")[0])),Rt[e]&&e!=="transform"?(r=Te(t,s),r=e!=="transformOrigin"?r[e]:r.svg?r.origin:Be(vt(t,it))+" "+r.zOrigin+"px"):(r=t.style[e],(!r||r==="auto"||s||~(r+"").indexOf("calc("))&&(r=Ne[e]&&Ne[e](t,e,i)||vt(t,e)||qi(t,e)||(e==="opacity"?1:0))),i&&!~(r+"").trim().indexOf(" ")?zt(t,e,r,i)+i:r},Hn=function(t,e,i,s){if(!i||i==="none"){var r=he(e,t,1),n=r&&vt(t,r,1);n&&n!==i?(e=r,i=n):e==="borderColor"&&(i=vt(t,"borderTopColor"))}var a=new tt(this._pt,t.style,e,0,1,Es),h=0,o=0,l,d,_,f,p,c,g,x,m,b,v,y;if(a.b=i,a.e=s,i+="",s+="",s==="auto"&&(c=t.style[e],t.style[e]=s,s=vt(t,e)||s,c?t.style[e]=c:Yt(t,e)),l=[i,s],xs(l),i=l[0],s=l[1],_=i.match(Kt)||[],y=s.match(Kt)||[],y.length){for(;d=Kt.exec(s);)g=d[0],m=s.substring(h,d.index),p?p=(p+1)%5:(m.substr(-5)==="rgba("||m.substr(-5)==="hsla(")&&(p=1),g!==(c=_[o++]||"")&&(f=parseFloat(c)||0,v=c.substr((f+"").length),g.charAt(1)==="="&&(g=Jt(f,g)+v),x=parseFloat(g),b=g.substr((x+"").length),h=Kt.lastIndex-b.length,b||(b=b||rt.units[e]||v,h===s.length&&(s+=b,a.e+=b)),v!==b&&(f=zt(t,e,c,b)||0),a._pt={_next:a._pt,p:m||o===1?m:",",s:f,c:x-f,m:p&&p<4||e==="zIndex"?Math.round:0});a.c=h<s.length?s.substring(h,s.length):""}else a.r=e==="display"&&s==="none"?Ls:zs;return Bi.test(s)&&(a.e=0),this._pt=a,a},Ys={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},qn=function(t){var e=t.split(" "),i=e[0],s=e[1]||"50%";return(i==="top"||i==="bottom"||s==="left"||s==="right")&&(t=i,i=s,s=t),e[0]=Ys[i]||i,e[1]=Ys[s]||s,e.join(" ")},Qn=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var i=e.t,s=i.style,r=e.u,n=i._gsap,a,h,o;if(r==="all"||r===!0)s.cssText="",h=1;else for(r=r.split(","),o=r.length;--o>-1;)a=r[o],Rt[a]&&(h=1,a=a==="transformOrigin"?it:N),Yt(i,a);h&&(Yt(i,N),n&&(n.svg&&i.removeAttribute("transform"),Te(i,1),n.uncache=1,Us(s)))}},Ne={clearProps:function(t,e,i,s,r){if(r.data!=="isFromStart"){var n=t._pt=new tt(t._pt,e,i,0,0,Qn);return n.u=s,n.pr=-10,n.tween=r,t._props.push(i),1}}},ve=[1,0,0,1,0,0],js={},Hs=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},qs=function(t){var e=vt(t,N);return Hs(e)?ve:e.substr(7).match(Ni).map(W)},Ei=function(t,e){var i=t._gsap||Ut(t),s=t.style,r=qs(t),n,a,h,o;return i.svg&&t.getAttribute("transform")?(h=t.transform.baseVal.consolidate().matrix,r=[h.a,h.b,h.c,h.d,h.e,h.f],r.join(",")==="1,0,0,1,0,0"?ve:r):(r===ve&&!t.offsetParent&&t!==re&&!i.svg&&(h=s.display,s.display="block",n=t.parentNode,(!n||!t.offsetParent)&&(o=1,a=t.nextElementSibling,re.appendChild(t)),r=qs(t),h?s.display=h:Yt(t,"display"),o&&(a?n.insertBefore(t,a):n?n.appendChild(t):re.removeChild(t))),e&&r.length>6?[r[0],r[1],r[4],r[5],r[12],r[13]]:r)},Ci=function(t,e,i,s,r,n){var a=t._gsap,h=r||Ei(t,!0),o=a.xOrigin||0,l=a.yOrigin||0,d=a.xOffset||0,_=a.yOffset||0,f=h[0],p=h[1],c=h[2],g=h[3],x=h[4],m=h[5],b=e.split(" "),v=parseFloat(b[0])||0,y=parseFloat(b[1])||0,w,P,R,T;i?h!==ve&&(P=f*g-p*c)&&(R=v*(g/P)+y*(-c/P)+(c*m-g*x)/P,T=v*(-p/P)+y*(f/P)-(f*m-p*x)/P,v=R,y=T):(w=Ws(t),v=w.x+(~b[0].indexOf("%")?v/100*w.width:v),y=w.y+(~(b[1]||b[0]).indexOf("%")?y/100*w.height:y)),s||s!==!1&&a.smooth?(x=v-o,m=y-l,a.xOffset=d+(x*f+m*c)-x,a.yOffset=_+(x*p+m*g)-m):a.xOffset=a.yOffset=0,a.xOrigin=v,a.yOrigin=y,a.smooth=!!s,a.origin=e,a.originIsAbsolute=!!i,t.style[it]="0px 0px",n&&(Ft(n,a,"xOrigin",o,v),Ft(n,a,"yOrigin",l,y),Ft(n,a,"xOffset",d,a.xOffset),Ft(n,a,"yOffset",_,a.yOffset)),t.setAttribute("data-svg-origin",v+" "+y)},Te=function(t,e){var i=t._gsap||new Ts(t);if("x"in i&&!e&&!i.uncache)return i;var s=t.style,r=i.scaleX<0,n="px",a="deg",h=getComputedStyle(t),o=vt(t,it)||"0",l,d,_,f,p,c,g,x,m,b,v,y,w,P,R,T,E,A,O,k,L,F,M,G,st,qt,Lt,Pe,Qt,Js,Mt,Zt;return l=d=_=c=g=x=m=b=v=0,f=p=1,i.svg=!!(t.getCTM&&Gs(t)),h.translate&&((h.translate!=="none"||h.scale!=="none"||h.rotate!=="none")&&(s[N]=(h.translate!=="none"?"translate3d("+(h.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(h.rotate!=="none"?"rotate("+h.rotate+") ":"")+(h.scale!=="none"?"scale("+h.scale.split(" ").join(",")+") ":"")+(h[N]!=="none"?h[N]:"")),s.scale=s.rotate=s.translate="none"),P=Ei(t,i.svg),i.svg&&(i.uncache?(st=t.getBBox(),o=i.xOrigin-st.x+"px "+(i.yOrigin-st.y)+"px",G=""):G=!e&&t.getAttribute("data-svg-origin"),Ci(t,G||o,!!G||i.originIsAbsolute,i.smooth!==!1,P)),y=i.xOrigin||0,w=i.yOrigin||0,P!==ve&&(A=P[0],O=P[1],k=P[2],L=P[3],l=F=P[4],d=M=P[5],P.length===6?(f=Math.sqrt(A*A+O*O),p=Math.sqrt(L*L+k*k),c=A||O?ae(O,A)*Xt:0,m=k||L?ae(k,L)*Xt+c:0,m&&(p*=Math.abs(Math.cos(m*ne))),i.svg&&(l-=y-(y*A+w*k),d-=w-(y*O+w*L))):(Zt=P[6],Js=P[7],Lt=P[8],Pe=P[9],Qt=P[10],Mt=P[11],l=P[12],d=P[13],_=P[14],R=ae(Zt,Qt),g=R*Xt,R&&(T=Math.cos(-R),E=Math.sin(-R),G=F*T+Lt*E,st=M*T+Pe*E,qt=Zt*T+Qt*E,Lt=F*-E+Lt*T,Pe=M*-E+Pe*T,Qt=Zt*-E+Qt*T,Mt=Js*-E+Mt*T,F=G,M=st,Zt=qt),R=ae(-k,Qt),x=R*Xt,R&&(T=Math.cos(-R),E=Math.sin(-R),G=A*T-Lt*E,st=O*T-Pe*E,qt=k*T-Qt*E,Mt=L*E+Mt*T,A=G,O=st,k=qt),R=ae(O,A),c=R*Xt,R&&(T=Math.cos(R),E=Math.sin(R),G=A*T+O*E,st=F*T+M*E,O=O*T-A*E,M=M*T-F*E,A=G,F=st),g&&Math.abs(g)+Math.abs(c)>359.9&&(g=c=0,x=180-x),f=W(Math.sqrt(A*A+O*O+k*k)),p=W(Math.sqrt(M*M+Zt*Zt)),R=ae(F,M),m=Math.abs(R)>2e-4?R*Xt:0,v=Mt?1/(Mt<0?-Mt:Mt):0),i.svg&&(G=t.getAttribute("transform"),i.forceCSS=t.setAttribute("transform","")||!Hs(vt(t,N)),G&&t.setAttribute("transform",G))),Math.abs(m)>90&&Math.abs(m)<270&&(r?(f*=-1,m+=c<=0?180:-180,c+=c<=0?180:-180):(p*=-1,m+=m<=0?180:-180)),e=e||i.uncache,i.x=l-((i.xPercent=l&&(!e&&i.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-l)?-50:0)))?t.offsetWidth*i.xPercent/100:0)+n,i.y=d-((i.yPercent=d&&(!e&&i.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-d)?-50:0)))?t.offsetHeight*i.yPercent/100:0)+n,i.z=_+n,i.scaleX=W(f),i.scaleY=W(p),i.rotation=W(c)+a,i.rotationX=W(g)+a,i.rotationY=W(x)+a,i.skewX=m+a,i.skewY=b+a,i.transformPerspective=v+n,(i.zOrigin=parseFloat(o.split(" ")[2])||!e&&i.zOrigin||0)&&(s[it]=Be(o)),i.xOffset=i.yOffset=0,i.force3D=rt.force3D,i.renderTransform=i.svg?$n:Vs?Qs:Zn,i.uncache=0,i},Be=function(t){return(t=t.split(" "))[0]+" "+t[1]},Ai=function(t,e,i){var s=Q(e);return W(parseFloat(e)+parseFloat(zt(t,"x",i+"px",s)))+s},Zn=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,Qs(t,e)},jt="0deg",we="0px",Ht=") ",Qs=function(t,e){var i=e||this,s=i.xPercent,r=i.yPercent,n=i.x,a=i.y,h=i.z,o=i.rotation,l=i.rotationY,d=i.rotationX,_=i.skewX,f=i.skewY,p=i.scaleX,c=i.scaleY,g=i.transformPerspective,x=i.force3D,m=i.target,b=i.zOrigin,v="",y=x==="auto"&&t&&t!==1||x===!0;if(b&&(d!==jt||l!==jt)){var w=parseFloat(l)*ne,P=Math.sin(w),R=Math.cos(w),T;w=parseFloat(d)*ne,T=Math.cos(w),n=Ai(m,n,P*T*-b),a=Ai(m,a,-Math.sin(w)*-b),h=Ai(m,h,R*T*-b+b)}g!==we&&(v+="perspective("+g+Ht),(s||r)&&(v+="translate("+s+"%, "+r+"%) "),(y||n!==we||a!==we||h!==we)&&(v+=h!==we||y?"translate3d("+n+", "+a+", "+h+") ":"translate("+n+", "+a+Ht),o!==jt&&(v+="rotate("+o+Ht),l!==jt&&(v+="rotateY("+l+Ht),d!==jt&&(v+="rotateX("+d+Ht),(_!==jt||f!==jt)&&(v+="skew("+_+", "+f+Ht),(p!==1||c!==1)&&(v+="scale("+p+", "+c+Ht),m.style[N]=v||"translate(0, 0)"},$n=function(t,e){var i=e||this,s=i.xPercent,r=i.yPercent,n=i.x,a=i.y,h=i.rotation,o=i.skewX,l=i.skewY,d=i.scaleX,_=i.scaleY,f=i.target,p=i.xOrigin,c=i.yOrigin,g=i.xOffset,x=i.yOffset,m=i.forceCSS,b=parseFloat(n),v=parseFloat(a),y,w,P,R,T;h=parseFloat(h),o=parseFloat(o),l=parseFloat(l),l&&(l=parseFloat(l),o+=l,h+=l),h||o?(h*=ne,o*=ne,y=Math.cos(h)*d,w=Math.sin(h)*d,P=Math.sin(h-o)*-_,R=Math.cos(h-o)*_,o&&(l*=ne,T=Math.tan(o-l),T=Math.sqrt(1+T*T),P*=T,R*=T,l&&(T=Math.tan(l),T=Math.sqrt(1+T*T),y*=T,w*=T)),y=W(y),w=W(w),P=W(P),R=W(R)):(y=d,R=_,w=P=0),(b&&!~(n+"").indexOf("px")||v&&!~(a+"").indexOf("px"))&&(b=zt(f,"x",n,"px"),v=zt(f,"y",a,"px")),(p||c||g||x)&&(b=W(b+p-(p*y+c*P)+g),v=W(v+c-(p*w+c*R)+x)),(s||r)&&(T=f.getBBox(),b=W(b+s/100*T.width),v=W(v+r/100*T.height)),T="matrix("+y+","+w+","+P+","+R+","+b+","+v+")",f.setAttribute("transform",T),m&&(f.style[N]=T)},Kn=function(t,e,i,s,r){var n=360,a=Y(r),h=parseFloat(r)*(a&&~r.indexOf("rad")?Xt:1),o=h-s,l=s+o+"deg",d,_;return a&&(d=r.split("_")[1],d==="short"&&(o%=n,o!==o%(n/2)&&(o+=o<0?n:-n)),d==="cw"&&o<0?o=(o+n*Fs)%n-~~(o/n)*n:d==="ccw"&&o>0&&(o=(o-n*Fs)%n-~~(o/n)*n)),t._pt=_=new tt(t._pt,e,i,s,o,zn),_.e=l,_.u="deg",t._props.push(i),_},Zs=function(t,e){for(var i in e)t[i]=e[i];return t},Jn=function(t,e,i){var s=Zs({},i._gsap),r="perspective,force3D,transformOrigin,svgOrigin",n=i.style,a,h,o,l,d,_,f,p;s.svg?(o=i.getAttribute("transform"),i.setAttribute("transform",""),n[N]=e,a=Te(i,1),Yt(i,N),i.setAttribute("transform",o)):(o=getComputedStyle(i)[N],n[N]=e,a=Te(i,1),n[N]=o);for(h in Rt)o=s[h],l=a[h],o!==l&&r.indexOf(h)<0&&(f=Q(o),p=Q(l),d=f!==p?zt(i,h,o,p):parseFloat(o),_=parseFloat(l),t._pt=new tt(t._pt,a,h,d,_-d,Pi),t._pt.u=p||0,t._props.push(h));Zs(a,s)};J("padding,margin,Width,Radius",function(u,t){var e="Top",i="Right",s="Bottom",r="Left",n=(t<3?[e,i,s,r]:[e+r,e+i,s+i,s+r]).map(function(a){return t<2?u+a:"border"+a+u});Ne[t>1?"border"+u:u]=function(a,h,o,l,d){var _,f;if(arguments.length<4)return _=n.map(function(p){return St(a,p,o)}),f=_.join(" "),f.split(_[0]).length===5?_[0]:f;_=(l+"").split(" "),f={},n.forEach(function(p,c){return f[p]=_[c]=_[c]||_[(c-1)/2|0]}),a.init(h,f,d)}});var $s={name:"css",register:Si,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,i,s,r){var n=this._props,a=t.style,h=i.vars.startAt,o,l,d,_,f,p,c,g,x,m,b,v,y,w,P,R;vi||Si(),this.styles=this.styles||Is(t),R=this.styles.props,this.tween=i;for(c in e)if(c!=="autoRound"&&(l=e[c],!(at[c]&&ws(c,e,i,s,t,r)))){if(f=typeof l,p=Ne[c],f==="function"&&(l=l.call(i,s,t,r),f=typeof l),f==="string"&&~l.indexOf("random(")&&(l=pe(l)),p)p(this,t,c,l,i)&&(P=1);else if(c.substr(0,2)==="--")o=(getComputedStyle(t).getPropertyValue(c)+"").trim(),l+="",Ot.lastIndex=0,Ot.test(o)||(g=Q(o),x=Q(l)),x?g!==x&&(o=zt(t,c,o,x)+x):g&&(l+=g),this.add(a,"setProperty",o,l,s,r,0,0,c),n.push(c),R.push(c,0,a[c]);else if(f!=="undefined"){if(h&&c in h?(o=typeof h[c]=="function"?h[c].call(i,s,t,r):h[c],Y(o)&&~o.indexOf("random(")&&(o=pe(o)),Q(o+"")||o==="auto"||(o+=rt.units[c]||Q(St(t,c))||""),(o+"").charAt(1)==="="&&(o=St(t,c))):o=St(t,c),_=parseFloat(o),m=f==="string"&&l.charAt(1)==="="&&l.substr(0,2),m&&(l=l.substr(2)),d=parseFloat(l),c in bt&&(c==="autoAlpha"&&(_===1&&St(t,"visibility")==="hidden"&&d&&(_=0),R.push("visibility",0,a.visibility),Ft(this,a,"visibility",_?"inherit":"hidden",d?"inherit":"hidden",!d)),c!=="scale"&&c!=="transform"&&(c=bt[c],~c.indexOf(",")&&(c=c.split(",")[0]))),b=c in Rt,b){if(this.styles.save(c),v||(y=t._gsap,y.renderTransform&&!e.parseTransform||Te(t,e.parseTransform),w=e.smoothOrigin!==!1&&y.smooth,v=this._pt=new tt(this._pt,a,N,0,1,y.renderTransform,y,0,-1),v.dep=1),c==="scale")this._pt=new tt(this._pt,y,"scaleY",y.scaleY,(m?Jt(y.scaleY,m+d):d)-y.scaleY||0,Pi),this._pt.u=0,n.push("scaleY",c),c+="X";else if(c==="transformOrigin"){R.push(it,0,a[it]),l=qn(l),y.svg?Ci(t,l,0,w,0,this):(x=parseFloat(l.split(" ")[2])||0,x!==y.zOrigin&&Ft(this,y,"zOrigin",y.zOrigin,x),Ft(this,a,c,Be(o),Be(l)));continue}else if(c==="svgOrigin"){Ci(t,l,1,w,0,this);continue}else if(c in js){Kn(this,y,c,_,m?Jt(_,m+l):l);continue}else if(c==="smoothOrigin"){Ft(this,y,"smooth",y.smooth,l);continue}else if(c==="force3D"){y[c]=l;continue}else if(c==="transform"){Jn(this,l,t);continue}}else c in a||(c=he(c)||c);if(b||(d||d===0)&&(_||_===0)&&!Fn.test(l)&&c in a)g=(o+"").substr((_+"").length),d||(d=0),x=Q(l)||(c in rt.units?rt.units[c]:g),g!==x&&(_=zt(t,c,o,x)),this._pt=new tt(this._pt,b?y:a,c,_,(m?Jt(_,m+d):d)-_,!b&&(x==="px"||c==="zIndex")&&e.autoRound!==!1?Un:Pi),this._pt.u=x||0,g!==x&&x!=="%"&&(this._pt.b=o,this._pt.r=Ln);else if(c in a)Hn.call(this,t,c,o,m?m+l:l);else if(c in t)this.add(t,c,o||t[c],m?m+l:l,s,r);else if(c!=="parseTransform"){Ke(c,l);continue}b||(c in a?R.push(c,0,a[c]):R.push(c,1,o||t[c])),n.push(c)}}P&&Cs(this)},render:function(t,e){if(e.tween._time||!Ti())for(var i=e._pt;i;)i.r(t,i.d),i=i._next;else e.styles.revert()},get:St,aliases:bt,getSetter:function(t,e,i){var s=bt[e];return s&&s.indexOf(",")<0&&(e=s),e in Rt&&e!==it&&(t._gsap.x||St(t,"x"))?i&&Ds===i?e==="scale"?Bn:Nn:(Ds=i||{})&&(e==="scale"?Wn:Gn):t.style&&!je(t.style[e])?In:~e.indexOf("-")?Vn:gi(t,e)},core:{_removeProperty:Yt,_getMatrix:Ei}};et.utils.checkPrefix=he,et.core.getStyleSaver=Is,function(u,t,e,i){var s=J(u+","+t+","+e,function(r){Rt[r]=1});J(t,function(r){rt.units[r]="deg",js[r]=1}),bt[s[13]]=u+","+t,J(i,function(r){var n=r.split(":");bt[n[1]]=s[n[0]]})}("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY"),J("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(u){rt.units[u]="px"}),et.registerPlugin($s);var Ks=et.registerPlugin($s)||et;Ks.core.Tween,(()=>{Ks.to("body",{duration:.5,autoAlpha:1})})(),new Ir});
